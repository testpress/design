<!doctype html>
<html class=" ">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Eleventy v3.0.0">
  <title>Create Recurring Class</title>
  <link rel="stylesheet" href="/pr-preview/pr-607/css/tailwind.css" />
  
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter var',],
          },
        }
      }
    }
  </script>
  <style>
    [data-tooltip]:hover span {
      display: block;
    }
  </style>
  
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />


  <script defer src="https://unpkg.com/alpinejs@3.4.2/dist/cdn.min.js"></script>
  <script src="/node_modules/preline/dist/preline.js"></script>

   <style>
    [x-cloak] {
      display: none !important;
    }
  </style>
</head>

 
  <body class="h-full overflow-y-scroll min-h-screen bg-gray-100">
    <div class="min-h-full">
      <nav class="bg-white shadow-sm" x-data="{open: false}">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex">
          <div class="flex-shrink-0 flex items-center">
            <img class="block lg:hidden h-8 w-auto"
              src="https://brilliantpala.org/wp-content/uploads/2021/12/brilliant-logo-2.webp" alt="Workflow">
            <img class="hidden lg:block h-8 w-auto"
              src="https://brilliantpala.org/wp-content/uploads/2021/12/brilliant-logo-2.webp" alt="Workflow">
          </div>
          <div class="hidden lg:flex sm:-my-px sm:ml-6 sm:space-x-8">
            <!-- Current: "border-indigo-500 text-gray-900", Default: "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" -->
            <a href="#"
              class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Courses</a>

            <a href="#"
              class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Exams</a>

              <a href="/pr-preview/pr-607/questions/reports"
              class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Questions</a>

              <div class="relative inline-block flex" x-data="{showdropdown:false}">
                <div class="flex">
                  <button type="button" @click="showdropdown=!showdropdown" class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                    <p class="ml-2 whitespace-nowrap">Memberships</p>
                    <svg class="ml-2 h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"></path>
                    </svg>
                  </button>
                  <div class="absolute right-0 z-50 w-48 origin-top-right top-full rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" x-show="showdropdown" @click.away="showdropdown=false" style="display: none;">
                    <div class="py-1" role="none">
                      <!-- Active: "bg-gray-100 text-gray-900", Not Active: "text-gray-700" -->
                      <a href="#" class="text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 text-gray-900 hover:curson-pointer" role="menuitem" tabindex="-1" id="menu-item-0">Members Management</a>
                      <a href="#" class="text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 text-gray-900 hover:curson-pointer" role="menuitem" tabindex="-1" id="menu-item-1">Batch Management</a>
                      <a href="#" class="text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 text-gray-900 hover:curson-pointer" role="menuitem" tabindex="-1" id="menu-item-2">Roles management</a>
                    </div>
                  </div>
                </div>
              </div>

              <div class="relative inline-block flex" x-data="{showdropdown:false}">
                <div class="flex">
                  <button type="button" @click="showdropdown=!showdropdown" class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                    <p class="ml-2 whitespace-nowrap">Evaluate</p>
                    <svg class="ml-2 h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"></path>
                    </svg>
                  </button>
                  <div class="absolute right-0 z-50 w-48 origin-top-right top-full rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" x-show="showdropdown" @click.away="showdropdown=false" style="display: none;">
                    <div class="py-1" role="none">
                      <!-- Active: "bg-gray-100 text-gray-900", Not Active: "text-gray-700" -->
                      <a href="#" class="text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 text-gray-900 hover:curson-pointer" role="menuitem" tabindex="-1" id="menu-item-0">Exam Evaluations</a>
                      <a href="/pr-preview/pr-607/testpress/assignment_submissions/" class="text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 hover:curson-pointer" role="menuitem" tabindex="-1" id="menu-item-1">Assignment Evaluations</a>
                    </div>
                  </div>
                </div>
              </div>
              

            <a href="/pr-preview/pr-607/doubts/"
              class="border-indigo-500 text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium"
              aria-current="page">Doubts</a>

              <a href="/reported_forum_thread/"
              class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium"
              aria-current="page">Discussion</a>
          </div>
        </div>
        <div x-data="globalSearch()" x-init="watchSearchOpen" class="hidden lg:flex sm:ml-6 items-center">
          
          <button @click="search_open = true" type="button"
            class="bg-white p-1 mr-2 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
            <span class="sr-only">Global search</span>
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path>
            </svg>
          </button>
          <div x-cloak x-show="search_open" @keydown.window.escape="search_open = false" class="relative z-50" aria-labelledby="modal-title" role="dialog" aria-modal="true">
  <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
    x-transition:enter="ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0">
  </div>

  <div class="fixed inset-0 z-10">
    <div class="m-3 flex h-[calc(100%-3.5rem)] min-h-[calc(100%-3.5rem)] items-center transition-all ease-out sm:mx-auto sm:w-full sm:max-w-lg">
<div @click.away="search_open = false;" class="relative transform overflow-hidden rounded-lg bg-white  text-left shadow-xl transition-all sm:my-8 sm:w-full">
    <!-- Input -->
    <div class="relative">
      <div class="pointer-events-none absolute inset-y-0 start-0 z-20 flex items-center pl-3">
        <svg class="w-4 h-4 shrink-0 text-stone-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.3-4.3" />
        </svg>
      </div>
      <input x-model="searchQuery" type="text" value="Refund" class="block w-full rounded-t-lg border-transparent border-b-stone-200 bg-white py-3 pl-10 pr-8 text-sm placeholder:text-stone-500 focus:border-transparent focus:border-b-stone-200 focus:outline-none focus:ring-0 disabled:pointer-events-none disabled:opacity-50" placeholder="Search or type a command" autofocus />
      <div class="pointer-events-none absolute inset-y-0 end-0 z-20 flex hidden items-center pr-1">
        <button type="button" class="inline-flex size-6 shrink-0 items-center justify-center rounded-full text-gray-500 hover:text-blue-600 focus:text-blue-600 focus:outline-none" aria-label="Close">
          <span class="sr-only">Close</span>
          <svg class="size-4 shrink-0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <path d="m15 9-6 6" />
            <path d="m9 9 6 6" />
          </svg>
        </button>
      </div>
    </div>
    <!-- End Input -->

    <!-- Body -->
    <div class="overflow-hidden">
      <!-- List Group -->
      <div :class="{'mb-4 border-b': searchQuery.trim().length > 0, 'pb-4 last:mb-0 last:border-0 last:pb-0': true}" class="border-stone-200 border-b last:mb-0 last:border-0 last:pb-0 p-4 shadow-sm">
        <span class="mb-2 block text-xs text-stone-500"> Filters </span>

        <div class="flex flex-wrap gap-1 sm:gap-2">
          <!-- Loop through filterItems -->
          <template x-for="(filter, index) in filterItems" :key="index">
            <a 
              :class="selectedFilters.includes(filter) ? 'bg-stone-200 text-stone-900' : ''" 
              class="inline-flex items-center gap-x-1.5 rounded-full border border-stone-200 px-2.5 py-1.5 text-xs text-stone-800 hover:bg-stone-200 focus:outline-none cursor-pointer" 
              href="#" 
              @click.prevent="selectedFilters.includes(filter) ? selectedFilters = selectedFilters.filter(f => f !== filter) : selectedFilters.push(filter)"
            >
              <span x-text="filter"></span>
            </a>
          </template>
        </div>
      </div>

      <div x-show="searchQuery.trim().length > 0" class="overflow-hidden overflow-y-auto max-h-98 mb-4 border-b pb-4 last:mb-0 last:border-0 last:pb-0 px-4 pt-2" style="max-height: 33rem;">
        <span class="mb-2 block text-xs text-stone-500 dark:text-neutral-500">Results </span>

        <!-- List Group -->
        <ul>
          <!-- Loop through results that have 'learning' in title or description -->
          <template x-for="(result, index) in results.filter(r => (r.title.toLowerCase().includes('learning') || r.description.toLowerCase().includes('learning')))" :key="result.id">
            <li class="py-3 flex items-center border-t border-gray-200 cursor-pointer group hover:bg-gray-200" :class="{ 'border-t': index !== 0 }">
              <!-- Icon based on type -->
              <span class="mr-3">
                <img :src="iconMapping[result.type]" class="w-10 h-10" alt="Live Stream">
              </span>
    
              <!-- Result content with highlighted 'learning' -->
              <div>
                <p class="truncate">
                  <a class="truncate font-semibold text-sm text-gray-800 hover:text-blue-600 decoration-2 hover:underline focus:outline-none focus:underline" href="#">
                    <span x-html="highlight(result.title)"></span>
                  </a>
                </p>
                <p class="text-sm text-gray-500" x-html="highlight(result.description)"></p>
                <span class="mt-2 py-0.5 px-2 inline-flex items-center gap-x-1.5 bg-white border border-gray-200 text-gray-800 text-xs rounded-lg group-hover:bg-white" x-show="result.tags">
                  <!-- SVG Icon -->
                  <svg class="shrink-0 size-3 text-sm text-gray-800" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path>
                    <circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle>
                  </svg>
                  <span class="mb-0.5" x-html="highlight(result.tags)"></span>
                </span> 
              </div>
            </li>
          </template>
        </ul>
        <!-- End List Group -->
      </div>
    </div>
    <!-- End Body -->
    <!-- Footer -->
    <div class="flex flex-wrap items-center justify-between gap-2 border-t border-stone-200 p-4">
      <div class="inline-flex items-center gap-x-2">
        <div class="flex size-5 flex-col items-center justify-center rounded border border-stone-200 bg-white text-xs uppercase text-stone-400 shadow-sm">
          <svg class="size-3 shrink-0 text-stone-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 10 4 15 9 20" />
            <path d="M20 4v7a4 4 0 0 1-4 4H4" />
          </svg>
        </div>
        <span class="text-xs text-stone-400"> to close </span>
      </div>

      <div class="inline-flex items-center gap-x-4">
        <div class="inline-flex items-center gap-x-2">
          <div class="flex size-5 flex-col items-center justify-center rounded border border-stone-200 bg-white text-xs uppercase text-stone-400 shadow-sm">
            <svg class="size-3.5 shrink-0 text-stone-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M22 14.596C21.828 15.1189 20.888 16 19.5969 16C18.3057 16 16.9265 14.6624 16.9265 12.8974V12.0687C16.9265 10.2373 18.2022 9.00142 19.5969 9.00142C20.9918 9.00142 21.7942 9.69876 22 10.5666M14.5417 10.3109C14.3233 9.6198 13.3292 8.96537 12.1831 9.00142C11.0374 9.03732 10.0119 9.83333 10.0119 10.777C10.0119 11.7208 10.6901 12.0632 12.1839 12.2081C13.6774 12.353 14.49 13.1331 14.5417 13.9596C14.5934 14.7861 13.8083 16 12.1839 16C10.7604 16 9.69525 14.6894 9.63548 13.9379M7.25295 14.7213C6.82726 15.5884 5.94455 15.9999 4.75814 15.9999C3.57172 15.9999 2 15.088 2 12.7831V12.1113C2 10.5911 3.16477 9.00113 4.75814 9.00113C6.35166 9.00113 7.41158 10.5059 7.25295 12.2838H2.47754" /></svg>
          </div>
          <span class="text-xs text-stone-400"> to select </span>
        </div>

        <div class="inline-flex items-center gap-x-2">
          <div class="flex size-5 flex-col items-center justify-center rounded border border-stone-200 bg-white text-xs uppercase text-stone-400 shadow-sm">
            <svg class="size-3 shrink-0 text-stone-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 5v14" />
              <path d="m19 12-7 7-7-7" />
            </svg>
          </div>
          <div class="flex size-5 flex-col items-center justify-center rounded border border-stone-200 bg-white text-xs uppercase text-stone-400 shadow-sm">
            <svg class="size-3 shrink-0 text-stone-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m5 12 7-7 7 7" />
              <path d="M12 19V5" />
            </svg>
          </div>
          <span class="text-xs text-stone-400"> to navigate </span>
        </div>
      </div>
    </div>
    <!-- End Footer -->
  </div>
</div>
</div>
</div>
          <button type="button"
            class="bg-white p-1 mr-2 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
            <span class="sr-only">View notifications</span>
            <!-- Heroicon name: outline/bell -->
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
            </svg>
          </button>

          <!-- Profile dropdown -->
          <div @keydown.escape.stop="open = false;" @click.away="open=false" class="ml-3 relative">
            <div>
              <button type="button" @click="open=true"
                class="bg-white flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                id="user-menu-button" aria-expanded="false" aria-haspopup="true">
                <span class="sr-only">Open user menu</span>
                <img class="h-8 w-8 rounded-full"
                  src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                  alt="">
              </button>
            </div>
            
            <!--
            Dropdown menu, show/hide based on menu state.

            Entering: "transition ease-out duration-200"
              From: "transform opacity-0 scale-95"
              To: "transform opacity-100 scale-100"
            Leaving: "transition ease-in duration-75"
              From: "transform opacity-100 scale-100"
              To: "transform opacity-0 scale-95"
          -->
            <div x-show="open" x-transition:enter="transition ease-out duration-200"
              x-transition:enter-start="transform opacity-0 scale-95"
              x-transition:enter-end="transform opacity-100 scale-100"
              x-transition:leave="transition ease-in duration-75"
              x-transition:leave-start="transform opacity-100 scale-100"
              x-transition:leave-end="transform opacity-0 scale-95"
              class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"
              role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">
              <!-- Active: "bg-gray-100", Not Active: "" -->
              <a href="#" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="-1"
                id="user-menu-item-0">Your Profile</a>

              <a href="#" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="-1"
                id="user-menu-item-1">Settings</a>

              <a href="#" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="-1"
                id="user-menu-item-2">Sign out</a>
            </div>
          </div>
        </div>
        <div x-data="globalSearch()" x-init="watchSearchOpen" @keydown.escape.stop="open = false;" @click.away="open=false" class="space-x-2 flex lg:hidden items-center">
          <!-- Mobile menu button -->
          <button type="button" @click="search_open = true" 
            class="bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            aria-controls="mobile-menu" aria-expanded="false">
            <span class="sr-only">Global search</span>
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path>
            </svg>
          </button>  
          <div x-cloak x-show="search_open" @keydown.window.escape="search_open = false" class="relative z-50" aria-labelledby="modal-title" role="dialog" aria-modal="true">
  <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
    x-transition:enter="ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0">
  </div>

  <div class="fixed inset-0 z-10">
    <div class="m-3 flex h-[calc(100%-3.5rem)] min-h-[calc(100%-3.5rem)] items-center transition-all ease-out sm:mx-auto sm:w-full sm:max-w-lg">
<div @click.away="search_open = false;" class="relative transform overflow-hidden rounded-lg bg-white  text-left shadow-xl transition-all sm:my-8 sm:w-full">
    <!-- Input -->
    <div class="relative">
      <div class="pointer-events-none absolute inset-y-0 start-0 z-20 flex items-center pl-3">
        <svg class="w-4 h-4 shrink-0 text-stone-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.3-4.3" />
        </svg>
      </div>
      <input x-model="searchQuery" type="text" value="Refund" class="block w-full rounded-t-lg border-transparent border-b-stone-200 bg-white py-3 pl-10 pr-8 text-sm placeholder:text-stone-500 focus:border-transparent focus:border-b-stone-200 focus:outline-none focus:ring-0 disabled:pointer-events-none disabled:opacity-50" placeholder="Search or type a command" autofocus />
      <div class="pointer-events-none absolute inset-y-0 end-0 z-20 flex hidden items-center pr-1">
        <button type="button" class="inline-flex size-6 shrink-0 items-center justify-center rounded-full text-gray-500 hover:text-blue-600 focus:text-blue-600 focus:outline-none" aria-label="Close">
          <span class="sr-only">Close</span>
          <svg class="size-4 shrink-0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <path d="m15 9-6 6" />
            <path d="m9 9 6 6" />
          </svg>
        </button>
      </div>
    </div>
    <!-- End Input -->

    <!-- Body -->
    <div class="overflow-hidden">
      <!-- List Group -->
      <div :class="{'mb-4 border-b': searchQuery.trim().length > 0, 'pb-4 last:mb-0 last:border-0 last:pb-0': true}" class="border-stone-200 border-b last:mb-0 last:border-0 last:pb-0 p-4 shadow-sm">
        <span class="mb-2 block text-xs text-stone-500"> Filters </span>

        <div class="flex flex-wrap gap-1 sm:gap-2">
          <!-- Loop through filterItems -->
          <template x-for="(filter, index) in filterItems" :key="index">
            <a 
              :class="selectedFilters.includes(filter) ? 'bg-stone-200 text-stone-900' : ''" 
              class="inline-flex items-center gap-x-1.5 rounded-full border border-stone-200 px-2.5 py-1.5 text-xs text-stone-800 hover:bg-stone-200 focus:outline-none cursor-pointer" 
              href="#" 
              @click.prevent="selectedFilters.includes(filter) ? selectedFilters = selectedFilters.filter(f => f !== filter) : selectedFilters.push(filter)"
            >
              <span x-text="filter"></span>
            </a>
          </template>
        </div>
      </div>

      <div x-show="searchQuery.trim().length > 0" class="overflow-hidden overflow-y-auto max-h-98 mb-4 border-b pb-4 last:mb-0 last:border-0 last:pb-0 px-4 pt-2" style="max-height: 33rem;">
        <span class="mb-2 block text-xs text-stone-500 dark:text-neutral-500">Results </span>

        <!-- List Group -->
        <ul>
          <!-- Loop through results that have 'learning' in title or description -->
          <template x-for="(result, index) in results.filter(r => (r.title.toLowerCase().includes('learning') || r.description.toLowerCase().includes('learning')))" :key="result.id">
            <li class="py-3 flex items-center border-t border-gray-200 cursor-pointer group hover:bg-gray-200" :class="{ 'border-t': index !== 0 }">
              <!-- Icon based on type -->
              <span class="mr-3">
                <img :src="iconMapping[result.type]" class="w-10 h-10" alt="Live Stream">
              </span>
    
              <!-- Result content with highlighted 'learning' -->
              <div>
                <p class="truncate">
                  <a class="truncate font-semibold text-sm text-gray-800 hover:text-blue-600 decoration-2 hover:underline focus:outline-none focus:underline" href="#">
                    <span x-html="highlight(result.title)"></span>
                  </a>
                </p>
                <p class="text-sm text-gray-500" x-html="highlight(result.description)"></p>
                <span class="mt-2 py-0.5 px-2 inline-flex items-center gap-x-1.5 bg-white border border-gray-200 text-gray-800 text-xs rounded-lg group-hover:bg-white" x-show="result.tags">
                  <!-- SVG Icon -->
                  <svg class="shrink-0 size-3 text-sm text-gray-800" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path>
                    <circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle>
                  </svg>
                  <span class="mb-0.5" x-html="highlight(result.tags)"></span>
                </span> 
              </div>
            </li>
          </template>
        </ul>
        <!-- End List Group -->
      </div>
    </div>
    <!-- End Body -->
    <!-- Footer -->
    <div class="flex flex-wrap items-center justify-between gap-2 border-t border-stone-200 p-4">
      <div class="inline-flex items-center gap-x-2">
        <div class="flex size-5 flex-col items-center justify-center rounded border border-stone-200 bg-white text-xs uppercase text-stone-400 shadow-sm">
          <svg class="size-3 shrink-0 text-stone-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 10 4 15 9 20" />
            <path d="M20 4v7a4 4 0 0 1-4 4H4" />
          </svg>
        </div>
        <span class="text-xs text-stone-400"> to close </span>
      </div>

      <div class="inline-flex items-center gap-x-4">
        <div class="inline-flex items-center gap-x-2">
          <div class="flex size-5 flex-col items-center justify-center rounded border border-stone-200 bg-white text-xs uppercase text-stone-400 shadow-sm">
            <svg class="size-3.5 shrink-0 text-stone-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M22 14.596C21.828 15.1189 20.888 16 19.5969 16C18.3057 16 16.9265 14.6624 16.9265 12.8974V12.0687C16.9265 10.2373 18.2022 9.00142 19.5969 9.00142C20.9918 9.00142 21.7942 9.69876 22 10.5666M14.5417 10.3109C14.3233 9.6198 13.3292 8.96537 12.1831 9.00142C11.0374 9.03732 10.0119 9.83333 10.0119 10.777C10.0119 11.7208 10.6901 12.0632 12.1839 12.2081C13.6774 12.353 14.49 13.1331 14.5417 13.9596C14.5934 14.7861 13.8083 16 12.1839 16C10.7604 16 9.69525 14.6894 9.63548 13.9379M7.25295 14.7213C6.82726 15.5884 5.94455 15.9999 4.75814 15.9999C3.57172 15.9999 2 15.088 2 12.7831V12.1113C2 10.5911 3.16477 9.00113 4.75814 9.00113C6.35166 9.00113 7.41158 10.5059 7.25295 12.2838H2.47754" /></svg>
          </div>
          <span class="text-xs text-stone-400"> to select </span>
        </div>

        <div class="inline-flex items-center gap-x-2">
          <div class="flex size-5 flex-col items-center justify-center rounded border border-stone-200 bg-white text-xs uppercase text-stone-400 shadow-sm">
            <svg class="size-3 shrink-0 text-stone-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 5v14" />
              <path d="m19 12-7 7-7-7" />
            </svg>
          </div>
          <div class="flex size-5 flex-col items-center justify-center rounded border border-stone-200 bg-white text-xs uppercase text-stone-400 shadow-sm">
            <svg class="size-3 shrink-0 text-stone-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m5 12 7-7 7 7" />
              <path d="M12 19V5" />
            </svg>
          </div>
          <span class="text-xs text-stone-400"> to navigate </span>
        </div>
      </div>
    </div>
    <!-- End Footer -->
  </div>
</div>
</div>
</div>      
          <button type="button" @click="open=!open"
            class="bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            aria-controls="mobile-menu" aria-expanded="false">
            <span class="sr-only">Open main menu</span>
            <!--
            Heroicon name: outline/menu

            Menu open: "hidden", Menu closed: "block"
          -->
            <svg :class="{ 'hidden': open, 'block': !open }" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg"
              fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <!--
            Heroicon name: outline/x

            Menu open: "block", Menu closed: "hidden"
          -->
            <svg :class="{ 'hidden': !open, 'block': open }" class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg"
              fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile menu, show/hide based on menu state. -->
    <div x-show="open" class="lg:hidden" id="mobile-menu">
      <div class="pt-2 pb-3 space-y-1">
        <!-- Current: "bg-indigo-50 border-indigo-500 text-indigo-700", Default: "border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800" -->
        <a href="#"
          class="bg-indigo-50 border-indigo-500 text-indigo-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium"
          aria-current="page">Courses</a>

        <a href="#"
          class="border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Exams</a>

        <a href="#"
          class="border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Videos</a>

        <a href="#"
          class="border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Students</a>
      </div>
      <div class="pt-4 pb-3 border-t border-gray-200">
        <div class="flex items-center px-4">
          <div class="flex-shrink-0">
            <img class="h-10 w-10 rounded-full"
              src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
              alt="">
          </div>
          <div class="ml-3">
            <div class="text-base font-medium text-gray-800">Tom Cook</div>
            <div class="text-sm font-medium text-gray-500">tom@example.com</div>
          </div>
          <button type="button"
            class="ml-auto bg-white flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
            <span class="sr-only">View notifications</span>
            <!-- Heroicon name: outline/bell -->
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
            </svg>
          </button>
        </div>
        <div class="mt-3 space-y-1">
          <a href="#"
            class="block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100">Your
            Profile</a>

          <a href="#"
            class="block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100">Settings</a>

          <a href="#"
            class="block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100">Sign
            out</a>
        </div>
      </div>
    </div>
  </nav>
  <script>
    function globalSearch() {
      return {
        search_open: false, 
        searchQuery: '',
        selectedFilters: [],
        filterItems: ['Course', 'Chapter', 'Video', 'Exam', 'Post', 'Notes', 'Live stream', 'Attachment', 'Discussion', 'Store'],
        results: [
          { id: 1, title: 'Introduction to Machine Learning', description: 'A course on machine learning concepts.', type: 'course', tags:'programming' },
          { id: 2, title: 'Supervised Learning Basics', description: 'Chapter covering supervised learning algorithms.', type: 'chapter', tags:'programming' },
          { id: 3, title: 'Neural Networks learning', description: 'A video explaining the basics of neural networks.', type: 'video' },
          { id: 4, title: 'Machine Learning Final Exam', description: 'Final exam for the machine learning course.', type: 'exam' },
          { id: 5, title: 'Python for Data Science learning', description: 'Notes on Python for data science.', type: 'notes' },
          { id: 6, title: 'Live Stream: ML Workshop', description: 'Join our live stream learning on ML workshop.', type: 'live_stream' },
          { id: 7, title: 'Video Conference: ML Q&A', description: 'A video conference to learning answer ML questions.', type: 'video_conference' },
          { id: 8, title: 'Testpress Post', description: 'Learning post is good.', type: 'post' },
          { id: 9, title: 'ML learning Group', description: 'Join the ML discussion forum.', type: 'discussion' },
          { id: 10, title: 'CAT test series learning', description: 'All the available mock tests for practice', type: 'store' },
        ],
        iconMapping: {
          'course': 'https://static.testpress.in/static/courses/general/1442850373_115.png', 
          'chapter': 'https://static.testpress.in/static/courses/general/1442850373_115.png', 
          'video': 'https://static.testpress.in/static/img/videoicon.png', 
          'exam': 'https://static.testpress.in/static/img/examicon.png',
          'notes': 'https://static.testpress.in/static/img/bookicon.png', 
          'attachment': 'https://static.testpress.in/static/img/fileicon.png', 
          'video_conference': 'https://static.testpress.in/static/img/live_conference.png', 
          'live_stream': 'https://static.testpress.in/static/img/live.png', 
          'post': 'https://static.testpress.in/static/img/posts.svg',
          'discussion': 'https://static.testpress.in/static/img/discussion.png', 
          'store': 'https://static.testpress.in/static/img/market.svg',        
        },
  
        highlight(text) {
          const query = this.searchQuery.toLowerCase();
          if (!query || query.length === 0) return text;
          return text.replace(new RegExp(query, 'gi'), (match) => `<span class='bg-yellow-200'>${match}</span>`);
        },
  
        toggleScrollLock(open) {
          if (open) {
            document.body.classList.add('overflow-hidden');
          } else {
            document.body.classList.remove('overflow-hidden');
          }
        },
  
        watchSearchOpen() {
          this.$watch('searchQuery', (value) => {
            if (value.trim().length > 0) {
              this.toggleScrollLock(true);
            } else {
              this.toggleScrollLock(false);
            }
          });
        }
      };
    }
  </script>
      
<div class="max-w-7xl mx-auto xl:px-8 py-8 lg:grid lg:grid-cols-12 lg:gap-x-5">
    <div class="lg:px-0 lg:col-span-9 px-4">
      <div class="flex flex-wrap justify-between items-center gap-2">
  <div>
    <h1 class="text-lg md:text-xl font-semibold text-gray-800">Create Recurring Class</h1>
    <p class="text-sm text-gray-500">Set up a new series of recurring classes.</p>
  </div>
</div>
      <form method="POST" class="mt-4 space-y-6" x-data="recurringClassData()">

  <div class="mb-6">
  <nav aria-label="Progress">
    <ol role="list" class="flex items-center">
      <li class="relative">
        <div class="flex items-center">
          <div :class="currentStep >= 1 ? 'bg-emerald-600 text-white' : 'bg-gray-200 text-gray-500'"
            class="flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium">
            1
          </div>
          <span :class="currentStep >= 1 ? 'text-emerald-600 font-medium' : 'text-gray-500'" class="ml-3 text-sm">Create
            Series</span>
        </div>
      </li>
      <li class="relative ml-8">
        <div class="flex items-center">
          <div :class="currentStep >= 2 ? 'bg-emerald-600 text-white' : 'bg-gray-200 text-gray-500'"
            class="flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium">
            2
          </div>
          <span :class="currentStep >= 2 ? 'text-emerald-600 font-medium' : 'text-gray-500'"
            class="ml-3 text-sm">Preview & Confirm</span>
        </div>
      </li>
    </ol>
  </nav>
</div>

  <div x-show="currentStep === 1" x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0 transform translate-x-4"
    x-transition:enter-end="opacity-100 transform translate-x-0" class="space-y-6">

    <div class="bg-white shadow-sm border border-gray-200 rounded-lg">
  <div class="py-3 px-5 flex justify-between items-center gap-x-5 border-b border-gray-200">
    <h2 class="text-lg font-medium text-gray-900">Basic Information</h2>
  </div>
  <div class="p-5 space-y-6">
    <div class="grid grid-cols-1 gap-6">
      <div>
        <label for="title" class="block text-sm font-medium leading-6 text-gray-900">
          Title
        </label>
        <div class="mt-2">
          <input type="text" name="title" id="title" x-ref="titleInput" required placeholder="Enter class title..."
            value="Weekly Mathematics Class"
            class="block w-full rounded-md border-0 py-2 px-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:text-sm sm:leading-6" />
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium leading-6 text-gray-900 mb-1">
          Append to Title
        </label>
        <p class="text-sm text-gray-600 mb-3">Choose how to label each class session.</p>

        <div class="space-y-3">
          <div class="flex items-start">
            <input id="suffix_number" name="suffix_type" type="radio" value="number" x-model="suffixType"
              class="mt-1 h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300">
            <div class="ml-3">
              <label for="suffix_number" class="block text-sm font-medium leading-6 text-gray-900">Number</label>
              <p class="block text-sm text-gray-600">Adds sequential numbers to class titles ( "Weekly Mathematics Class 1" )</p>
            </div>
          </div>

          <div class="flex items-start">
            <input id="suffix_date" name="suffix_type" type="radio" value="date" x-model="suffixType"
              class="mt-1 h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300">
            <div class="ml-3">
              <label for="suffix_date" class="block text-sm font-medium leading-6 text-gray-900">Date</label>
              <p class="block text-sm text-gray-600">Adds the class date to titles ( "Weekly Mathematics Class on 05.26.2025" )</p>
            </div>
          </div>

          <div class="flex items-start">
            <input id="suffix_both" name="suffix_type" type="radio" value="both" x-model="suffixType"
              class="mt-1 h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300">
            <div class="ml-3">
              <label for="suffix_both" class="block text-sm font-medium leading-6 text-gray-900">Both Number and Date</label>
              <p class="block text-sm text-gray-600">Combines sequential numbering with dates ( "Weekly Mathematics Class 1 on 05.26.2025" )</p>
            </div>
          </div>
        </div>
      </div>

      <div>
        <label for="description" class="block text-sm font-medium leading-6 text-gray-900">Description</label>
        <div class="mt-2">
          <textarea name="description" id="description" rows="3"
            class="block w-full rounded-md border-0 py-2 px-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:text-sm sm:leading-6"></textarea>
        </div>
      </div>

      <div class="grid grid-cols-6 gap-6">
        <div class="col-span-6 sm:col-span-3">
          <label for="start_datetime" class="block text-sm font-medium leading-6 text-gray-900">Start Date & Time</label>
          <div class="mt-2">
            <div
              class="flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-emerald-500 sm:max-w-md">
              <input type="text" name="start_datetime" id="start_datetime" x-ref="startDateTimeInput"
                class="block flex-1 border-0 bg-transparent py-1.5 pl-3 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6" />
            </div>
          </div>
        </div>
        <div class="col-span-6 sm:col-span-3">
          <label for="duration" class="block text-sm font-medium leading-6 text-gray-900">Duration (In Minutes)</label>
          <div class="mt-2">
            <div
              class="flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-emerald-500 sm:max-w-md">
              <input type="number" name="duration" id="duration" x-ref="durationInput" value="60" min="1" max="480"
                class="block flex-1 border-0 bg-transparent py-1.5 pl-3 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6" />
            </div>
          </div>
        </div>
      </div>

      <div>
        <label for="host" class="block text-sm font-medium leading-6 text-gray-900">Host</label>
        <div class="mt-2">
          <div class="relative">
            <select name="host" id="host" x-ref="hostInput"
              data-hs-select='{
                "hasSearch": true,
                "searchPlaceholder": "Search Host",
                "searchClasses": "block w-full sm:text-sm border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-emerald-500 py-1.5 sm:py-2 px-3",
                "searchWrapperClasses": "bg-white p-2 -mx-1 sticky top-0",
                "toggleTag": "<button type=\"button\" aria-expanded=\"false\"><span data-icon></span><span class=\"text-gray-800\" data-title></span></button>",
                "toggleClasses": "hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50 relative py-1.5 sm:py-2 ps-3 pe-9 flex gap-x-2 text-nowrap w-full cursor-pointer bg-white border border-gray-200 rounded-lg text-start sm:text-sm focus:outline-hidden focus:ring-2 focus:ring-emerald-500",
                "dropdownClasses": "max-h-64 p-1 pt-0 space-y-0.5 z-50 w-full overflow-hidden overflow-y-auto bg-white rounded-xl shadow-xl [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300",
                "optionClasses": "hs-selected:bg-gray-100 py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-lg focus:outline-hidden focus:bg-gray-100",
                "optionTemplate": "<div><div class=\"flex items-center\"><div class=\"me-2\" data-icon></div><div class=\"text-gray-800\" data-title></div></div></div>",
                "preventSearchFocus": false
              }' class="hidden">
              <option value="">Choose</option>
              <option value="staff1">Staff 1</option>
              <option value="staff2">Staff 2</option>
            </select>
            <div class="absolute top-1/2 end-2.5 -translate-y-1/2">
              <svg class="shrink-0 size-3.5 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/></svg>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
    <!-- SECTION 2 - Schedule Configuration -->
<div class="bg-white shadow-sm border border-gray-200 rounded-lg">
  <div class="py-3 px-5 flex justify-between items-center gap-x-5 border-b border-gray-200">
    <h2 class="text-lg font-medium text-gray-900">Recurrence Schedule</h2>
  </div>
  <div class="p-5 space-y-6">
    <div>
      <div class="grid grid-cols-1 sm:grid-cols-6 sm:gap-6 gap-3">
        <div class="sm:col-span-2 sm:col-start-1">
          <label for="recurrence_type" class="block text-sm font-medium leading-6 text-gray-900">Recurrence</label>
          <div class="mt-2 relative">
            <select id="recurrence_type" name="recurrence" x-model="recurrence"
              data-hs-select='{
                "toggleTag": "<button type=\"button\" aria-expanded=\"false\"><div data-icon></div></button>",
                "toggleClasses": "hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50 relative py-2 px-3 pe-7 flex items-center gap-x-2 text-nowrap w-full cursor-pointer bg-white border border-gray-200 rounded-lg text-start text-sm text-gray-800 hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500",
                "dropdownClasses": "end-0 w-full min-w-45 max-h-72 p-1 space-y-0.5 z-50 w-full overflow-hidden overflow-y-auto bg-white rounded-xl shadow-xl [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300",
                "optionClasses": "hs-selected:bg-gray-100 py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-lg focus:outline-hidden focus:bg-gray-100",
                "optionTemplate": "<div><div class=\"flex items-center gap-x-2\"><div data-icon></div><div class=\"text-gray-800 \" data-title></div><span class=\"hidden hs-selected:block ms-auto\"><svg class=\"shrink-0 size-3.5 text-gray-800 \" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg></span></div></div>"}'
              class="hidden">
              <option value="1">Daily</option>
              <option value="2">Weekly</option>
              <option value="3">Monthly</option>
            </select>
            <div class="absolute top-1/2 end-2.5 -translate-y-1/2">
              <svg class="shrink-0 size-3.5 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/></svg>
            </div>
          </div>
        </div>

        <div class="sm:col-span-2">
          <label for="repeat_interval" class="block text-sm font-medium leading-6 text-gray-900">Repeat every</label>
          <div class="mt-2 flex items-center gap-x-2 relative">
            <div class="relative w-32">
              <select id="repeat_interval" name="repeat_interval" x-model="watermarkType"
                data-hs-select='{
                "toggleTag": "<button type=\"button\" aria-expanded=\"false\"><div data-icon></div></button>",
                "toggleClasses": "hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50 relative py-2 px-3 pe-7 flex items-center gap-x-2 text-nowrap w-full cursor-pointer bg-white border border-gray-200 rounded-lg text-start text-sm text-gray-800 hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500",
                "dropdownClasses": "end-0 w-full min-w-45 max-h-72 p-1 space-y-0.5 z-50 w-full overflow-hidden overflow-y-auto bg-white rounded-xl shadow-xl [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300",
                "optionClasses": "hs-selected:bg-gray-100 py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-lg focus:outline-hidden focus:bg-gray-100",
                "optionTemplate": "<div><div class=\"flex items-center gap-x-2\"><div data-icon></div><div class=\"text-gray-800 \" data-title></div><span class=\"hidden hs-selected:block ms-auto\"><svg class=\"shrink-0 size-3.5 text-gray-800 \" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg></span></div></div>"}'
                class="hidden">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
              </select>
              <div class="absolute top-1/2 end-2.5 -translate-y-1/2">
                <svg class="shrink-0 size-3.5 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/></svg>
              </div>
            </div>
            <span x-text="recurrence === '1' ? 'day(s)' : recurrence === '2' ? 'week(s)' : 'month(s)'"
              class="text-sm text-gray-500 whitespace-nowrap"></span>
          </div>
        </div>
      </div>
    </div>

    <!-- Weekly Schedule - Days of Week -->
    <div x-cloak x-show="recurrence=='2'">
      <label class="block text-sm font-medium leading-6 text-gray-900">Occurs on</label>
      <div class="flex flex-wrap gap-2 mt-2">
        <template x-for="(day, index) in [
          {id: 'day-1', value: '1', label: 'Mon'},
          {id: 'day-2', value: '2', label: 'Tue'},
          {id: 'day-3', value: '3', label: 'Wed'},
          {id: 'day-4', value: '4', label: 'Thu'},
          {id: 'day-5', value: '5', label: 'Fri'},
          {id: 'day-6', value: '6', label: 'Sat'},
          {id: 'day-0', value: '0', label: 'Sun'}
        ]" :key="day.id">
          <label :for="day.id"
            class="py-1 px-2.5 relative flex justify-center items-center text-center text-[13px] bg-white border border-gray-200 ring-1 ring-transparent text-gray-800 cursor-pointer rounded-xl hover:border-emerald-600 hover:ring-emerald-600 has-[:checked]:bg-emerald-100 has-[:checked]:border-emerald-200 has-[:checked]:ring-emerald-200 has-[:checked]:text-emerald-800 has-[:disabled]:pointer-events-none has-[:disabled]:text-gray-200">
            <input type="checkbox" :id="day.id" :value="day.value" class="hidden peer" name="days[]" />
            <span
              class="flex shrink-0 justify-center items-center size-0 bg-emerald-500 text-transparent rounded-full transition-all duration-200 peer-checked:size-4 peer-checked:me-1.5 peer-checked:text-white">
              <svg class="shrink-0 size-2.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M20 6 9 17l-5-5" />
              </svg>
            </span>
            <span class="block" x-text="day.label"></span>
          </label>
        </template>
      </div>
    </div>

    <!-- Monthly Schedule Options -->
    <div x-cloak x-show="recurrence=='3'" x-data="{monthlyOccursOn: 'day'}">
      <label class="block text-sm font-medium leading-6 text-gray-900">Occurs on</label>
      <div class="mt-2 space-y-3">
        <!-- Option 1: Day of the month -->
        <div class="flex items-center gap-x-3">
          <input id="occurs-on-day" name="occurs_on" type="radio" value="day" x-model="monthlyOccursOn" checked="true"
            class="relative size-4 appearance-none rounded-full text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
          <label for="occurs-on-day" class="block text-sm/6 font-medium text-gray-500">
            <div class="flex items-center gap-x-2 relative">
              <span class="text-sm text-gray-500">Day</span>
              <div class="relative w-32">
                <select id="monthly_day" name="monthly_day"
                  data-hs-select='{
                  "toggleTag": "<button type=\"button\" aria-expanded=\"false\"><div data-icon></div></button>",
                "toggleClasses": "hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50 relative py-2 px-3 pe-7 flex items-center gap-x-2 text-nowrap w-full cursor-pointer bg-white border border-gray-200 rounded-lg text-start text-sm text-gray-800 hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500",
                  "dropdownClasses": "end-0 w-full min-w-45 max-h-72 p-1 space-y-0.5 z-50 w-full overflow-hidden overflow-y-auto bg-white rounded-xl shadow-xl [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300",
                  "optionClasses": "hs-selected:bg-gray-100 py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-lg focus:outline-hidden focus:bg-gray-100",
                  "optionTemplate": "<div><div class=\"flex items-center gap-x-2\"><div data-icon></div><div class=\"text-gray-800 \" data-title></div><span class=\"hidden hs-selected:block ms-auto\"><svg class=\"shrink-0 size-3.5 text-gray-800 \" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg></span></div></div>"}'
                  class="hidden text-sm text-gray-500 block w-full rounded-md border-0 py-1 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:max-w-xs sm:text-sm sm:leading-6">
                  <template x-for="i in Array.from({length: 31}, (_, i) => i + 1)" :key="i">
                    <option :value="i" x-text="i" :selected="i === 26"></option>
                  </template>
                </select>
                <div class="absolute top-1/2 end-2.5 -translate-y-1/2">
                  <svg class="shrink-0 size-3.5 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/></svg>
                </div>
              </div>
              <span class="text-sm text-gray-500 whitespace-nowrap">of the month</span>
            </div>
          </label>
        </div>

        <!-- Option 2: Week pattern (e.g., "Fourth Monday") -->
        <div class="flex items-center gap-x-3">
          <input id="occurs-on-week" name="occurs_on" type="radio" value="week" x-model="monthlyOccursOn"
            class="relative size-4 appearance-none rounded-full text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
          <label for="occurs-on-week" class="block text-sm/6 font-medium text-gray-500">
            <div class="flex items-center gap-x-2 relative">
              <div class="relative w-32">
                <select id="monthly_week_occurrence" name="monthly_week_occurrence"
                  data-hs-select='{
                  "toggleTag": "<button type=\"button\" aria-expanded=\"false\"><div data-icon></div></button>",
                "toggleClasses": "hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50 relative py-2 px-3 pe-7 flex items-center gap-x-2 text-nowrap w-full cursor-pointer bg-white border border-gray-200 rounded-lg text-start text-sm text-gray-800 hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500",
                  "dropdownClasses": "end-0 w-full min-w-45 max-h-72 p-1 space-y-0.5 z-50 w-full overflow-hidden overflow-y-auto bg-white rounded-xl shadow-xl [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300",
                  "optionClasses": "hs-selected:bg-gray-100 py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-lg focus:outline-hidden focus:bg-gray-100",
                  "optionTemplate": "<div><div class=\"flex items-center gap-x-2\"><div data-icon></div><div class=\"text-gray-800 \" data-title></div><span class=\"hidden hs-selected:block ms-auto\"><svg class=\"shrink-0 size-3.5 text-gray-800 \" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg></span></div></div>"}'
                  class="hidden text-sm text-gray-500 block w-full rounded-md border-0 py-1 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:max-w-xs sm:text-sm sm:leading-6">
                  <option value="1">First</option>
                  <option value="2">Second</option>
                  <option value="3">Third</option>
                  <option value="4" selected>Fourth</option>
                  <option value="-1">Last</option>
                </select>
                <div class="absolute top-1/2 end-2.5 -translate-y-1/2">
                  <svg class="shrink-0 size-3.5 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/></svg>
                </div>
              </div>
              <div class="relative w-32">
                <select id="monthly_week_day" name="monthly_week_day"
                  data-hs-select='{
                  "toggleTag": "<button type=\"button\" aria-expanded=\"false\"><div data-icon></div></button>",
                "toggleClasses": "hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50 relative py-2 px-3 pe-7 flex items-center gap-x-2 text-nowrap w-full cursor-pointer bg-white border border-gray-200 rounded-lg text-start text-sm text-gray-800 hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500",
                  "dropdownClasses": "end-0 w-full min-w-45 max-h-72 p-1 space-y-0.5 z-50 w-full overflow-hidden overflow-y-auto bg-white rounded-xl shadow-xl [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300",
                  "optionClasses": "hs-selected:bg-gray-100 py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-lg focus:outline-hidden focus:bg-gray-100",
                  "optionTemplate": "<div><div class=\"flex items-center gap-x-2\"><div data-icon></div><div class=\"text-gray-800 \" data-title></div><span class=\"hidden hs-selected:block ms-auto\"><svg class=\"shrink-0 size-3.5 text-gray-800 \" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg></span></div></div>"}'
                  class="hidden text-sm text-gray-500 block w-full rounded-md border-0 py-1 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:max-w-xs sm:text-sm sm:leading-6">
                  <option value="0">Sunday</option>
                  <option value="1" selected>Monday</option>
                  <option value="2">Tuesday</option>
                  <option value="3">Wednesday</option>
                  <option value="4">Thursday</option>
                  <option value="5">Friday</option>
                  <option value="6">Saturday</option>
                </select>
                <div class="absolute top-1/2 end-2.5 -translate-y-1/2">
                  <svg class="shrink-0 size-3.5 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/></svg>
                </div>
              </div>
              <span class="text-sm text-gray-500 whitespace-nowrap">of the month</span>
            </div>
          </label>
        </div>
      </div>
    </div>

    <!-- End Date Options -->
    <div>
      <label class="block text-sm font-medium leading-6 text-gray-900">End Date</label>
      <div class="mt-2 space-y-3">
        <div class="flex items-center gap-x-3">
          <input id="end-no-end" name="end_condition" type="radio" value="no_end" x-model="endCondition"
            class="relative size-4 appearance-none rounded-full text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
          <label for="end-no-end" class="block text-sm/6 font-medium text-gray-500">No End Date</label>
        </div>
        <div class="flex items-center gap-x-3">
          <input id="end-by-date" name="end_condition" type="radio" value="end_by_date" x-model="endCondition"
            class="relative size-4 appearance-none rounded-full text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
          <label for="end-by-date" class="block text-sm/6 font-medium text-gray-500">
            <div class="flex items-center gap-x-2">
              <span class="text-sm text-gray-500">By</span>
              <div
                class="flex rounded-md w-28 shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-emerald-500 sm:max-w-md">
                <input type="text" name="end_by_date" id="end_date" x-ref="endByDateInput"
                  class="text-sm text-gray-500 block w-full border-0 bg-transparent p-1 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6" />
              </div>
            </div>
          </label>
        </div>
        <div class="flex items-center gap-x-3">
          <input id="end-after" name="end_condition" type="radio" value="end_after" x-model="endCondition"
            class="relative size-4 appearance-none rounded-full text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
          <label for="end-after" class="block text-sm/6 font-medium text-gray-500">
            <div class="flex items-center gap-x-2 relative">
              <span class="text-sm text-gray-500">After</span>
              <div class="relative">
                <select id="end_after_count" x-ref="endAfterInput" name="end_after_count"
                  data-hs-select='{"placeholder": "Select count",
                  "toggleTag": "<button type=\"button\" aria-expanded=\"false\"><div data-icon></div></button>",
                "toggleClasses": "hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50 relative py-2 px-3 pe-7 flex items-center gap-x-2 text-nowrap w-full cursor-pointer bg-white border border-gray-200 rounded-lg text-start text-sm text-gray-800 hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500",
                  "dropdownClasses": "end-0 w-full min-w-45 max-h-72 p-1 space-y-0.5 z-50 w-full overflow-hidden overflow-y-auto bg-white rounded-xl shadow-xl [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300",
                  "optionClasses": "hs-selected:bg-gray-100 py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-lg focus:outline-hidden focus:bg-gray-100",
                  "optionTemplate": "<div><div class=\"flex items-center gap-x-2\"><div data-icon></div><div class=\"text-gray-800 \" data-title></div><span class=\"hidden hs-selected:block ms-auto\"><svg class=\"shrink-0 size-3.5 text-gray-800 \" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg></span></div></div>"}'
                  class="hidden text-sm text-gray-500 block w-full rounded-md border-0 py-1 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:max-w-xs sm:text-sm sm:leading-6">
                  
                  <option value="1">1</option>
                  
                  <option value="2">2</option>
                  
                  <option value="3">3</option>
                  
                  <option value="4">4</option>
                  
                  <option value="5">5</option>
                  
                  <option value="6">6</option>
                  
                  <option value="7">7</option>
                  
                  <option value="8">8</option>
                  
                  <option value="9">9</option>
                  
                  <option value="10">10</option>
                  
                  <option value="11">11</option>
                  
                  <option value="12">12</option>
                  
                  <option value="13">13</option>
                  
                  <option value="14">14</option>
                  
                  <option value="15">15</option>
                  
                  <option value="16">16</option>
                  
                  <option value="17">17</option>
                  
                  <option value="18">18</option>
                  
                  <option value="19">19</option>
                  
                  <option value="20">20</option>
                  
                  <option value="21">21</option>
                  
                  <option value="22">22</option>
                  
                  <option value="23">23</option>
                  
                  <option value="24">24</option>
                  
                  <option value="25">25</option>
                  
                  <option value="26">26</option>
                  
                  <option value="27">27</option>
                  
                  <option value="28">28</option>
                  
                  <option value="29">29</option>
                  
                  <option value="30">30</option>
                  
                  <option value="31">31</option>
                  
                  <option value="32">32</option>
                  
                  <option value="33">33</option>
                  
                  <option value="34">34</option>
                  
                  <option value="35">35</option>
                  
                  <option value="36">36</option>
                  
                  <option value="37">37</option>
                  
                  <option value="38">38</option>
                  
                  <option value="39">39</option>
                  
                  <option value="40">40</option>
                  
                  <option value="41">41</option>
                  
                  <option value="42">42</option>
                  
                  <option value="43">43</option>
                  
                  <option value="44">44</option>
                  
                  <option value="45">45</option>
                  
                  <option value="46">46</option>
                  
                  <option value="47">47</option>
                  
                  <option value="48">48</option>
                  
                  <option value="49">49</option>
                  
                  <option value="50">50</option>
                  
                  <option value="51">51</option>
                  
                  <option value="52">52</option>
                  
                  <option value="53">53</option>
                  
                  <option value="54">54</option>
                  
                  <option value="55">55</option>
                  
                  <option value="56">56</option>
                  
                  <option value="57">57</option>
                  
                  <option value="58">58</option>
                  
                  <option value="59">59</option>
                  
                </select>
                <div class="absolute top-1/2 end-2.5 -translate-y-1/2">
                  <svg class="shrink-0 size-3.5 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/></svg>
                </div>
              </div>
              <span class="text-sm text-gray-500">occurrences</span>
            </div>
          </label>
        </div>
      </div>
    </div>
  </div>
</div>
    <div class="bg-white shadow-sm border border-gray-200 rounded-lg">
  <div class="py-3 px-5 flex justify-between items-center gap-x-5 border-b border-gray-200">
    <button type="button" @click="advancedOpen = !advancedOpen"
      class="flex w-full items-center justify-between text-left">
      <h2 class="text-lg font-medium text-gray-900">Advanced Options</h2>
      <svg :class="{'rotate-180': advancedOpen}" class="h-5 w-5 text-gray-500 transition-transform duration-200"
        viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd"
          d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
          clip-rule="evenodd" />
      </svg>
    </button>
  </div>
  <div x-show="advancedOpen" x-transition class="px-6 py-6 space-y-6">
    <div class="space-y-4">
      <div class="flex gap-3">
        <div class="flex h-6 shrink-0 items-center">
          <div class="group grid size-4 grid-cols-1">
            <input id="show_recording" aria-describedby="show_recording-description" name="show_recording"
              type="checkbox"
              class="col-start-1 row-start-1 appearance-none rounded-sm text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white checked:border-emerald-600 checked:bg-emerald-600 indeterminate:border-emerald-600 indeterminate:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto" />
            <svg
              class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25"
              viewBox="0 0 14 14" fill="none">
              <path class="opacity-0 group-has-checked:opacity-100" d="M3 8L6 11L11 3.5" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"></path>
              <path class="opacity-0 group-has-indeterminate:opacity-100" d="M3 7H11" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </div>
        </div>
        <div class="text-sm/6">
          <label for="show_recording" class="block text-sm font-medium leading-6 text-gray-900">Show recorded video to users</label>
          <p id="show_recording-description" class="text-gray-500">Allow users to access the recorded video of the
            meeting after it ends.</p>
        </div>
      </div>

      <div class="flex gap-3">
        <div class="flex h-6 shrink-0 items-center">
          <div class="group grid size-4 grid-cols-1">
            <input id="allow_free_preview" aria-describedby="allow_free_preview-description" name="allow_free_preview"
              type="checkbox" checked
              class="col-start-1 row-start-1 appearance-none rounded-sm text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white checked:border-emerald-600 checked:bg-emerald-600 indeterminate:border-emerald-600 indeterminate:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto" />
            <svg
              class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25"
              viewBox="0 0 14 14" fill="none">
              <path class="opacity-0 group-has-checked:opacity-100" d="M3 8L6 11L11 3.5" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"></path>
              <path class="opacity-0 group-has-indeterminate:opacity-100" d="M3 7H11" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </div>
        </div>
        <div class="text-sm/6">
          <label for="allow_free_preview" class="block text-sm font-medium leading-6 text-gray-900">Allow free preview</label>
          <p id="allow_free_preview-description" class="text-gray-500">Provide users with a preview of the class content
            without requiring enrollment.</p>
        </div>
      </div>

      <div class="flex gap-3">
        <div class="flex h-6 shrink-0 items-center">
          <div class="group grid size-4 grid-cols-1">
            <input id="bypass_progressive_lock" aria-describedby="bypass_progressive_lock-description"
              name="bypass_progressive_lock" type="checkbox"
              class="col-start-1 row-start-1 appearance-none rounded-sm text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white checked:border-emerald-600 checked:bg-emerald-600 indeterminate:border-emerald-600 indeterminate:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto" />
            <svg
              class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25"
              viewBox="0 0 14 14" fill="none">
              <path class="opacity-0 group-has-checked:opacity-100" d="M3 8L6 11L11 3.5" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"></path>
              <path class="opacity-0 group-has-indeterminate:opacity-100" d="M3 7H11" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </div>
        </div>
        <div class="text-sm/6">
          <label for="bypass_progressive_lock" class="block text-sm font-medium leading-6 text-gray-900">Bypass progressive lock</label>
          <p id="bypass_progressive_lock-description" class="text-gray-500">Enabling this will allow user access to the
            next content irrespective of the progressive lock setting on the course.</p>
        </div>
      </div>
    </div>
  </div>
</div>

    <div class="flex items-center justify-end gap-x-4 pt-2">
      <button type="button"
        class="py-2 px-3 text-nowrap inline-flex justify-center items-center text-start whitespace-nowrap bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
        Cancel
      </button>
      <button type="button" @click="proceedToPreview()"
        class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-emerald-600 border border-emerald-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-red-300 dark:focus:ring-red-500">
        Preview Series
      </button>
    </div>
  </div>

  <div x-show="currentStep === 2" x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="opacity-0 transform translate-x-4"
  x-transition:enter-end="opacity-100 transform translate-x-0" class="space-y-6">

  <div class="bg-white shadow-sm border border-gray-200 rounded-lg">
    <div class="py-3 px-5 flex justify-between items-center gap-x-5 border-b border-gray-200">
      <h2 class="text-lg font-medium text-gray-900">Class Overview</h2>
    </div>
    <div class="p-5">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-4">
          <div>
            <dt class="block text-sm font-medium leading-6 text-gray-900">Title</dt>
            <dd class="mt-1 text-sm text-gray-500" x-text="formData.title || 'Untitled Class'"></dd>
          </div>
          <div>
            <dt class="block text-sm font-medium leading-6 text-gray-900">Duration</dt>
            <dd class="mt-1 text-sm text-gray-500" x-text="(formData.duration || '60') + ' minutes'"></dd>
          </div>
          <div>
            <dt class="block text-sm font-medium leading-6 text-gray-900">Host</dt>
            <dd class="mt-1 text-sm text-gray-500" x-text="formData.host === 'staff1' ? 'Staff 1' : 'Staff 2'"></dd>
          </div>
        </div>
        <div class="space-y-4">
          <div>
            <dt class="block text-sm font-medium leading-6 text-gray-900">Recurrence Pattern</dt>
            <dd class="mt-1 text-sm text-gray-500" x-text="recurrenceText"></dd>
          </div>
          <div>
            <dt class="block text-sm font-medium leading-6 text-gray-900">Start Date & Time</dt>
            <dd class="mt-1 text-sm text-gray-500"
              x-text="(formData.startDate || 'Not set') + ' at ' + (formData.startTime || 'Not set')"></dd>
          </div>
          <div x-show="recurrence === '2' && formData.selectedDays && formData.selectedDays.length > 0">
            <dt class="block text-sm font-medium leading-6 text-gray-900">Days of Week</dt>
            <dd class="mt-1 text-sm text-gray-500"
              x-text="formData.selectedDays ? formData.selectedDays.join(', ') : 'No days selected'"></dd>
          </div>
          <div x-show="recurrence === '3'">
            <dt class="block text-sm font-medium leading-6 text-gray-900">Monthly Pattern</dt>
            <dd class="mt-1 text-sm text-gray-500" x-text="
              formData.monthlyOccursOn === 'day' 
                ? 'Day ' + (formData.monthlyDay || '26') + ' of each month'
                : (() => {
                    const occurrences = {'1': 'First', '2': 'Second', '3': 'Third', '4': 'Fourth', '-1': 'Last'};
                    const days = {'0': 'Sunday', '1': 'Monday', '2': 'Tuesday', '3': 'Wednesday', '4': 'Thursday', '5': 'Friday', '6': 'Saturday'};
                    return (occurrences[formData.monthlyWeekOccurrence] || 'Fourth') + ' ' + (days[formData.monthlyWeekDay] || 'Monday') + ' of each month';
                  })()
            "></dd>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="bg-white shadow-sm border border-gray-200 rounded-lg">
    <div class="py-3 px-5 flex justify-between items-center gap-x-5 border-b border-gray-200">
      <h2 class="text-lg font-medium text-gray-900">Schedule Details</h2>
    </div>
    <div class="p-5">
      <div class="space-y-4">
        <div>
          <dt class="block text-sm font-medium leading-6 text-gray-900">End Condition</dt>
          <dd class="mt-1 text-sm text-gray-500" x-text="endConditionText"></dd>
        </div>
      </div>
    </div>
  </div>

  <div class="bg-white shadow-sm border border-gray-200 rounded-lg">
    <div class="py-3 px-5 flex justify-between items-center gap-x-5 border-b border-gray-200">
      <div class="flex items-center justify-between w-full">
        <div>
          <h2 class="text-lg font-medium text-gray-900">Upcoming Sessions Preview</h2>
        </div>
        <div class="text-right">
          <div class="text-sm font-medium text-gray-900"
            x-text="sessionPreview.length + (sessionPreview.length === 14 && (endCondition === 'no_end' || (endCondition === 'end_after' && parseInt(activeFormData.endAfterValue || '0') > 14)) ? '+' : '')">
          </div>
          <div class="text-xs text-gray-500">
            <span x-show="sessionPreview.length === 14 && endCondition === 'no_end'">
              More sessions are scheduled
            </span>
            <span
              x-show="sessionPreview.length === 14 && endCondition === 'end_after' && parseInt(activeFormData.endAfterValue || '0') > 14">+
              <span x-text="parseInt(activeFormData.endAfterValue || '0') - 14"></span> more sessions are
              scheduled</span>
            <span x-show="sessionPreview.length < 14 || endCondition === 'end_by_date'">Total sessions</span>
          </div>
        </div>
      </div>
    </div>
    <div class="p-5">
      <div x-show="sessionPreview.length > 0" class="space-y-3">
        <template x-for="session in sessionPreview" :key="session.number">
          <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg border transition-colors">
            <div class="flex items-center space-x-4">
              <div class="flex-shrink-0">
                <div
                  class="w-8 h-8 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center text-sm font-medium"
                  x-text="session.number"></div>
              </div>
              <div>
                <p class="text-sm font-medium text-gray-900" x-text="session.title || 'Session ' + session.number"></p>
                <p class="text-sm text-gray-500" x-text="session.date"></p>
              </div>
            </div>
            <div class="text-right">
              <div class="text-sm text-gray-500" x-text="session.time"></div>
              <div class="text-xs text-gray-400" x-text="(formData.duration || '60') + ' min'"></div>
            </div>
          </div>
        </template>
      </div>

      <div x-show="sessionPreview.length === 0" class="text-center py-8">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900">No sessions to display</h3>
        <p class="mt-1 text-sm text-gray-500">Complete the form to see your session preview</p>
      </div>

      <div x-show="endCondition === 'end_by_date' && activeFormData.endByDateValue && sessionPreview.length === 0"
        class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
        <div class="flex">
          <div class="flex-shrink-0">
            <svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd"
                d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                clip-rule="evenodd" />
            </svg>
          </div>
          <div class="ml-3">
            <h3 class="text-sm font-medium text-yellow-800">No sessions within date range</h3>
            <p class="mt-1 text-sm text-yellow-700">The selected end date may be too early. Please check your start
              date, end date, and recurrence pattern.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="flex items-end justify-end gap-x-4 pt-2">
    <button type="button" @click="goBackToForm()"
      class="py-2 px-3 text-nowrap inline-flex justify-center items-center text-start whitespace-nowrap bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
      ← Go Back & Edit
    </button>
    <button type="submit"
      class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-emerald-600 border border-emerald-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-red-300 dark:focus:ring-red-500">
      Confirm & Create Series
    </button>
  </div>
</div>

</form>
    </div>
</div>

    </div>

    
<script>
    function recurringClassData() {
        return {
            recurringMeeting: true,
            recurrence: '2',
            endCondition: 'no_end',
            advancedOpen: false,
            showPreview: false,
            currentStep: 1,
            formData: {},
            sessionPreview: [],
            suffixType: 'number',

            captureFormData() {
                const { startDate, startTime } = this.parseDateTime(this.$refs.startDateTimeInput?.value || '');

                this.formData = {
                    title: this.$refs.titleInput?.value || '',
                    suffixType: this.suffixType,
                    duration: this.$refs.durationInput?.value || '60',
                    startDate,
                    startTime,
                    selectedDays: this.getSelectedDays(),
                    endByDateValue: this.$refs.endByDateInput?.value || '',
                    endAfterValue: this.$refs.endAfterInput?.value || '',
                    host: this.$refs.hostInput?.value || 'staff1',
                    monthlyOccursOn: document.querySelector('input[name="occurs_on"]:checked')?.value || 'day',
                    monthlyDay: document.getElementById('monthly_day')?.value || '26',
                    monthlyWeekOccurrence: document.getElementById('monthly_week_occurrence')?.value || '4',
                    monthlyWeekDay: document.getElementById('monthly_week_day')?.value || '1',
                }
            },

            get formDataCurrent() {
                const { startDate, startTime } = this.parseDateTime(this.$refs.startDateTimeInput?.value || '');

                return {
                    title: this.$refs.titleInput?.value || '',
                    suffixType: this.suffixType,
                    duration: this.$refs.durationInput?.value || '60',
                    startDate,
                    startTime,
                    selectedDays: this.getSelectedDays(),
                    endByDateValue: this.$refs.endByDateInput?.value || '',
                    endAfterValue: this.$refs.endAfterInput?.value || '',
                    host: this.$refs.hostInput?.value || 'staff1',
                    monthlyOccursOn: document.querySelector('input[name="occurs_on"]:checked')?.value || 'day',
                    monthlyDay: document.getElementById('monthly_day')?.value || '26',
                    monthlyWeekOccurrence: document.getElementById('monthly_week_occurrence')?.value || '4',
                    monthlyWeekDay: document.getElementById('monthly_week_day')?.value || '1',
                }
            },

            get activeFormData() {
                return this.currentStep === 2 ? this.formData : this.formDataCurrent;
            },

            parseDateTime(dateTimeString) {
                let startDate = '';
                let startTime = '';

                if (dateTimeString) {
                    const parts = dateTimeString.split(' ');
                    if (parts.length >= 3) {
                        const datePart = parts[0];
                        const timePart = parts[1];
                        const ampm = parts[2];

                        if (datePart.includes('/')) {
                            const [day, month, year] = datePart.split('/');
                            startDate = `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
                        }

                        if (timePart && ampm) {
                            let [hours, minutes] = timePart.split(':');
                            hours = parseInt(hours);
                            if (ampm.toLowerCase().startsWith('p') && hours !== 12) {
                                hours += 12;
                            } else if (ampm.toLowerCase().startsWith('a') && hours === 12) {
                                hours = 0;
                            }
                            startTime = `${hours.toString().padStart(2, '0')}:${minutes}`;
                        }
                    }
                }

                return { startDate, startTime };
            },

            getSelectedDays() {
                return Array.from(document.querySelectorAll('input[name="days[]"]'))
                    .filter(cb => cb.checked)
                    .map(cb => cb.nextElementSibling.nextElementSibling.textContent.trim());
            },

            proceedToPreview() {
                this.captureFormData();
                this.sessionPreview = this.calculateNextSessions();
                this.currentStep = 2;
            },

            goBackToForm() {
                this.currentStep = 1;
            },

            get recurrenceText() {
                const patterns = { '1': 'Daily', '2': 'Weekly', '3': 'Monthly' };
                return patterns[this.recurrence] || 'Weekly';
            },

            get endConditionText() {
                if (this.endCondition === 'no_end') return 'No end date';
                if (this.endCondition === 'end_by_date') return `End by: ${this.activeFormData.endByDateValue || 'Not set'}`;
                if (this.endCondition === 'end_after') return `End after: ${this.activeFormData.endAfterValue || '0'} occurrences`;
                return 'No end date';
            },

            calculateNextSessions() {
                const { startDate, startTime } = this.activeFormData;

                if (!startDate || !startTime) {
                    return this.createErrorSession('Complete start date and time to see sessions');
                }

                try {
                    const baseDate = new Date(startDate + 'T' + startTime);

                    if (isNaN(baseDate.getTime())) {
                        throw new Error('Invalid start date or time');
                    }

                    const { maxSessions, endDate } = this.getSessionLimits();

                    switch (this.recurrence) {
                        case '1':
                            return this.calculateDailySessions(baseDate, maxSessions, endDate);
                        case '2':
                            return this.calculateWeeklySessions(baseDate, maxSessions, endDate);
                        case '3':
                            return this.calculateMonthlySessions(baseDate, maxSessions, endDate);
                        default:
                            return this.createErrorSession('Invalid recurrence pattern');
                    }
                } catch (error) {
                    return this.createErrorSession('Invalid date/time format');
                }
            },

            getSessionLimits() {
                let maxSessions = 14;
                let endDate = null;

                if (this.endCondition === 'end_after' && this.activeFormData.endAfterValue) {
                    maxSessions = Math.min(parseInt(this.activeFormData.endAfterValue), 14);
                } else if (this.endCondition === 'end_by_date' && this.activeFormData.endByDateValue) {
                    let endDateStr = this.activeFormData.endByDateValue;
                    if (endDateStr.includes('/')) {
                        const [day, month, year] = endDateStr.split('/');
                        endDateStr = `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
                    }
                    endDate = new Date(endDateStr + 'T23:59:59');

                    if (isNaN(endDate.getTime())) {
                        throw new Error('Invalid end date');
                    }
                }

                return { maxSessions, endDate };
            },

            createErrorSession(message) {
                return [{
                    number: 1,
                    date: message,
                    time: 'TBD',
                    title: this.activeFormData.title || 'Class Title'
                }];
            },

            calculateDailySessions(baseDate, maxSessions, endDate) {
                const sessions = [];
                let sessionCount = 0;
                let currentDate = new Date(baseDate);

                while (sessionCount < maxSessions) {
                    if (endDate && currentDate > endDate) break;

                    sessions.push(this.createSession(sessionCount + 1, currentDate));
                    sessionCount++;
                    currentDate.setDate(currentDate.getDate() + 1);
                }

                return sessions.length > 0 ? sessions : this.createErrorSession('No sessions match the selected criteria');
            },

            calculateWeeklySessions(baseDate, maxSessions, endDate) {
                const selectedDayNumbers = Array.from(document.querySelectorAll('input[name="days[]"]'))
                    .filter(cb => cb.checked)
                    .map(cb => parseInt(cb.value));

                if (selectedDayNumbers.length === 0) {
                    return this.createErrorSession('Select days of the week first');
                }

                const sessions = [];
                let sessionCount = 0;
                let currentWeekStart = new Date(baseDate);
                currentWeekStart.setDate(currentWeekStart.getDate() - currentWeekStart.getDay());

                let weekOffset = 0;
                while (sessionCount < maxSessions && weekOffset <= 100) {
                    let hasSessionThisWeek = false;

                    for (let day of selectedDayNumbers.sort()) {
                        if (sessionCount >= maxSessions) break;

                        const sessionDate = new Date(currentWeekStart);
                        sessionDate.setDate(currentWeekStart.getDate() + day + (weekOffset * 7));

                        if (sessionDate >= baseDate && (!endDate || sessionDate <= endDate)) {
                            sessions.push(this.createSession(sessionCount + 1, sessionDate));
                            sessionCount++;
                            hasSessionThisWeek = true;
                        } else if (endDate && sessionDate > endDate) {
                            break;
                        }
                    }

                    if (endDate && !hasSessionThisWeek && weekOffset > 0) break;
                    weekOffset++;
                }

                return sessions.length > 0 ? sessions : this.createErrorSession('No sessions match the selected criteria');
            },

            calculateMonthlySessions(baseDate, maxSessions, endDate) {
                const monthlyOccursOn = this.activeFormData.monthlyOccursOn || 'day';

                if (monthlyOccursOn === 'day') {
                    return this.calculateMonthlyByDay(baseDate, maxSessions, endDate);
                } else {
                    return this.calculateMonthlyByWeek(baseDate, maxSessions, endDate);
                }
            },

            calculateMonthlyByDay(baseDate, maxSessions, endDate) {
                const sessions = [];
                const targetDay = parseInt(this.activeFormData.monthlyDay || '26');
                let sessionCount = 0;
                let currentDate = new Date(baseDate);

                if (currentDate.getDate() !== targetDay) {
                    currentDate.setDate(targetDay);
                    if (currentDate.getDate() !== targetDay) {
                        currentDate.setMonth(currentDate.getMonth() + 1);
                        currentDate.setDate(targetDay);
                    }
                }

                while (sessionCount < maxSessions) {
                    if (endDate && currentDate > endDate) break;

                    if (currentDate >= baseDate) {
                        sessions.push(this.createSession(sessionCount + 1, currentDate));
                        sessionCount++;
                    }

                    const nextMonth = new Date(currentDate);
                    nextMonth.setMonth(nextMonth.getMonth() + 1);
                    nextMonth.setDate(targetDay);

                    if (nextMonth.getDate() !== targetDay) {
                        nextMonth.setDate(0);
                        if (nextMonth.getMonth() === currentDate.getMonth()) {
                            nextMonth.setMonth(nextMonth.getMonth() + 1);
                            nextMonth.setDate(Math.min(targetDay, new Date(nextMonth.getFullYear(), nextMonth.getMonth() + 1, 0).getDate()));
                        }
                    }

                    currentDate = nextMonth;
                }

                return sessions.length > 0 ? sessions : this.createErrorSession('No sessions match the selected criteria');
            },

            calculateMonthlyByWeek(baseDate, maxSessions, endDate) {
                const sessions = [];
                const weekOccurrence = parseInt(this.activeFormData.monthlyWeekOccurrence || '4');
                const weekDay = parseInt(this.activeFormData.monthlyWeekDay || '1');
                let sessionCount = 0;
                let currentMonth = new Date(baseDate.getFullYear(), baseDate.getMonth(), 1);

                while (sessionCount < maxSessions) {
                    const sessionDate = this.calculateNthWeekdayOfMonth(currentMonth, weekOccurrence, weekDay);

                    if (endDate && sessionDate > endDate) break;

                    if (sessionDate && sessionDate >= baseDate) {
                        sessions.push(this.createSession(sessionCount + 1, sessionDate));
                        sessionCount++;
                    }

                    currentMonth.setMonth(currentMonth.getMonth() + 1);
                }

                return sessions.length > 0 ? sessions : this.createErrorSession('No sessions match the selected criteria');
            },

            calculateNthWeekdayOfMonth(month, weekOccurrence, weekDay) {
                const year = month.getFullYear();
                const monthIndex = month.getMonth();

                if (weekOccurrence === -1) {
                    const lastDay = new Date(year, monthIndex + 1, 0);
                    const lastDayOfWeek = lastDay.getDay();

                    let daysBack = (lastDayOfWeek - weekDay + 7) % 7;
                    if (daysBack === 0 && lastDay.getDay() !== weekDay) {
                        daysBack = 7;
                    }

                    return new Date(year, monthIndex, lastDay.getDate() - daysBack);
                } else {
                    const firstDay = new Date(year, monthIndex, 1);
                    const firstDayOfWeek = firstDay.getDay();

                    let daysToAdd = (weekDay - firstDayOfWeek + 7) % 7;
                    daysToAdd += (weekOccurrence - 1) * 7;

                    const result = new Date(year, monthIndex, 1 + daysToAdd);

                    if (result.getMonth() !== monthIndex) {
                        return null;
                    }

                    return result;
                }
            },

            createSession(sessionNumber, sessionDate) {
                return {
                    number: sessionNumber,
                    date: sessionDate.toLocaleDateString('en-US', {
                        weekday: 'short',
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric'
                    }),
                    time: this.activeFormData.startTime,
                    title: this.generateSessionTitle(this.activeFormData.title, sessionNumber, sessionDate),
                    dateObj: new Date(sessionDate)
                };
            },

            generateSessionTitle(baseTitle, sessionNumber, sessionDate) {
                if (!baseTitle) return 'Class Title';

                const suffixType = this.activeFormData.suffixType || this.suffixType;
                const formattedDate = sessionDate.toLocaleDateString('en-US', {
                    month: '2-digit',
                    day: '2-digit',
                    year: 'numeric'
                });

                switch (suffixType) {
                    case 'number':
                        return `${baseTitle} ${sessionNumber}`;
                    case 'date':
                        return `${baseTitle} on ${formattedDate}`;
                    case 'both':
                        return `${baseTitle} ${sessionNumber} on ${formattedDate}`;
                    default:
                        return `${baseTitle} ${sessionNumber}`;
                }
            }
        }
    }
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script type="text/javascript">
  $(function () {
    $('#start_datetime').daterangepicker({
      "singleDatePicker": true,
      "timePicker": true,
      "autoApply": true,
      "locale": {
        "format": "DD/MM/YYYY hh:mm A"
      }
    });

    $('#end_date').daterangepicker({
      "singleDatePicker": true,
      "autoApply": true,
      "locale": {
        "format": "DD/MM/YYYY"
      }
    });
  });
</script>

  </body>


</html>
