<script>
function examReviewComponent() {
  return {
    exam: {
      name: "Real CAT 2025 - Take Home Mock Test 01",
      sections: [
        {
          name: "Quantitative Aptitude",
          questions: [
            {
              id: 1,
              q_no: 1,
              type: "mcq",
              question: "If the cost price of 15 items is equal to the selling price of 12 items, what is the profit percentage?",
              options: ["20%", "25%", "30%", "15%"],
              correctIndex: [1],
              selectedIndex: [1],
              explanation: "Profit = (3/12) × 100 = 25%",
              total: 1,
              negative: 0.25,
              awarded: 1,
              subject: "Quantitative Aptitude",
              time_taken: "1:20",
              trivia: 72,
              response_status: "correct",
              show_solution:false,
              feedback:{},
            },
            {
              id: 2,
              q_no: 2,
              type: "mcq",
              question: "A train 240 m long passes a pole in 24 seconds. What is the speed of the train in km/hr?",
              options: ["36", "54", "72", "90"],
              correctIndex: [2],
              selectedIndex: [0, 2],
              explanation: "Speed = 240 / 24 = 10 m/s = 36 km/hr",
              total: 1,
              negative: 0.25,
              awarded: 0,
              subject: "Quantitative Aptitude",
              time_taken: "2:00",
              trivia: 48,
              response_status: "incorrect",
              feedback:{},
            },
            {
              id: 3,
              q_no: 3,
              type: "essay",
              question: "Explain the impact of globalization on rural economies in India.",
              user_answer: `Globalization has significantly influenced rural economies in India in both positive and negative ways. It has improved access to markets, technology, and information, allowing rural farmers to diversify crops and adopt modern agricultural techniques. Infrastructure development like roads, internet, and communication tools has enhanced rural connectivity.
                            However, globalization has also created new challenges. Many small farmers find it difficult to compete with large agribusinesses and imported goods, leading to income insecurity. Traditional rural industries such as handloom weaving have suffered due to competition from mechanized and mass-produced products. 
                            The migration of labor to urban areas in search of better opportunities has also resulted in a declining rural workforce. While globalization has opened doors for growth, rural areas need policy support, education, and skill-building to fully benefit. Sustainable models must be promoted to protect local livelihoods. Overall, the impact of globalization on rural India is mixed — with gains in access but risks to traditional stability.`, 
              evaluated: true,
              awarded: 4,
              total: 5,
              subject: "Quantitative Aptitude",
              time_taken: "5:45",
              feedback: {
                user: "Ramesh Kannan",
                text: "Well-structured answer. Lacked depth in one area."
              },
              response_status: "correct",
              show_solution:false,
              correctIndex: [],
              options:[],
              selectedIndex: []
            },
            {
              id: 4,
              q_no: 4,
              type: "gap_fill",
              question: "The [BLANK_1] Revolution was a turning point. It began in [BLANK_2] and changed [BLANK_3]. People moved to [BLANK_4] areas, and innovations like the steam engine revolutionized [BLANK_5].",
              user_answer: ["Industrial", "German", "society", "urban", "transport"],
              correct_answer: ["Industrial", "Britan", "society", "urban", "transport"],
              total: 2,
              awarded: 2,
              subject: "Quantitative Aptitude",
              time_taken: "3:10",
              trivia: 61,
              response_status: "correct",
              show_solution:false,
              feedback:{},
              correctIndex: [],
              options:[],
              selectedIndex: []
            },
            {
              id: 5,
              q_no: 5,
              type: "match",
              question: "Match the countries with their capitals:",
              questions: ["France", "Japan", "India", "Germany"],
              answers: ["Paris", "Tokyo", "New Delhi", "Berlin"],
              user_answer: ["Tokyo", "Paris", "New Delhi", "Berlin"],
              total: 2,
              awarded: 2,
              subject: "Quantitative Aptitude",
              time_taken: "2:20",
              trivia: 69,
              response_status: "correct",
              show_solution:false,
              feedback:{},
              correctIndex: [],
              options:[],
              selectedIndex: []
            },
            {
              id: 6,
              q_no: 6,
              type: "file",
              question: "Describe the impact of social media on modern communication.",
              user_answer: "social_media_impact.pdf",
              evaluated: false,
              awarded: 0,
              total: 1,
              subject: "Quantitative Aptitude",
              time_taken: "4:00",
              feedback: {},
              response_status: "pending_evaluation",
              correctIndex: [],
              options:[],
              selectedIndex: [],
              answers :[],
            },
            {
            id: 7,
            q_no: 7,
            type: "mcq",
            passage: `In recent years, urban areas have witnessed a significant increase in green infrastructure initiatives. From vertical gardens to rooftop farming and tree-lined boulevards, these developments are aimed at improving air quality, reducing urban heat, and enhancing biodiversity. Moreover, green spaces are now recognized for their psychological and social benefits, contributing to better mental health and stronger community bonds.`,
            question: "According to the passage, which of the following is NOT mentioned as a benefit of green infrastructure?",
            options: [
              "Improved air quality",
              "Reduction in urban heat",
              "Lower housing costs",
              "Better mental health"
            ],
            correctIndex: [2],
            selectedIndex: [1],
            explanation: "The passage does not mention lower housing costs. All other benefits are explicitly stated.",
            total: 1,
            negative: 0.25,
            awarded: 0,
            subject: "Reading Comprehension",
            time_taken: "1:42",
            trivia: 64,
            response_status: "incorrect",
            show_solution: false,
            feedback: {}
          },
          
          ]
        },
        {
  name: "Verbal Ability",
  questions: [
    {
      id: 8,
      q_no: 1,
      type: "mcq",
      question: "Choose the correct synonym for the word: *Ephemeral*",
      options: ["Permanent", "Temporary", "Lethargic", "Cynical"],
      correctIndex: [1],
      selectedIndex: [1],
      explanation: "Ephemeral means short-lived or temporary.",
      total: 1,
      negative: 0.25,
      awarded: 1,
      subject: "Verbal Ability",
      time_taken: "0:55",
      trivia: 81,
      response_status: "correct",
      show_solution: false,
      feedback: {}
    },
    {
      id: 9,
      q_no: 2,
      type: "gap_fill",
      question: "She was known for her [BLANK_1] nature, always cheerful and [BLANK_2].",
      user_answer: ["gregarious", "optimistic"],
      correct_answer: ["gregarious", "optimistic"],
      total: 1,
      awarded: 1,
      subject: "Verbal Ability",
      time_taken: "1:10",
      trivia: 57,
      response_status: "correct",
      show_solution: false,
      feedback: {},
      correctIndex: [],
      options: [],
      selectedIndex: []
    },
    {
      id: 10,
      q_no: 3,
      type: "essay",
      question: "Write a short note on the significance of reading fiction for young adults.",
      user_answer: "Reading fiction enhances imagination, empathy, and critical thinking...",
      evaluated: true,
      awarded: 3,
      total: 5,
      subject: "Verbal Ability",
      time_taken: "4:00",
      feedback: {
        user: "Priya R",
        text: "Good ideas, but could be more detailed with examples."
      },
      response_status: "correct",
      show_solution: false,
      correctIndex: [],
      options: [],
      selectedIndex: []
    },
    {
      id: 11,
      q_no: 4,
      type: "match",
      question: "Match the authors with their famous works:",
      questions: ["George Orwell", "Jane Austen", "J.K. Rowling", "Harper Lee"],
      answers: ["1984", "Pride and Prejudice", "Harry Potter", "To Kill a Mockingbird"],
      user_answer: ["1984", "Pride and Prejudice", "Harry Potter", "To Kill a Mockingbird"],
      total: 1,
      awarded: 1,
      subject: "Verbal Ability",
      time_taken: "1:45",
      trivia: 45,
      response_status: "correct",
      show_solution: false,
      feedback: {},
      correctIndex: [],
      options: [],
      selectedIndex: []
    },
    {
      id: 12,
      q_no: 5,
      type: "file",
      question: "Upload a short analysis of a poem of your choice.",
      user_answer: "poetry_analysis.pdf",
      evaluated: false,
      awarded: 0,
      total: 2,
      subject: "Verbal Ability",
      time_taken: "3:30",
      feedback: {},
      response_status: "pending_evaluation",
      correctIndex: [],
      options: [],
      selectedIndex: [],
      answers: []
    }
  ]
},
{
  name: "Logical Reasoning",
  questions: [
    {
      id: 13,
      q_no: 1,
      type: "mcq",
      question: "All roses are flowers. Some flowers fade quickly. Therefore:",
      options: [
        "Some roses fade quickly",
        "All flowers are roses",
        "Some roses do not fade quickly",
        "None of the above"
      ],
      correctIndex: [3],
      selectedIndex: [3],
      explanation: "No definite conclusion can be drawn about roses fading.",
      total: 1,
      negative: 0.25,
      awarded: 1,
      subject: "Logical Reasoning",
      time_taken: "1:05",
      trivia: 53,
      response_status: "correct",
      show_solution: false,
      feedback: {}
    },
    {
      id: 14,
      q_no: 2,
      type: "gap_fill",
      question: "In a code language, 'TRUTH' is written as 'WUXWK'. Then 'FALSE' is [BLANK_1].",
      user_answer: ["IDNYH"],
      correct_answer: ["IDNYH"],
      total: 1,
      awarded: 1,
      subject: "Logical Reasoning",
      time_taken: "1:20",
      trivia: 61,
      response_status: "correct",
      show_solution: false,
      feedback: {},
      correctIndex: [],
      options: [],
      selectedIndex: []
    },
    {
      id: 15,
      q_no: 3,
      type: "essay",
      question: "Discuss the importance of logical consistency in debates.",
      user_answer: "Logical consistency ensures the argument doesn’t contradict itself and maintains clarity...",
      evaluated: true,
      awarded: 4,
      total: 5,
      subject: "Logical Reasoning",
      time_taken: "3:50",
      feedback: {
        user: "Vinay Raj",
        text: "Excellent structure and examples. Minor grammatical fixes needed."
      },
      response_status: "correct",
      show_solution: false,
      correctIndex: [],
      options: [],
      selectedIndex: []
    },
    {
      id: 16,
      q_no: 4,
      type: "match",
      question: "Match the figures with their mirror images:",
      questions: ["L", "T", "P", "S"],
      answers: ["⊥", "┴", "ᖷ", "Ƨ"],
      user_answer: ["ᖷ", "┴", "⊥", "Ƨ"],
      total: 1,
      awarded: 0,
      subject: "Logical Reasoning",
      time_taken: "2:10",
      trivia: 38,
      response_status: "incorrect",
      show_solution: false,
      feedback: {},
      correctIndex: [],
      options: [],
      selectedIndex: []
    },
    {
      id: 17,
      q_no: 5,
      type: "file",
      question: "Upload your logical deduction for the puzzle provided.",
      user_answer: "deduction_answer.pdf",
      evaluated: false,
      awarded: 0,
      total: 2,
      subject: "Logical Reasoning",
      time_taken: "4:40",
      feedback: {},
      response_status: "pending_evaluation",
      correctIndex: [],
      options: [],
      selectedIndex: [],
      answers: []
    }
  ]
},{
  name: "Data Interpretation",
  questions: [
    {
      id: 18,
      q_no: 1,
      type: "mcq",
      question: "A company’s revenue increased from ₹120,000 to ₹180,000 in a year. What is the percentage increase?",
      options: ["25%", "40%", "50%", "33.33%"],
      correctIndex: [2],
      selectedIndex: [2],
      explanation: "Increase = 60,000; Percentage = (60,000 / 120,000) × 100 = 50%",
      total: 1,
      negative: 0.25,
      awarded: 1,
      subject: "Data Interpretation",
      time_taken: "1:10",
      trivia: 59,
      response_status: "correct",
      show_solution: false,
      feedback: {}
    }
  ]
},
{
  name: "General Knowledge",
  questions: [
    {
      id: 19,
      q_no: 1,
      type: "gap_fill",
      question: "The capital of [BLANK_1] is [BLANK_2].",
      user_answer: ["Australia", "Canberra"],
      correct_answer: ["Australia", "Canberra"],
      total: 1,
      awarded: 1,
      subject: "General Knowledge",
      time_taken: "0:45",
      trivia: 40,
      response_status: "correct",
      show_solution: false,
      feedback: {},
      correctIndex: [],
      options: [],
      selectedIndex: []
    }
  ]
},
{
  name: "Computer Science",
  questions: [
    {
      id: 20,
      q_no: 1,
      type: "essay",
      question: "Explain the importance of data structures in algorithm optimization.",
      user_answer: "Data structures help in organizing data efficiently and directly impact the performance of algorithms...",
      evaluated: true,
      awarded: 4,
      total: 5,
      subject: "Computer Science",
      time_taken: "3:40",
      feedback: {
        user: "Sneha Das",
        text: "Concise and informative. Try to mention more real-world examples."
      },
      response_status: "correct",
      show_solution: false,
      correctIndex: [],
      options: [],
      selectedIndex: []
    }
  ]
},
{
  name: "Ethics & Integrity",
  questions: [
    {
      id: 21,
      q_no: 1,
      type: "file",
      question: "Upload an essay on 'The role of honesty in public administration'.",
      user_answer: "honesty_essay.pdf",
      evaluated: false,
      awarded: 0,
      total: 2,
      subject: "Ethics & Integrity",
      time_taken: "4:10",
      feedback: {},
      response_status: "pending_evaluation",
      correctIndex: [],
      options: [],
      selectedIndex: [],
      answers: []
    }
  ]
},
{
  name: "Decision Making",
  questions: [
    {
      id: 22,
      q_no: 1,
      type: "mcq",
      question: "If a subordinate makes a mistake in a report, what is the most ethical response from the manager?",
      options: [
        "Ignore it and submit",
        "Fix it silently",
        "Inform and correct together",
        "Blame the subordinate"
      ],
      correctIndex: [2],
      selectedIndex: [2],
      explanation: "Collaborative correction ensures accountability and learning.",
      total: 1,
      negative: 0.25,
      awarded: 1,
      subject: "Decision Making",
      time_taken: "1:30",
      trivia: 63,
      response_status: "correct",
      show_solution: false,
      feedback: {}
    }
  ]
},
{
  name: "Current Affairs",
  questions: [
    {
      id: 23,
      q_no: 1,
      type: "gap_fill",
      question: "The G20 Summit 2023 was hosted by [BLANK_1].",
      user_answer: ["India"],
      correct_answer: ["India"],
      total: 1,
      awarded: 1,
      subject: "Current Affairs",
      time_taken: "0:40",
      trivia: 77,
      response_status: "correct",
      show_solution: false,
      feedback: {},
      correctIndex: [],
      options: [],
      selectedIndex: []
    }
  ]
},
{
  name: "Reading Comprehension",
  questions: [
    {
      id: 24,
      q_no: 1,
      type: "mcq",
      passage: "Climate change is a pressing issue. Rising temperatures affect biodiversity, agriculture, and health globally. Immediate policy-level interventions are required.",
      question: "Which of the following is NOT affected by climate change according to the passage?",
      options: ["Biodiversity", "Agriculture", "Healthcare", "Space Research"],
      correctIndex: [3],
      selectedIndex: [1],
      explanation: "Space research is not mentioned in the passage.",
      total: 1,
      negative: 0.25,
      awarded: 0,
      subject: "Reading Comprehension",
      time_taken: "1:20",
      trivia: 68,
      response_status: "incorrect",
      show_solution: false,
      feedback: {}
    }
  ]
}


      ]
    },

    currentSectionIndex: 0,
    currentQuestionIndex: 0,

    showAllSolutions: false,
    filter: "all",
    selected_filter: "all",

    init() {
      this.selectSection(0);
    },

    get currentSection() {
      return this.exam.sections[this.currentSectionIndex];
    },

    get currentQuestion() {
      const questions = this.filteredQuestions;
      return questions[this.currentQuestionIndex] || {};
    },

    selectSection(index) {
      this.currentSectionIndex = index;
      this.currentQuestionIndex = 0;
      this.scrollToTop();
    },

    goToQuestion(index) {
      this.currentQuestionIndex = index;
      this.scrollToTop();
    },

    setFilter(status) {
    this.filter = status;
    this.currentQuestionIndex = 0;
   },

    
    get filteredQuestions() {
      return this.currentSection.questions.filter(q => {
        if (this.filter === 'correct') {
          return q.response_status === 'correct';
        }
        if (this.filter === 'incorrect') {
          return q.response_status === 'incorrect';
        }
        if (this.filter === 'unanswered') {
          return q.response_status === 'unanswered';
        }

        if (this.filter === 'pending_evaluation') {
          return q.response_status === 'pending_evaluation';
        }
        // 'All'
        return true;
      });
    },

    scrollToTop() {
      window.scrollTo(0,0);
    },

    getQuestionStatus(question) {
      return question.response_status || 'unanswered';
    },

    get currentSectionStats() {
      const stats = {
        total: this.currentSection.questions.length,
        correct: 0,
        incorrect: 0,
        unanswered: 0,
        pending_evaluation: 0
      };

      for (const q of this.currentSection.questions) {
        const status = this.getQuestionStatus(q);
        if (stats[status] !== undefined) stats[status]++;
      }

      return stats;
    },

    getGapFillHTML() {
      if (this.currentQuestion.type !== 'gap_fill') return '';

      const text = this.currentQuestion.question;
      const blanks = (text.match(/\[BLANK_\d+\]/g) || []).length;
      const parts = text.split(/\[BLANK_\d+\]/g);

      return parts.map((part, index) => {
        const userAns = this.currentQuestion.user_answer?.[index] || '';
        const correctAns = this.currentQuestion.correct_answer?.[index] || '';
        const isCorrect = userAns.trim().toLowerCase() === correctAns.trim().toLowerCase();

        const answerSpan = index < blanks
          ? `<span class="${isCorrect ? 'border-b-2 border-emerald-500 text-emerald-500' : 'border-b-2 border-red-500 text-red-500'} font-medium px-1">${userAns}</span>`
          : '';

        return `${part}${answerSpan}`;
      }).join('');
    },

    getGapFillCorrectHTML() {
      if (this.currentQuestion.type !== 'gap_fill') return '';

      const text = this.currentQuestion.question;
      const blanks = (text.match(/\[BLANK_\d+\]/g) || []).length;
      const parts = text.split(/\[BLANK_\d+\]/g);

      return parts.map((part, index) => {
        const correctAns = this.currentQuestion.correct_answer?.[index] || '';

        const answerSpan = index < blanks
          ? `<span class="border-b-2 border-gray-500 text-gray-800 font-medium px-1">${correctAns}</span>`
          : '';

        return `${part}${answerSpan}`;
      }).join('');
    },


    filterQuestionsByStatus(status) {
      return this.currentSection.questions.filter(q => this.getQuestionStatus(q) === status);
    },

    getExplanation(question) {
      return question.explanation || null;
    },

    getFeedback(question) {
      return question.feedback || null;
    }
  };
}
</script>