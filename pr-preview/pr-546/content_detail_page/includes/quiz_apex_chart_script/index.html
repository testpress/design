<!-- ApexCharts Scripts for Quiz Component -->
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/preline@2.0.3/dist/hs-apexcharts-helpers.js"></script>

<script>
  function renderQuizDonutChart() {
    // Clear existing chart if any
    const chartContainer = document.querySelector("#quiz-pie-chart");
    if (chartContainer) {
      chartContainer.innerHTML = '';
    }
    
    const seriesData = [1, 1, 1]; // Correct, Incorrect, Unanswered
    const seriesLabels = ['Correct', 'Incorrect', 'Unanswered'];
    
    const options = {
      series: seriesData,
      chart: {
        type: 'donut',
        height: 230,
        width: 230,
        animations: { enabled: false }
      },
      labels: seriesLabels,
      colors: ['#22c55e', '#ef4444', '#f97316'],
      plotOptions: {
        pie: {
          donut: {
            size: '67%',
            labels: {
              show: true,
              name: {
                show: true,
                fontSize: '14px',
                fontFamily: 'Inter, sans-serif',
                fontWeight: 600,
                color: '#6b7280',
                offsetY: -10
              },
              value: {
                show: true,
                fontSize: '16px',
                fontFamily: 'Inter, sans-serif',
                fontWeight: 700,
                color: '#111827',
                offsetY: 16,
                formatter: function (val) {
                  return val;
                }
              },
              total: {
                show: true,
                label: 'Total',
                fontSize: '14px',
                fontFamily: 'Inter, sans-serif',
                fontWeight: 600,
                color: '#6b7280',
                formatter: function (w) {
                  return w.globals.seriesTotals.reduce((a, b) => a + b, 0);
                }
              }
            }
          }
        }
      },
      tooltip: {
        enabled: true,
        theme: 'dark',
        style: {
          fontSize: '12px',
          fontFamily: 'Inter, sans-serif'
        },
        y: {
          formatter: function (val) {
            return val + ' questions';
          }
        }
      },
      legend: {
        show: false
      },
      stroke: {
        width: 5,
        colors: ['#ffffff']
      },
      dataLabels: {
        enabled: false
      },
      states: {
        hover: {
          filter: {
            type: 'darken',
            value: 0.9
          }
        }
      }
    };

    const chart = new ApexCharts(chartContainer, options);
    chart.render();
  }
</script> 