<script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.3/dist/js/splide.min.js"></script>
<script>
  document.addEventListener('alpine:init', () => {
    Alpine.data('splideSlider', (id, show_arrow = true, config = {}) => ({
      init() {
        const defaultConfig = {
          perPage: 3,
          gap: '1rem',
          pagination: false,
          arrows: show_arrow,
          breakpoints: {
            500: { perPage: 1 },
            800: { perPage: 2 },
            1024: { perPage: 3 },
            1280: { perPage: 3 },
            1400: { perPage: 3 },
          },
        };

        const splide = new Splide(id, { ...defaultConfig, ...config }).mount();

        // Enable wheel/shift scroll
        const track = splide.root.querySelector('.splide__track');
        track.addEventListener('wheel', (e) => {
          // Hold shift OR use trackpad horizontal scroll
          if (e.shiftKey || Math.abs(e.deltaX) > Math.abs(e.deltaY)) {
            e.preventDefault();
            if (e.deltaY > 0 || e.deltaX > 0) {
              splide.go('>'); // next slide
            } else {
              splide.go('<'); // prev slide
            }
          }
        });
      },
    }));
  });
</script>
