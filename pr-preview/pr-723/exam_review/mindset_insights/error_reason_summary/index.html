<div class="">
  <div class="flex flex-col bg-white border border-gray-200 shadow-2xs rounded-xl dark:bg-neutral-800 dark:border-neutral-700">
    <div class="py-3 px-5 flex justify-between items-center border-b border-gray-200 dark:border-neutral-700">
      <h2 class="inline-block font-semibold text-gray-800 dark:text-neutral-200">
        Reasons for Errors
        <span
          x-show="selectedSectionId !== 'overall'"
          x-text="`(${sections.find(s => s.section_id === selectedSectionId)?.section_name || ''})`"
        ></span>
        <span x-show="selectedSectionId === 'overall'">(Overall)</span>
      </h2>
      <div x-show="!loading.errors && errorSummaryForChart.series && errorSummaryForChart.series.length > 0" class="flex items-center gap-x-2">
        <span class="text-sm font-medium text-gray-600 dark:text-neutral-300">
          Total Reflected Errors:
          <span class="text-sm font-semibold text-gray-900 dark:text-neutral-100">
            <span x-text="errorSummaryForChart.totalErrors"></span>
            <span class="text-gray-500 dark:text-neutral-400"> / </span>
            <span x-text="errorSummaryForChart.totalIncorrect"></span>
          </span>
        </span>
      </div>
    </div>

  <div x-show="loading.errors">
    <div class="h-[50vh] flex flex-col justify-center items-center text-center">
  <div role="status">
    <svg
      aria-hidden="true"
      class="inline w-10 h-10 text-gray-200 animate-spin dark:text-gray-600 fill-emerald-600"
      viewBox="0 0 100 101"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"
        fill="currentColor"
      />
      <path
        d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"
        fill="currentFill"
      />
    </svg>
    <span class="sr-only">Loading...</span>
  </div>
</div>
  </div>

  <div class="p-5" x-show="!loading.errors">
    <p class="text-sm text-gray-600 dark:text-neutral-400 mb-4">
      This chart breaks down the reasons you selected for your incorrect answers.
      Use it to identify and address your most common exam-taking patterns.
    </p>

    <div class="flex flex-col lg:flex-row justify-center items-center lg:justify-around gap-5">
      <div
        x-show="errorSummaryForChart.series && errorSummaryForChart.series.length > 0"
        class="flex justify-center items-center h-[310px] w-[310px]"
      >
        <div id="error-reason-chart"></div>
      </div>

      <div
        class="w-full lg:w-1/2"
        x-show="errorSummaryForChart.series && errorSummaryForChart.series.length > 0"
      >
        <ul class="space-y-2">
          <template
            x-for="(label, index) in errorSummaryForChart.labels"
            :key="label"
          >
            <li
              @click="showQuestionsForReason(label)"
              class="flex items-center justify-between p-3 bg-gray-50 rounded-lg dark:bg-neutral-900 cursor-pointer transition-all duration-200 ease-out hover:bg-gray-100 hover:shadow-md"
            >
              <div class="flex items-center gap-x-2">
                <span
                  class="size-3 rounded-sm inline-block"
                  :style="`background-color: ${colorMapper.getColor(label)}`"
                ></span>
                <span
                  class="text-sm text-gray-700 dark:text-neutral-300"
                  x-text="label"
                ></span>
              </div>
              <span
                class="text-sm font-medium text-gray-800 dark:text-neutral-200"
                x-text="
                  errorSummaryForChart.series[index] +
                  ' (' +
                  (errorSummaryForChart.totalErrors > 0
                    ? (errorSummaryForChart.series[index] / errorSummaryForChart.totalErrors * 100).toFixed(0)
                    : 0
                  ) +
                  '%)'
                "
              ></span>
            </li>
          </template>
        </ul>
      </div>

      <div
        x-show="!errorSummaryForChart || errorSummaryForChart.series.length === 0"
        class="w-full text-center py-10"
      >
        <p class="text-gray-500">
          No error reflections were provided for this section.
        </p>
        <p class="text-sm text-gray-500 mt-1">
          Reflect on your incorrect answers during review to unlock this insight.
        </p>
      </div>
    </div>
  </div>
  </div>
  <!-- Hidden button to trigger modal opening - always accessible -->
  <button
    id="hs-pro-shflo-trigger"
    data-hs-overlay="#hs-pro-shflo"
    class="hidden"
    aria-label="Open questions modal"
  ></button>
  <div id="hs-pro-shflo" class="hs-overlay hs-overlay-open:translate-x-0 hidden translate-x-full fixed top-0 end-0 transition-all duration-300 transform h-full sm:w-100 lg:w-[33%] z-[9999] flex flex-col bg-white dark:bg-neutral-800" role="dialog" tabindex="-1" aria-labelledby="hs-pro-shflo-label" @click.self.stop @hs-overlay-close.window="selectedErrorReason = null">
  <!-- Header -->
  <div class="py-3 px-6 flex justify-between items-center border-b border-gray-200 rounded-lg dark:border-neutral-700 relative z-10 bg-white dark:bg-neutral-800">
    <h3 id="hs-pro-shflo-label" class="font-medium text-gray-800 dark:text-neutral-200">
      Questions for Mistake Reasons
      <span x-show="selectedErrorReason" class="text-sm font-normal text-gray-600 dark:text-neutral-400">
        (<span x-text="selectedErrorReason"></span>)
      </span>
    </h3>
    <button 
      type="button" 
      @click="selectedErrorReason = null"
      class="py-1.5 px-2 inline-flex justify-center items-center gap-x-1 rounded-full border border-gray-200 text-xs text-gray-800 hover:bg-gray-100 focus:outline-hidden focus:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 dark:text-neutral-200 dark:focus:bg-neutral-700" 
      aria-label="Close" 
      data-hs-overlay="#hs-pro-shflo"
    >
      <span class="hidden lg:block">Esc</span>
      <span class="block lg:hidden">Close</span>
      <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
    </button>
  </div>
  <!-- End Header -->

  <!-- Body -->
  <div class="bg-gray-100 h-full overflow-y-auto overflow-hidden relative z-10 [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500 dark:bg-neutral-800">
    <div class="p-2 space-y-2">
        
       

      <div 
        x-show="!selectedErrorReason || 'Misread the Question' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <!-- Question -->
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    1. <p>What is the capital of France?</p>
  </div>

  <!-- Options -->
  <div class="mt-4">
    <fieldset aria-label="Options" class="space-y-4">
       
       
       
       
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-white text-gray-900 border-gray-300">
          a
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Paris</p>
        </span>
      </div>
       
       
       
       
       
         
           
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-red-400 text-white ">
          b
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>London</p>
        </span>
      </div>
       
       
       
       
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-white text-gray-900 border-gray-300">
          c
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Berlin</p>
        </span>
      </div>
       
       
       
       
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-white text-gray-900 border-gray-300">
          d
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Madrid</p>
        </span>
      </div>
      
    </fieldset>
  </div>
</div>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I thought the question was asking about the capital of England, not France. Need to read more carefully.
              </p>
            </div>
          </div>
        </div>
        
      </div>
        
       

      <div 
        x-show="!selectedErrorReason || 'Careless Mistake' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <!-- Question -->
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    2. <p>Which of the following are prime numbers? (Select all that apply)</p>
  </div>

  <!-- Options -->
  <div class="mt-4">
    <fieldset aria-label="Options" class="space-y-4">
       
       
       
       
       
         
           
         
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-emerald-400 text-white ">
          a
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>2</p>
        </span>
      </div>
       
       
       
       
       
         
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-white text-gray-900 border-gray-300">
          b
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>4</p>
        </span>
      </div>
       
       
       
       
       
         
       
         
           
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-emerald-400 text-white ">
          c
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>7</p>
        </span>
      </div>
       
       
       
       
       
         
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-white text-gray-900 border-gray-300">
          d
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>9</p>
        </span>
      </div>
      
    </fieldset>
  </div>
</div>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I knew that 2 and 7 are prime numbers, but I accidentally selected 4 as well. Need to double-check my answers.
              </p>
            </div>
          </div>
        </div>
        
      </div>
        
       

      <div 
        x-show="!selectedErrorReason || 'Lack of Knowledge' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <!-- Question -->
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    3. <p>What is the value of Ï€ (pi) to 3 decimal places?</p>
  </div>

  <!-- User Answer -->
  <div class="mt-4">
    <p class="font-medium text-sm text-gray-700 dark:text-neutral-300">Your Answer</p>
    <div class="mt-2">
      
      <div class="inline-block px-4 py-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg">
        <span class="text-blue-700 dark:text-blue-300 font-medium">
          2.987
        </span>
      </div>
      
    </div>
  </div>
</div>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I completely forgot the value of pi. Need to memorize basic mathematical constants.
              </p>
            </div>
          </div>
        </div>
        
      </div>
        
       

      <div 
        x-show="!selectedErrorReason || 'Didn&#39;t Understand Question' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <!-- Question -->
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    4. <p>Explain the function of mitochondria in a cell.</p>
  </div>

  <!-- User Answer -->
  <div class="mt-4">
    <p class="font-medium text-sm text-gray-800">Your Answer</p>
    
    <p class="font-medium text-sm flex items-center mt-2 text-gray-600">The mitochondria is the powerhouse of the cell.</p>
    
  </div>
</div>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I just repeated the common phrase without actually explaining the function. The question asked for an explanation, not just a slogan.
              </p>
            </div>
          </div>
        </div>
        
      </div>
        
       

      <div 
        x-show="!selectedErrorReason || 'Rushed' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <!-- Question -->
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    5. <p>Which of the following is NOT a programming paradigm?</p>
  </div>

  <!-- Options -->
  <div class="mt-4">
    <fieldset aria-label="Options" class="space-y-4">
       
       
       
       
       
         
           
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-red-400 text-white ">
          a
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Object-Oriented Programming</p>
        </span>
      </div>
       
       
       
       
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-white text-gray-900 border-gray-300">
          b
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Algorithmic Programming</p>
        </span>
      </div>
       
       
       
       
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-white text-gray-900 border-gray-300">
          c
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Functional Programming</p>
        </span>
      </div>
       
       
       
       
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-white text-gray-900 border-gray-300">
          d
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Procedural Programming</p>
        </span>
      </div>
      
    </fieldset>
  </div>
</div>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I was running out of time and quickly selected an answer without thinking. &#39;Algorithmic Programming&#39; is not a standard programming paradigm - it&#39;s more of a general term.
              </p>
            </div>
          </div>
        </div>
        
      </div>
        
       

      <div 
        x-show="!selectedErrorReason || 'Calculation Error' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <!-- Question -->
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    6. <p>Which of the following are renewable energy sources? (Select all that apply)</p>
  </div>

  <!-- Options -->
  <div class="mt-4">
    <fieldset aria-label="Options" class="space-y-4">
       
       
       
       
       
         
           
         
       
         
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-emerald-400 text-white ">
          a
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Solar Energy</p>
        </span>
      </div>
       
       
       
       
       
         
       
         
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-white text-gray-900 border-gray-300">
          b
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Wind Energy</p>
        </span>
      </div>
       
       
       
       
       
         
       
         
           
         
       
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-red-400 text-white ">
          c
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Coal</p>
        </span>
      </div>
       
       
       
       
       
         
       
         
       
         
           
         
       
       
      
      <div class="flex items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <div class="flex shrink-0 justify-center items-center size-7 border border-gray-200 rounded-full uppercase bg-emerald-400 text-white ">
          d
        </div>
        <span class="ml-3 prose prose-sm max-w-none">
          <p>Hydroelectric Power</p>
        </span>
      </div>
      
    </fieldset>
  </div>
</div>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I correctly identified solar, wind, and hydroelectric as renewable, but I also incorrectly selected coal. Coal is definitely not renewable.
              </p>
            </div>
          </div>
        </div>
        
      </div>
        
       

      <div 
        x-show="!selectedErrorReason || 'Time Pressure' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <!-- Question -->
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    7. <p>What is the speed of light in vacuum (in m/s)?</p>
  </div>

  <!-- User Answer -->
  <div class="mt-4">
    <p class="font-medium text-sm text-gray-700 dark:text-neutral-300">Your Answer</p>
    <div class="mt-2">
      
      <span class="text-gray-400 italic">unanswered</span>
      
    </div>
  </div>
</div>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I couldn&#39;t remember the exact value and just left it blank. I know it&#39;s approximately 3 x 10^8 m/s, but I need to memorize the precise value.
              </p>
            </div>
          </div>
        </div>
        
      </div>
        
       

      <div 
        x-show="!selectedErrorReason || 'Used Wrong Strategy' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <!-- Question -->
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    8. <p>Define photosynthesis and explain its importance.</p>
  </div>

  <!-- User Answer -->
  <div class="mt-4">
    <p class="font-medium text-sm text-gray-800">Your Answer</p>
    
    <p class="font-medium text-sm flex items-center mt-2 text-gray-600">Photosynthesis is the process by which plants convert light energy into chemical energy.</p>
    
  </div>
</div>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I only defined photosynthesis but didn&#39;t explain its importance as the question asked. I need to read questions more carefully and address all parts.
              </p>
            </div>
          </div>
        </div>
        
      </div>
        
       

      <div 
        x-show="!selectedErrorReason || 'Careless Mistake' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    9. <p id="gap-fill-output"></p>
  </div>
</div>
<script>
  // Data coming from Django
  const questionText =
    "The [BLANK_1] Revolution was a turning point. It began in [BLANK_2] and changed [BLANK_3]. People moved to [BLANK_4] areas, and innovations like the steam engine revolutionized [BLANK_5].";

  const userAnswer =
    ["Industrial","German","society","urban","transport"];

  const correctAnswer =
    ["Industrial","Britan","society","urban","transport"];

  function getGapFillHTML(questionText, userAnswer = [], correctAnswer = []) {
    if (!questionText) return '';

    const blanks =
      (questionText.match(/\[BLANK_\d+\]/g) || []).length;

    const parts =
      questionText.split(/\[BLANK_\d+\]/g);

    return parts.map((part, index) => {
      const userAns = userAnswer[index] ?? '';
      const correctAns = correctAnswer[index] ?? '';

      const isCorrect =
        userAns.trim().toLowerCase() ===
        correctAns.trim().toLowerCase();

      let answerSpan = '';
      if (index < blanks) {
        const colorClass = isCorrect
          ? 'border-b-2 border-emerald-500 text-emerald-500'
          : 'border-b-2 border-red-500 text-red-500';

        const displayText = userAns || '(blank)';
        answerSpan =
          `<span class="${colorClass} font-medium px-1">${displayText}</span>`;
      }

      return part + answerSpan;
    }).join('');
  }

  // Render on DOM load
  document.addEventListener('DOMContentLoaded', () => {
    const output = document.getElementById('gap-fill-output');
    output.innerHTML = getGapFillHTML(
      questionText,
      userAnswer,
      correctAnswer
    );
  });
</script>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I knew the answer was water and oxygen, but I wrote them in the wrong order. I need to pay more attention to the sequence of the gaps.
              </p>
            </div>
          </div>
        </div>
        
      </div>
        
       

      <div 
        x-show="!selectedErrorReason || 'Careless Mistake' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <!-- Question -->
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    10. Match the countries with their capitals:
  </div>

  <!-- Match Pairs - User Answers -->
  <div class="mt-4">
    <fieldset aria-label="Match Options" class="space-y-4 max-w-2xl">
       
       
       
       
       
       
      
      <div class="grid grid-cols-12 gap-x-4 items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <!-- Left: Question label with circled letter -->
        <div class="col-span-5 flex items-center gap-2">
          <div class="flex shrink-0 justify-center items-center size-7 border rounded-full uppercase bg-red-400 text-white border-red-400 ">
            A
          </div>
          <span>France</span>
        </div>

        <!-- Middle: Arrow icon -->
        <div class="col-span-1 flex justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-move-right text-gray-400">
            <path d="M18 8L22 12L18 16" />
            <path d="M2 12H22" />
          </svg>
        </div>

        <!-- Right: User-selected answer -->
        <div class="text-sm col-span-6">
          
          <span>Tokyo</span>
          
        </div>
      </div>
       
       
       
       
      
      <div class="grid grid-cols-12 gap-x-4 items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <!-- Left: Question label with circled letter -->
        <div class="col-span-5 flex items-center gap-2">
          <div class="flex shrink-0 justify-center items-center size-7 border rounded-full uppercase bg-red-400 text-white border-red-400 ">
            B
          </div>
          <span>Japan</span>
        </div>

        <!-- Middle: Arrow icon -->
        <div class="col-span-1 flex justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-move-right text-gray-400">
            <path d="M18 8L22 12L18 16" />
            <path d="M2 12H22" />
          </svg>
        </div>

        <!-- Right: User-selected answer -->
        <div class="text-sm col-span-6">
          
          <span>Paris</span>
          
        </div>
      </div>
       
       
       
       
      
      <div class="grid grid-cols-12 gap-x-4 items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <!-- Left: Question label with circled letter -->
        <div class="col-span-5 flex items-center gap-2">
          <div class="flex shrink-0 justify-center items-center size-7 border rounded-full uppercase bg-emerald-400 text-white border-emerald-400 ">
            C
          </div>
          <span>India</span>
        </div>

        <!-- Middle: Arrow icon -->
        <div class="col-span-1 flex justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-move-right text-gray-400">
            <path d="M18 8L22 12L18 16" />
            <path d="M2 12H22" />
          </svg>
        </div>

        <!-- Right: User-selected answer -->
        <div class="text-sm col-span-6">
          
          <span>New Delhi</span>
          
        </div>
      </div>
       
       
       
       
      
      <div class="grid grid-cols-12 gap-x-4 items-center font-medium text-sm text-gray-600 dark:text-neutral-400">
        <!-- Left: Question label with circled letter -->
        <div class="col-span-5 flex items-center gap-2">
          <div class="flex shrink-0 justify-center items-center size-7 border rounded-full uppercase bg-emerald-400 text-white border-emerald-400 ">
            D
          </div>
          <span>Germany</span>
        </div>

        <!-- Middle: Arrow icon -->
        <div class="col-span-1 flex justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-move-right text-gray-400">
            <path d="M18 8L22 12L18 16" />
            <path d="M2 12H22" />
          </svg>
        </div>

        <!-- Right: User-selected answer -->
        <div class="text-sm col-span-6">
          
          <span>Berlin</span>
          
        </div>
      </div>
       
    </fieldset>
  </div>
</div>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I knew the answer was water and oxygen, but I wrote them in the wrong order. I need to pay more attention to the sequence of the gaps.
              </p>
            </div>
          </div>
        </div>
        
      </div>
        
       

      <div 
        x-show="!selectedErrorReason || 'Careless Mistake' === selectedErrorReason"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        class="p-4 bg-white rounded-lg shadow-2xs dark:bg-neutral-900"
      >
         
         
          <div>
  <!-- Question -->
  <div class="font-medium text-sm text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    11. Describe the impact of social media on modern communication.
  </div>

  <!-- User Answer -->
  <div class="mt-4">
    <dd class="max-w-2xl">
      <ul role="list" class="divide-y divide-gray-100 dark:divide-neutral-700 rounded-md border border-gray-200 dark:border-neutral-700">
        <li class="flex items-center justify-between py-2 pl-4 pr-5 text-sm/6">
          <div class="flex w-0 flex-1 items-center">
            <svg class="size-5 shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
              <path fill-rule="evenodd" d="M15.621 4.379a3 3 0 0 0-4.242 0l-7 7a3 3 0 0 0 4.241 4.243h.001l.497-.5a.75.75 0 0 1 1.064 1.057l-.498.501-.002.002a4.5 4.5 0 0 1-6.364-6.364l7-7a4.5 4.5 0 0 1 6.368 6.36l-3.455 3.553A2.625 2.625 0 1 1 9.52 9.52l3.45-3.451a.75.75 0 1 1 1.061 1.06l-3.45 3.451a1.125 1.125 0 0 0 1.587 1.595l3.454-3.553a3 3 0 0 0 0-4.242Z" clip-rule="evenodd"></path>
            </svg>
            <div class="ml-4 flex min-w-0 flex-1 gap-2">
              
              <span
                class="truncate font-medium text-sm text-gray-800 dark:text-neutral-200"
              >
                social_media_impact.pdf
              </span>
              
            </div>
          </div>
          
        </li>
      </ul>
    </dd>
  </div>
</div>
 
        

        <!-- Notes Section -->
        
        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4 mt-4">
          <div class="flex">
            <div class="ml-3">
              <p class="text-sm text-yellow-700">
                I knew the answer was water and oxygen, but I wrote them in the wrong order. I need to pay more attention to the sequence of the gaps.
              </p>
            </div>
          </div>
        </div>
        
      </div>
      
    </div>
  </div>
  <!-- End Body -->

</div>
<!-- End Cart Offcanvas -->
</div>