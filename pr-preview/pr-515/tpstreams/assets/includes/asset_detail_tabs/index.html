<div class="px-4 xl:col-span-2 sm:px-0 2xl:col-span-3 2xl:row-span-2">
  <div class="sm:hidden">
    <label for="tabs" class="sr-only">Select a tab</label>
    <select id="tabs" name="tabs"
      class="block w-full border-gray-300 rounded-md focus:border-blue-500 focus:ring-blue-500"
      @change="active_tab = $event.target.value">
      <option value="embed_link">Embed & Links</option>
      <option value="watch_metrics">Watch Metrics</option>
      <option value="thumbnails">Thumbnails</option>
      <option value="captions">Captions</option>
      <option value="chapters">Chapters</option>
      <option value="analytics">Analytics</option>
    </select>

  </div>
  <div class="hidden sm:block">
    <div class="border-b border-gray-200">
      <div class="w-full overflow-x-auto overflow-y-hidden">
        <nav class="flex -mb-px space-x-8 min-w-max" aria-label="Tabs">
        <button @click.prevent="active_tab = 'embed_link'"
          class="inline-flex items-center px-1 py-4 text-sm font-medium border-b-2 group"
          :class="active_tab === 'embed_link' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'">
          <svg fill="none" stroke="currentColor" stroke-width="1.5" class="-ml-0.5 mr-2 h-5 w-5"
            :class="active_tab === 'embed_link' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185z" />
          </svg>
          <span>Embed & Links</span>
        </button>
        <button @click.prevent="active_tab = 'thumbnails'"
          class="inline-flex items-center px-1 py-4 text-sm font-medium border-b-2 group"
          :class="active_tab === 'thumbnails' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'">

          <svg fill="none" stroke="currentColor" stroke-width="1.5" class="-ml-0.5 mr-2 h-5 w-5"
            :class="active_tab === 'thumbnails' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0z" />
          </svg>
          <span>Thumbnails</span>
        </button>
        
        <button  @click.prevent="active_tab = 'captions'"
          class="inline-flex items-center px-1 py-4 text-sm font-medium border-b-2 group"
          :class="active_tab === 'captions' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'">
          <svg class="-ml-0.5 mr-2 h-5 w-5" :class="active_tab === 'captions' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122" />
          </svg>          
          <span>Captions</span>
        </button>
       
        
        <button @click.prevent="active_tab = 'chapters'"
          class="inline-flex items-center px-1 py-4 text-sm font-medium border-b-2 group"
          :class="active_tab === 'chapters' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'">

          <svg fill="none" stroke="currentColor" stroke-width="1.5" class="-ml-0.5 mr-2 h-5 w-5"
            :class="active_tab === 'chapters' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12H12m-8.25 5.25h16.5" />
          </svg>
          <span>Chapters</span>
        </button>

        <button @click.prevent="active_tab = 'watch_metrics'"
          class="inline-flex items-center px-1 py-4 text-sm font-medium border-b-2 group"
          :class="active_tab === 'watch_metrics' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'">
          <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="-ml-0.5 mr-2 h-5 w-5"
            :class="active_tab === 'watch_metrics' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
          </svg>
          <span>Watch Metrics</span>
        </button>
        <button @click.prevent="active_tab = 'analytics'"
          class="inline-flex items-center px-1 py-4 text-sm font-medium border-b-2 group"
          :class="active_tab === 'analytics' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'">
          <svg fill="none" stroke="currentColor" stroke-width="1.5" class="-ml-0.5 mr-2 h-5 w-5"
            :class="active_tab === 'analytics' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25z" />
          </svg>
          <span>Analytics</span>
        </button>
        </nav>
      </div>
    </div>
  </div>
  <template x-if="active_tab === 'embed_link'">
    <div class="max-w-4xl">
  <!-- Embed Code -->
  <div class="relative" x-data="clipboardComponent()">
    <h3 class="mt-4 text-sm font-semibold leading-6 text-gray-900">Embed Code</h3>
    <div class="mt-2 pl-4 pr-8 py-4 bg-gray-50 rounded">
      <pre x-ref="contentToCopy" class="overflow-hidden text-gray-500 font-medium">&lt;div style=&quot;padding-top:56.25%;position:relative;&quot;&gt;
        &lt;iframe src=&quot;https://app.tpstreams.com/embed/6332n7/9b2mM7pEmbt/?access_token=711f8faf-7512-42f4-a9be-0f1c4d321158&quot; style=&quot;border:0;max-width:100%;position:absolute;top:0;left:0;height:100%;width:100%;&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope picture-in-picture&quot; allowfullscreen=&quot;&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;
      &lt;/div&gt;</pre>
    </div>
    <div @click="copyToClipboard()" class="absolute top-0 right-0 cursor-pointer flex">
      <span x-show="showCopiedTooltip"
        class="absolute inset-x-0 bottom-full flex mb-2.5 justify-center scale-100 translate-y-0 opacity-100">
        <span
          class="rounded-md bg-gray-900 px-3 py-1 text-[0.625rem] font-semibold uppercase leading-4 tracking-wide text-white drop-shadow-md filter">
          <svg aria-hidden="true" width="16" height="6" viewBox="0 0 16 6"
            class="absolute left-1/2 top-full -ml-2 -mt-px text-gray-900">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M15 0H1V1.00366V1.00366V1.00371H1.01672C2.72058 1.0147 4.24225 2.74704 5.42685 4.72928C6.42941 6.40691 9.57154 6.4069 10.5741 4.72926C11.7587 2.74703 13.2803 1.0147 14.9841 1.00371H15V0Z"
              fill="currentColor"></path>
          </svg>
          Copied!
        </span>
      </span>
      <svg x-show="showCopiedTooltip" class="h-8 w-8 rotate-[-8deg] stroke-[#06B6D4]" fill="none" viewBox="0 0 32 32"
        xmlns="http://www.w3.org/2000/svg" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path
          d="M12.9975 10.7499L11.7475 10.7499C10.6429 10.7499 9.74747 11.6453 9.74747 12.7499L9.74747 21.2499C9.74747 22.3544 10.6429 23.2499 11.7475 23.2499L20.2475 23.2499C21.352 23.2499 22.2475 22.3544 22.2475 21.2499L22.2475 12.7499C22.2475 11.6453 21.352 10.7499 20.2475 10.7499L18.9975 10.7499"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path
          d="M17.9975 12.2499L13.9975 12.2499C13.4452 12.2499 12.9975 11.8022 12.9975 11.2499L12.9975 9.74988C12.9975 9.19759 13.4452 8.74988 13.9975 8.74988L17.9975 8.74988C18.5498 8.74988 18.9975 9.19759 18.9975 9.74988L18.9975 11.2499C18.9975 11.8022 18.5498 12.2499 17.9975 12.2499Z"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path d="M13.7475 16.2499L18.2475 16.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <path d="M13.7475 19.2499L18.2475 19.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <g class="">
          <path d="M15.9975 5.99988L15.9975 3.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M19.9975 5.99988L20.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M11.9975 5.99988L10.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
        </g>
      </svg>
      <svg x-show="!showCopiedTooltip"
        class="hover:rotate-[-4deg] hover:stroke-slate-600 h-8 stroke-slate-400 transition w-8" fill="none"
        viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke-width="1.5" stroke-linecap="round"
        stroke-linejoin="round">
        <path
          d="M12.9975 10.7499L11.7475 10.7499C10.6429 10.7499 9.74747 11.6453 9.74747 12.7499L9.74747 21.2499C9.74747 22.3544 10.6429 23.2499 11.7475 23.2499L20.2475 23.2499C21.352 23.2499 22.2475 22.3544 22.2475 21.2499L22.2475 12.7499C22.2475 11.6453 21.352 10.7499 20.2475 10.7499L18.9975 10.7499"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path
          d="M17.9975 12.2499L13.9975 12.2499C13.4452 12.2499 12.9975 11.8022 12.9975 11.2499L12.9975 9.74988C12.9975 9.19759 13.4452 8.74988 13.9975 8.74988L17.9975 8.74988C18.5498 8.74988 18.9975 9.19759 18.9975 9.74988L18.9975 11.2499C18.9975 11.8022 18.5498 12.2499 17.9975 12.2499Z"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path d="M13.7475 16.2499L18.2475 16.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <path d="M13.7475 19.2499L18.2475 19.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <g class="opacity-0">
          <path d="M15.9975 5.99988L15.9975 3.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M19.9975 5.99988L20.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M11.9975 5.99988L10.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
        </g>
      </svg>
    </div>
  </div>
  <!-- Asset ID -->
  <div class="relative" x-data="clipboardComponent()">
    <h3 class="mt-4 text-sm font-semibold leading-6 text-gray-900">Asset ID</h3>
    <div class="mt-2 pl-4 pr-8 py-4 bg-gray-50 rounded">
      <pre x-ref="contentToCopy"
        class="overflow-hidden text-gray-500 font-medium">BKCKNXh4Q7x</pre>
    </div>
    <div @click="copyToClipboard()" class="absolute top-0 right-0 cursor-pointer flex">
      <span x-show="showCopiedTooltip"
        class="absolute inset-x-0 bottom-full flex mb-2.5 justify-center scale-100 translate-y-0 opacity-100">
        <span
          class="rounded-md bg-gray-900 px-3 py-1 text-[0.625rem] font-semibold uppercase leading-4 tracking-wide text-white drop-shadow-md filter">
          <svg aria-hidden="true" width="16" height="6" viewBox="0 0 16 6"
            class="absolute left-1/2 top-full -ml-2 -mt-px text-gray-900">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M15 0H1V1.00366V1.00366V1.00371H1.01672C2.72058 1.0147 4.24225 2.74704 5.42685 4.72928C6.42941 6.40691 9.57154 6.4069 10.5741 4.72926C11.7587 2.74703 13.2803 1.0147 14.9841 1.00371H15V0Z"
              fill="currentColor"></path>
          </svg>
          Copied!
        </span>
      </span>
      <svg x-show="showCopiedTooltip" class="h-8 w-8 rotate-[-8deg] stroke-[#06B6D4]" fill="none" viewBox="0 0 32 32"
        xmlns="http://www.w3.org/2000/svg" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path
          d="M12.9975 10.7499L11.7475 10.7499C10.6429 10.7499 9.74747 11.6453 9.74747 12.7499L9.74747 21.2499C9.74747 22.3544 10.6429 23.2499 11.7475 23.2499L20.2475 23.2499C21.352 23.2499 22.2475 22.3544 22.2475 21.2499L22.2475 12.7499C22.2475 11.6453 21.352 10.7499 20.2475 10.7499L18.9975 10.7499"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path
          d="M17.9975 12.2499L13.9975 12.2499C13.4452 12.2499 12.9975 11.8022 12.9975 11.2499L12.9975 9.74988C12.9975 9.19759 13.4452 8.74988 13.9975 8.74988L17.9975 8.74988C18.5498 8.74988 18.9975 9.19759 18.9975 9.74988L18.9975 11.2499C18.9975 11.8022 18.5498 12.2499 17.9975 12.2499Z"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path d="M13.7475 16.2499L18.2475 16.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <path d="M13.7475 19.2499L18.2475 19.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <g class="">
          <path d="M15.9975 5.99988L15.9975 3.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M19.9975 5.99988L20.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M11.9975 5.99988L10.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
        </g>
      </svg>
      <svg x-show="!showCopiedTooltip"
        class="hover:rotate-[-4deg] hover:stroke-slate-600 h-8 stroke-slate-400 transition w-8" fill="none"
        viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke-width="1.5" stroke-linecap="round"
        stroke-linejoin="round">
        <path
          d="M12.9975 10.7499L11.7475 10.7499C10.6429 10.7499 9.74747 11.6453 9.74747 12.7499L9.74747 21.2499C9.74747 22.3544 10.6429 23.2499 11.7475 23.2499L20.2475 23.2499C21.352 23.2499 22.2475 22.3544 22.2475 21.2499L22.2475 12.7499C22.2475 11.6453 21.352 10.7499 20.2475 10.7499L18.9975 10.7499"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path
          d="M17.9975 12.2499L13.9975 12.2499C13.4452 12.2499 12.9975 11.8022 12.9975 11.2499L12.9975 9.74988C12.9975 9.19759 13.4452 8.74988 13.9975 8.74988L17.9975 8.74988C18.5498 8.74988 18.9975 9.19759 18.9975 9.74988L18.9975 11.2499C18.9975 11.8022 18.5498 12.2499 17.9975 12.2499Z"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path d="M13.7475 16.2499L18.2475 16.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <path d="M13.7475 19.2499L18.2475 19.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <g class="opacity-0">
          <path d="M15.9975 5.99988L15.9975 3.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M19.9975 5.99988L20.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M11.9975 5.99988L10.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
        </g>
      </svg>
    </div>
  </div>
  <!-- Direct Play URL -->
  <div class="relative" x-data="clipboardComponent()">
    <h3 class="mt-4 text-sm font-semibold leading-6 text-gray-900">Direct Play URL</h3>
    <div class="mt-2 pl-4 pr-8 py-4 bg-gray-50 rounded">
      <pre x-ref="contentToCopy"
        class="overflow-hidden text-gray-500 font-medium">https://app.tpstreams.com/embed/6332n7/9b2mM7pEmbt/?access_token=711f8faf-7512-42f4-a9be-0f1c4d321158</pre>
    </div>
    <div @click="copyToClipboard()" class="absolute top-0 right-0 cursor-pointer flex">
      <span x-show="showCopiedTooltip"
        class="absolute inset-x-0 bottom-full flex mb-2.5 justify-center scale-100 translate-y-0 opacity-100">
        <span
          class="rounded-md bg-gray-900 px-3 py-1 text-[0.625rem] font-semibold uppercase leading-4 tracking-wide text-white drop-shadow-md filter">
          <svg aria-hidden="true" width="16" height="6" viewBox="0 0 16 6"
            class="absolute left-1/2 top-full -ml-2 -mt-px text-gray-900">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M15 0H1V1.00366V1.00366V1.00371H1.01672C2.72058 1.0147 4.24225 2.74704 5.42685 4.72928C6.42941 6.40691 9.57154 6.4069 10.5741 4.72926C11.7587 2.74703 13.2803 1.0147 14.9841 1.00371H15V0Z"
              fill="currentColor"></path>
          </svg>
          Copied!
        </span>
      </span>
      <svg x-show="showCopiedTooltip" class="h-8 w-8 rotate-[-8deg] stroke-[#06B6D4]" fill="none" viewBox="0 0 32 32"
        xmlns="http://www.w3.org/2000/svg" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path
          d="M12.9975 10.7499L11.7475 10.7499C10.6429 10.7499 9.74747 11.6453 9.74747 12.7499L9.74747 21.2499C9.74747 22.3544 10.6429 23.2499 11.7475 23.2499L20.2475 23.2499C21.352 23.2499 22.2475 22.3544 22.2475 21.2499L22.2475 12.7499C22.2475 11.6453 21.352 10.7499 20.2475 10.7499L18.9975 10.7499"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path
          d="M17.9975 12.2499L13.9975 12.2499C13.4452 12.2499 12.9975 11.8022 12.9975 11.2499L12.9975 9.74988C12.9975 9.19759 13.4452 8.74988 13.9975 8.74988L17.9975 8.74988C18.5498 8.74988 18.9975 9.19759 18.9975 9.74988L18.9975 11.2499C18.9975 11.8022 18.5498 12.2499 17.9975 12.2499Z"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path d="M13.7475 16.2499L18.2475 16.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <path d="M13.7475 19.2499L18.2475 19.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <g class="">
          <path d="M15.9975 5.99988L15.9975 3.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M19.9975 5.99988L20.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M11.9975 5.99988L10.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
        </g>
      </svg>
      <svg x-show="!showCopiedTooltip"
        class="hover:rotate-[-4deg] hover:stroke-slate-600 h-8 stroke-slate-400 transition w-8" fill="none"
        viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke-width="1.5" stroke-linecap="round"
        stroke-linejoin="round">
        <path
          d="M12.9975 10.7499L11.7475 10.7499C10.6429 10.7499 9.74747 11.6453 9.74747 12.7499L9.74747 21.2499C9.74747 22.3544 10.6429 23.2499 11.7475 23.2499L20.2475 23.2499C21.352 23.2499 22.2475 22.3544 22.2475 21.2499L22.2475 12.7499C22.2475 11.6453 21.352 10.7499 20.2475 10.7499L18.9975 10.7499"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path
          d="M17.9975 12.2499L13.9975 12.2499C13.4452 12.2499 12.9975 11.8022 12.9975 11.2499L12.9975 9.74988C12.9975 9.19759 13.4452 8.74988 13.9975 8.74988L17.9975 8.74988C18.5498 8.74988 18.9975 9.19759 18.9975 9.74988L18.9975 11.2499C18.9975 11.8022 18.5498 12.2499 17.9975 12.2499Z"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path d="M13.7475 16.2499L18.2475 16.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <path d="M13.7475 19.2499L18.2475 19.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <g class="opacity-0">
          <path d="M15.9975 5.99988L15.9975 3.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M19.9975 5.99988L20.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M11.9975 5.99988L10.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
        </g>
      </svg>
    </div>
  </div>
  <!-- Thumbnail Play URL -->
  <div class="relative" x-data="clipboardComponent()">
    <h3 class="mt-4 text-sm font-semibold leading-6 text-gray-900">Thumbnail URL</h3>
    <div class="mt-2 pl-4 pr-8 py-4 bg-gray-50 rounded">
      <pre x-ref="contentToCopy"
        class="overflow-hidden text-gray-500 font-medium">https://app.tpstreams.com/embed/6332n7/9b2mM7pEmbt/?access_token=711f8faf-7512-42f4-a9be-0f1c4d321158</pre>
    </div>
    <div @click="copyToClipboard()" class="absolute top-0 right-0 cursor-pointer flex">
      <span x-show="showCopiedTooltip"
        class="absolute inset-x-0 bottom-full flex mb-2.5 justify-center scale-100 translate-y-0 opacity-100">
        <span
          class="rounded-md bg-gray-900 px-3 py-1 text-[0.625rem] font-semibold uppercase leading-4 tracking-wide text-white drop-shadow-md filter">
          <svg aria-hidden="true" width="16" height="6" viewBox="0 0 16 6"
            class="absolute left-1/2 top-full -ml-2 -mt-px text-gray-900">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M15 0H1V1.00366V1.00366V1.00371H1.01672C2.72058 1.0147 4.24225 2.74704 5.42685 4.72928C6.42941 6.40691 9.57154 6.4069 10.5741 4.72926C11.7587 2.74703 13.2803 1.0147 14.9841 1.00371H15V0Z"
              fill="currentColor"></path>
          </svg>
          Copied!
        </span>
      </span>
      <svg x-show="showCopiedTooltip" class="h-8 w-8 rotate-[-8deg] stroke-[#06B6D4]" fill="none" viewBox="0 0 32 32"
        xmlns="http://www.w3.org/2000/svg" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path
          d="M12.9975 10.7499L11.7475 10.7499C10.6429 10.7499 9.74747 11.6453 9.74747 12.7499L9.74747 21.2499C9.74747 22.3544 10.6429 23.2499 11.7475 23.2499L20.2475 23.2499C21.352 23.2499 22.2475 22.3544 22.2475 21.2499L22.2475 12.7499C22.2475 11.6453 21.352 10.7499 20.2475 10.7499L18.9975 10.7499"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path
          d="M17.9975 12.2499L13.9975 12.2499C13.4452 12.2499 12.9975 11.8022 12.9975 11.2499L12.9975 9.74988C12.9975 9.19759 13.4452 8.74988 13.9975 8.74988L17.9975 8.74988C18.5498 8.74988 18.9975 9.19759 18.9975 9.74988L18.9975 11.2499C18.9975 11.8022 18.5498 12.2499 17.9975 12.2499Z"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path d="M13.7475 16.2499L18.2475 16.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <path d="M13.7475 19.2499L18.2475 19.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <g class="">
          <path d="M15.9975 5.99988L15.9975 3.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M19.9975 5.99988L20.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M11.9975 5.99988L10.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
        </g>
      </svg>
      <svg x-show="!showCopiedTooltip"
        class="hover:rotate-[-4deg] hover:stroke-slate-600 h-8 stroke-slate-400 transition w-8" fill="none"
        viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke-width="1.5" stroke-linecap="round"
        stroke-linejoin="round">
        <path
          d="M12.9975 10.7499L11.7475 10.7499C10.6429 10.7499 9.74747 11.6453 9.74747 12.7499L9.74747 21.2499C9.74747 22.3544 10.6429 23.2499 11.7475 23.2499L20.2475 23.2499C21.352 23.2499 22.2475 22.3544 22.2475 21.2499L22.2475 12.7499C22.2475 11.6453 21.352 10.7499 20.2475 10.7499L18.9975 10.7499"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path
          d="M17.9975 12.2499L13.9975 12.2499C13.4452 12.2499 12.9975 11.8022 12.9975 11.2499L12.9975 9.74988C12.9975 9.19759 13.4452 8.74988 13.9975 8.74988L17.9975 8.74988C18.5498 8.74988 18.9975 9.19759 18.9975 9.74988L18.9975 11.2499C18.9975 11.8022 18.5498 12.2499 17.9975 12.2499Z"
          stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path d="M13.7475 16.2499L18.2475 16.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <path d="M13.7475 19.2499L18.2475 19.2499" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        </path>
        <g class="opacity-0">
          <path d="M15.9975 5.99988L15.9975 3.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M19.9975 5.99988L20.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
          <path d="M11.9975 5.99988L10.9975 4.99988" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          </path>
        </g>
      </svg>
    </div>
  </div>
</div>
  </template>
  <template x-if="active_tab === 'watch_metrics'">
    <div>
    <dl class="grid grid-cols-1 mt-6 md:grid-cols-2 xl:grid-cols-1 gap-y-4" x-show="!disableAnalytics">

  <div class="flex flex-none w-full gap-x-4">
    <dt class="flex-none">
      <span class="sr-only">Views</span>
      <svg fill="none" stroke="currentColor" stroke-width="1.5" class="w-6 h-6 text-gray-400" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z" />
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z" />
      </svg>

    </dt>
    <dd class="text-sm leading-6 text-gray-500">This video has been watched <span class="font-semibold text-gray-700">2,508</span> times</dd>
  </div>


  <div class="flex flex-none w-full gap-x-4">
    <dt class="flex-none">
      <span class="sr-only">Unique Views</span>
      <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0z"/></svg>

    </dt>
    <dd class="text-sm leading-6 text-gray-500"><span class="font-semibold text-gray-700">2,100</span> unique viewers have watched this video</dd>
  </div>


  <div class="flex flex-none w-full gap-x-4">
    <dt class="flex-none">
      <span class="sr-only">Total Watch Time</span>
      <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"/></svg>
    </dt>
    <dd class="text-sm leading-6 text-gray-500">Viewers have spent a total of <span class="font-semibold text-gray-700">5,020 hours</span> watching this video</dd>
  </div>


  <div class="flex flex-none w-full gap-x-4">
    <dt class="flex-none">
      <span class="sr-only">Average Watch Time</span>
      <svg fill="none" stroke="currentColor" stroke-width="1.5" class="w-6 h-6 text-gray-400" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
      </svg>
    </dt>
    <dd class="text-sm leading-6 text-gray-500">On average, viewers watch this video for <span class="font-semibold text-gray-700">12 minutes</span></dd>

  </div>

  <div class="flex flex-none w-full gap-x-4">
    <dt class="flex-none">
      <span class="sr-only">Bandwidth</span>
      <svg fill="none" stroke="currentColor" stroke-width="1.5" class="w-6 h-6 text-gray-400" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75z" />
      </svg>
    </dt>
    <dd class="text-sm leading-6 text-gray-500">This video has consumed <span class="font-semibold text-gray-700">150 GB</span> of bandwidth so far</dd>
  </div>
</dl>
    <dl class="grid grid-cols-1 mt-6 xl:grid-cols-1 gap-y-4" x-show="disableAnalytics">
  <div class="rounded-md bg-blue-50 p-4">
    <div class="flex">
      <div class="flex-shrink-0">
        <svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd" />
        </svg>
      </div>
      <div class="ml-3">
        <h3 class="text-sm font-medium text-blue-800">Watch Metrics isn't included in your current plan.</h3>
        <div class="mt-2 text-sm text-blue-700">
          <p>To unlock this and access view counts, average watch duration and more, kindly contact TPStreams Support.</p>
        </div>
      </div>
    </div>
  </div>
</dl>

    </div>
  </template>
  <template x-if="active_tab === 'analytics'">
    <div>
    <div x-data="{ analytics_tab: 'overview', ...chartComponent() }" x-show="!disableAnalytics">

  <!-- Overview Section (kept as is) -->
  <div>
    <div class="flex items-center justify-end mt-4">
      <button type="button"
        class="relative inline-flex items-center justify-center flex-shrink-0 w-10 h-5 rounded-full cursor-pointer group focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2"
        role="switch" :aria-checked="showSeparate.toString()" @click="toggleCharts">
        <span class="sr-only">Use setting</span>
        <span aria-hidden="true" class="absolute w-full h-full bg-white rounded-md pointer-events-none"></span>
        <span aria-hidden="true"
          class="absolute h-4 mx-auto transition-colors duration-200 ease-in-out bg-gray-200 rounded-full pointer-events-none w-9"
          :class="{ 'bg-blue-600': showSeparate }"></span>
        <span aria-hidden="true"
          class="absolute left-0 inline-block w-5 h-5 transition-transform duration-200 ease-in-out transform translate-x-0 bg-white border border-gray-200 rounded-full shadow pointer-events-none ring-0"
          :class="{ 'translate-x-5': showSeparate }"></span>
      </button>
      <span class="ml-3 text-sm" id="annual-billing-label">
        <span class="font-medium text-gray-900">Split Charts</span>
      </span>
    </div>

    <div class="flex justify-center">
      <div id="views_chart" :hidden="!showSeparate" class="w-80 h-52 sm:w-[600px] sm:h-[400px] md:w-[700px] sm:w-[600px] sm:h-[400px] md:h-[400px] 2xl:w-[1000px] 2xl:h-[500px] mt-4"></div>
    </div>
    <div class="flex justify-center">
      <div id="minutes_watched_chart" :hidden="!showSeparate" class="w-80 h-52 sm:w-[600px] sm:h-[400px] md:w-[700px] sm:w-[600px] sm:h-[400px] md:h-[400px] 2xl:w-[1000px] 2xl:h-[500px] mt-4"></div>
    </div>
    <div class="flex justify-center">
      <div id="chart" :hidden="showSeparate" class="w-80 h-52 sm:w-[600px] sm:h-[400px] md:w-[700px] sm:w-[600px] sm:h-[400px] md:h-[400px] 2xl:w-[1000px] 2xl:h-[500px] mt-4"></div>
    </div>
  </div>

  <!-- New Analytics Boxes Section -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8 mb-8 px-20">
    
    <!-- Regions Box -->
    <div class="bg-white rounded-lg border border-gray-200 shadow-sm relative w-full max-w-md overflow-hidden" style="aspect-ratio: 7/6;" x-data="locationAnalytics()" x-init="initMap()">
  <!-- Location Analytics Container -->
  <div class="relative px-3 pt-3 pb-2 h-full flex flex-col">
    <!-- Header with Title and Tabs -->
    <div class="flex items-center justify-between mb-2 pt-3 pl-3">
      <!-- Title -->
      <h3 class="text-lg font-semibold text-gray-800">Locations</h3>
      
      <!-- Location Tabs -->
      <div class="flex space-x-3">
        <button @click="location_tab = 'map'; setTimeout(() => initMapSafely(), 50)" 
                class="text-xs font-medium transition-colors cursor-pointer px-2 py-1"
                :class="location_tab === 'map' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-700'">
          Map
        </button>
        <button @click="location_tab = 'countries'; setTimeout(() => initCountriesChart(), 50)" 
                class="text-xs font-medium transition-colors cursor-pointer px-2 py-1"
                :class="location_tab === 'countries' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-700'">
          Countries
        </button>
        <button @click="location_tab = 'states'; if(!selectedCountry) selectedCountry = 'IND'; setTimeout(() => initStatesChart(), 50)" 
                class="text-xs font-medium transition-colors cursor-pointer px-2 py-1"
                :class="location_tab === 'states' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-700'">
          States
        </button>
      </div>
    </div>
    <!-- Content Area -->
    <div class="flex-1 flex items-stretch justify-center overflow-hidden">
      <!-- Map View -->
      <div x-show="location_tab === 'map'" class="w-full h-full">
        <div id="world-map" class="w-full h-full"></div>
      </div>

      <!-- Countries Flow Chart -->
      <div x-show="location_tab === 'countries'" class="w-full h-full flex flex-col">
        <!-- Column Headers -->
        <div class="flex justify-between items-center px-4 pt-2 pb-0 flex-shrink-0">
          <h4 class="text-sm font-medium text-gray-600">Country</h4>
          <h4 class="text-sm font-medium text-gray-600 pr-2">Views</h4>
        </div>
        <!-- Chart Container -->
        <div class="flex-1 min-h-0">
          <div id="countries-chart" class="w-full h-full"></div>
        </div>
      </div>

      <!-- States Flow Chart -->
      <div x-show="location_tab === 'states'" class="w-full h-full flex flex-col">
        <!-- Column Headers -->
        <div class="flex justify-between items-center px-4 pt-2 pb-0 flex-shrink-0">
          <h4 class="text-sm font-medium text-gray-600">State</h4>
          <h4 class="text-sm font-medium text-gray-600 pr-2">Views</h4>
        </div>
        <!-- Chart Container -->
        <div class="flex-1 min-h-0">
          <div id="states-chart" class="w-full h-full"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function locationAnalytics() {
  return {
    location_tab: 'map',
    map: null,
    countriesChart: null,
    statesChart: null,
    selectedCountry: null,
    resizeListenerAdded: false,
    resizeTimeout: null,
    countryStatesData: {
      'USA': [
        {value: 845, name: 'California'},
        {value: 623, name: 'Texas'},
        {value: 445, name: 'New York'},
        {value: 334, name: 'Florida'},
        {value: 261, name: 'Illinois'}
      ],
      'IND': [
        {value: 456, name: 'Maharashtra'},
        {value: 289, name: 'Karnataka'},
        {value: 234, name: 'Delhi'},
        {value: 189, name: 'Tamil Nadu'},
        {value: 156, name: 'Gujarat'},
        {value: 110, name: 'West Bengal'}
      ],
      'GBR': [
        {value: 334, name: 'London'},
        {value: 189, name: 'Manchester'},
        {value: 156, name: 'Birmingham'},
        {value: 123, name: 'Liverpool'},
        {value: 90, name: 'Leeds'}
      ],
      'AUS': [
        {value: 267, name: 'New South Wales'},
        {value: 189, name: 'Victoria'},
        {value: 156, name: 'Queensland'},
        {value: 123, name: 'Western Australia'},
        {value: 54, name: 'South Australia'}
      ],
      'BRA': [
        {value: 234, name: 'São Paulo'},
        {value: 178, name: 'Rio de Janeiro'},
        {value: 123, name: 'Minas Gerais'},
        {value: 110, name: 'Bahia'}
      ],
      'CAN': [
        {value: 223, name: 'Ontario'},
        {value: 134, name: 'Quebec'},
        {value: 123, name: 'British Columbia'},
        {value: 87, name: 'Alberta'}
      ]
    },
    initMap() {
      // Prevent multiple Datamap instances - return early if map already exists
      if (this.map) {
        return;
      }
      
      // Use Alpine's $nextTick to ensure DOM is ready
      this.$nextTick(() => {
        // Check if we're on the map tab and container is visible
        if (this.location_tab !== 'map') {
          return; // Don't initialize if not on map tab
        }
        
        const mapElement = document.getElementById('world-map');
        
        // Ensure container exists and has dimensions
        if (!mapElement || !this.isContainerReady(mapElement)) {
          // Retry after a short delay if container not ready
          setTimeout(() => this.initMap(), 100);
          return;
        }
        
        // Check if libraries are loaded
        if (typeof Datamap === 'undefined' || typeof d3 === 'undefined') {
          console.log('Map libraries not loaded yet, retrying...');
          setTimeout(() => this.initMap(), 200);
          return;
        }
        
        // Clear any existing content
        mapElement.innerHTML = '';
        
        const data = {
          'USA': { fillKey: 'high', views: 2508 },
          'IND': { fillKey: 'high', views: 1434 },
          'GBR': { fillKey: 'medium', views: 892 },
          'AUS': { fillKey: 'medium', views: 789 },
          'BRA': { fillKey: 'medium', views: 645 },
          'CAN': { fillKey: 'medium', views: 567 }
        };

        // Use final colors directly - no transition needed
        const mapFills = {
          'high': '#1e40af',
          'medium': '#3b82f6',
          'low': '#93c5fd',
          defaultFill: '#f3f4f6'
        };

        this.map = new Datamap({
          element: mapElement,
          projection: 'mercator',
          responsive: true,
          aspectRatio: 0.6,
          setProjection: function(element) {
            // Calculate truly adaptive scale for full map visibility
            var containerWidth = element.offsetWidth;
            var containerHeight = element.offsetHeight;
            
            // For Mercator projection, use more conservative scaling to prevent cropping
            var baseScale = Math.min(containerWidth / 6, containerHeight / 3.8);
            
            // Add extra padding to ensure full visibility including northern regions
            var paddingFactor = 0.9;
            var scale = baseScale * paddingFactor;
            
            // Ensure minimum scale for very small screens
            scale = Math.max(scale, 45);
            
            var projection = d3.geo.mercator()
              .center([0, 10])  // Slight southern offset to show more of the north
              .scale(scale)
              .translate([containerWidth / 2, containerHeight * 0.55]); // Move map slightly down
            var path = d3.geo.path().projection(projection);
            return {path: path, projection: projection};
          },
          fills: mapFills, // Use final colors directly
          data: data,
          geographyConfig: {
            borderWidth: 1,
            borderColor: '#6b7280',
            popupTemplate: function(geography, data) {
              if (!data) return null;
              
              var countryName = geography.properties.NAME || 
                              geography.properties.name || 
                              geography.properties.NAME_LONG || 
                              geography.properties.ADMIN || 
                              geography.id || 
                              'Unknown';
              
              // Get country flag code - map to proper country codes
              var flagCode = geography.id.toLowerCase();
              var flagMapping = {
                'usa': 'us',
                'ind': 'in', 
                'gbr': 'gb',
                'aus': 'au',
                'bra': 'br',
                'can': 'ca'
              };
              var actualFlagCode = flagMapping[flagCode] || flagCode;
              
              // Detect browser zoom level and adjust popup size accordingly
              var zoomLevel = window.devicePixelRatio || 1;
              var screenWidth = window.innerWidth;
              
              // Calculate responsive popup dimensions based on zoom and screen size
              var baseWidth = 100;
              var basePadding = 10;
              var baseFontSize = 12;
              var baseSmallFontSize = 10;
              var baseFlagSize = 12;
              
              // Adjust for zoom level - smaller popup when zoomed in
              var zoomAdjustment = Math.max(0.7, Math.min(1.2, 1 / Math.sqrt(zoomLevel)));
              
              // Adjust for screen size
              var screenAdjustment = screenWidth < 640 ? 0.85 : screenWidth < 1024 ? 0.95 : 1;
              
              var finalAdjustment = zoomAdjustment * screenAdjustment;
              
              var popupWidth = Math.round(baseWidth * finalAdjustment);
              var popupPadding = Math.round(basePadding * finalAdjustment);
              var fontSize = Math.round(baseFontSize * finalAdjustment);
              var smallFontSize = Math.round(baseSmallFontSize * finalAdjustment);
              var flagSize = Math.round(baseFlagSize * finalAdjustment);
              
              return `<div class="bg-white rounded-xl shadow-xl" style="min-width: ${popupWidth}px; padding: ${popupPadding}px; min-height: 60px; z-index: 9999;">
                <div class="flex items-center">
                  <div class="me-3">
                    <div class="rounded-full bg-no-repeat bg-center bg-cover" style="width: ${flagSize}px; height: ${flagSize}px; background-image: url('https://flagcdn.com/w40/${actualFlagCode}.png')"></div>
                  </div>
                  <span class="font-semibold text-gray-800" style="font-size: ${fontSize}px;">${countryName}</span>
                </div>
                <div class="space-y-2">
                    <span class="text-gray-500" style="font-size: ${smallFontSize}px;">Views:</span>
                    <span class="font-medium text-gray-800" style="font-size: ${smallFontSize}px;">${data.views.toLocaleString()}</span>
                </div>
              </div>`;
            },
            highlightFillColor: false,
            highlightBorderColor: '#2563eb',
            highlightBorderWidth: 2,
          },
          done: (datamap) => {
            // Add click event
            datamap.svg.selectAll('.datamaps-subunit').on('click', (geography) => {
              const countryCode = geography.id;
              if (data[countryCode] && this.countryStatesData[countryCode]) {
                this.selectedCountry = countryCode;
                this.location_tab = 'states';
                this.$nextTick(() => this.initStatesChart());
              }
            });
          }
        });
        
        // Initialize charts
        this.initCountriesChart();
        this.initStatesChart();
        
        // Add resize listener for map responsiveness (only once)
        if (!this.resizeListenerAdded) {
          // Window resize listener
          window.addEventListener('resize', () => {
            // Debounce resize events
            clearTimeout(this.resizeTimeout);
            this.resizeTimeout = setTimeout(() => {
              if (this.map && this.location_tab === 'map') {
                // For Datamap, we need to reinitialize rather than just resize
                this.refreshMap();
              }
              if (this.countriesChart) this.countriesChart.resize();
              if (this.statesChart) this.statesChart.resize();
            }, 150);
          });
          
          // Also add ResizeObserver for better container size detection
          if (window.ResizeObserver) {
            const resizeObserver = new ResizeObserver((entries) => {
              clearTimeout(this.resizeTimeout);
              this.resizeTimeout = setTimeout(() => {
                if (this.map && this.location_tab === 'map') {
                  this.refreshMap();
                }
              }, 150);
            });
            resizeObserver.observe(mapElement);
          }
          
          this.resizeListenerAdded = true;
        }
      });
    },
    
    // Helper method to check if container is ready
    isContainerReady(element) {
      const rect = element.getBoundingClientRect();
      const computedStyle = window.getComputedStyle(element);
      
      return (
        rect.width > 0 && 
        rect.height > 0 && 
        computedStyle.display !== 'none' &&
        computedStyle.visibility !== 'hidden'
      );
    },
    
    // Method to safely initialize map when tab changes
    initMapSafely() {
      this.$nextTick(() => {
        if (this.location_tab === 'map' && !this.map) {
          this.initMap();
        }
      });
    },
    
    // Method to refresh map on resize
    refreshMap() {
      if (this.map && this.location_tab === 'map') {
        const mapElement = document.getElementById('world-map');
        if (mapElement && this.isContainerReady(mapElement)) {
          // Store current state
          const wasMapInitialized = !!this.map;
          
          // Dispose current map
          if (this.map) {
            this.map = null;
          }
          
          // Clear container
          mapElement.innerHTML = '';
          
          // Reinitialize with new dimensions
          if (wasMapInitialized) {
            this.initMap();
          }
        }
      }
    },
    
    initCountriesChart() {
      const chartElement = document.getElementById('countries-chart');
      if (chartElement && typeof echarts !== 'undefined') {
        // Wait for container to be visible and have dimensions
        const waitForContainer = () => {
          const rect = chartElement.getBoundingClientRect();
          if (rect.width === 0 || rect.height === 0) {
            setTimeout(waitForContainer, 50);
            return;
          }
          
          // Dispose existing chart if it exists to ensure fresh animation
          if (this.countriesChart) {
            this.countriesChart.dispose();
          }
          
          this.countriesChart = echarts.init(chartElement);
          this.setupCountriesChart();
        };
        
        waitForContainer();
      }
    },

    generateAlignedGraphics(chart, data) {
      if (!chart) return [];
      
      const chartHeight = chart.getHeight();
      const gridTopPercent = 5; // from grid.top: '5%'
      const gridBottomPercent = 15; // from grid.bottom: '15%'
      
      // Calculate usable height in pixels
      const topOffset = (gridTopPercent / 100) * chartHeight;
      const bottomOffset = (gridBottomPercent / 100) * chartHeight;
      const usableHeight = chartHeight - topOffset - bottomOffset;
      
      // Calculate height per bar
      const barHeight = usableHeight / data.length;
      
      return data.map((item, index) => {
        // Calculate Y position: start from top offset + half bar height + index * bar height
        const yPosition = topOffset + (barHeight / 2) + (index * barHeight);
        
        return {
          type: 'text',
          left: '87%',
          top: yPosition,
          style: {
            text: item.value.toLocaleString(),
            fontSize: 12,
            fill: '#6b7280',
            textAlign: 'right'
          }
        };
      });
    },

    setupCountriesChart() {
      if (!this.countriesChart) return;
        
      // Add resize listener for responsiveness
      if (!this.resizeListenerAdded) {
        window.addEventListener('resize', () => {
          if (this.countriesChart) this.countriesChart.resize();
          if (this.statesChart) this.statesChart.resize();
        });
        this.resizeListenerAdded = true;
      }
      
      // Country flag mapping
      const countryFlags = {
        'United States': 'us',
        'India': 'in',
        'United Kingdom': 'gb',
        'Australia': 'au',
        'Brazil': 'br',
        'Canada': 'ca'
      };

      // Sort countries by value (highest to lowest)
      const sortedCountries = [
        {value: 2508, name: 'United States'},
        {value: 1434, name: 'India'},
        {value: 892, name: 'United Kingdom'},
        {value: 789, name: 'Australia'},
        {value: 645, name: 'Brazil'},
        {value: 567, name: 'Canada'}
      ].sort((a, b) => b.value - a.value);

      const option = {
        // Add smooth animation
        animation: true,
        animationDuration: 1000,
        animationEasing: 'cubicOut',
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          formatter: function(params) {
            return params[0].name + '<br/>' + 
                   'Views: ' + params[0].value.toLocaleString() + '<br/>' +
                   '<small style="color: #6b7280;">Click to view states</small>';
          }
        },
        grid: {
          left: '5%',
          right: '15%',
          top: '5%',
          bottom: '15%',
          containLabel: false
        },
        graphic: this.generateAlignedGraphics(this.countriesChart, sortedCountries),
        xAxis: {
          type: 'value',
          show: false
        },
        yAxis: {
          type: 'category',
          data: sortedCountries.map(item => item.name),
          inverse: true,
          show: false
        },
        series: [{
          data: sortedCountries,
          type: 'bar',
          itemStyle: {
            color: '#fef3c7',
            borderRadius: [0, 4, 4, 0]
          },
          emphasis: {
            disabled: true
          },
          barWidth: '60%',
          // Add animation for bars
          animation: true,
          animationDuration: 1000,
          animationEasing: 'cubicOut',
          animationDelay: function(idx) {
            return idx * 100;
          },
          label: {
            show: true,
            position: 'insideLeft',
            color: '#374151',
            fontSize: 12,
            fontWeight: 'normal',
            offset: [10, 0],
            rich: {
              us: {
                backgroundColor: {
                  image: 'https://flagcdn.com/16x12/us.png'
                },
                width: 16,
                height: 12,
                borderRadius: 2
              },
              in: {
                backgroundColor: {
                  image: 'https://flagcdn.com/16x12/in.png'
                },
                width: 16,
                height: 12,
                borderRadius: 2
              },
              gb: {
                backgroundColor: {
                  image: 'https://flagcdn.com/16x12/gb.png'
                },
                width: 16,
                height: 12,
                borderRadius: 2
              },
              au: {
                backgroundColor: {
                  image: 'https://flagcdn.com/16x12/au.png'
                },
                width: 16,
                height: 12,
                borderRadius: 2
              },
              br: {
                backgroundColor: {
                  image: 'https://flagcdn.com/16x12/br.png'
                },
                width: 16,
                height: 12,
                borderRadius: 2
              },
              ca: {
                backgroundColor: {
                  image: 'https://flagcdn.com/16x12/ca.png'
                },
                width: 16,
                height: 12,
                borderRadius: 2
              }
            },
            formatter: function(params) {
              const flagCodes = {
                'United States': 'us',
                'India': 'in',
                'United Kingdom': 'gb',
                'Australia': 'au',
                'Brazil': 'br',
                'Canada': 'ca'
              };
              const code = flagCodes[params.data.name];
              return code ? `{${code}|}   ${params.data.name}` : params.data.name;
            }
          }
        }]
      };
      
      this.countriesChart.setOption(option);
      
      // Add click event to countries chart
      this.countriesChart.on('click', (params) => {
        const countryName = params.data.name;
        const countryCode = this.getCountryCode(countryName);
        if (countryCode && this.countryStatesData[countryCode]) {
          this.selectedCountry = countryCode;
          this.location_tab = 'states';
          this.$nextTick(() => this.initStatesChart());
        }
      });
      
      // Add hover effect for country names
      this.countriesChart.on('mouseover', (params) => {
        this.countriesChart.getZr().setCursorStyle('pointer');
        
        // Add underline effect by updating the label formatter
        const currentOption = this.countriesChart.getOption();
        const newOption = JSON.parse(JSON.stringify(currentOption));
        
        newOption.series[0].label.formatter = function(formatterParams) {
          const flagCodes = {
            'United States': 'us',
            'India': 'in',
            'United Kingdom': 'gb',
            'Australia': 'au',
            'Brazil': 'br',
            'Canada': 'ca'
          };
          const code = flagCodes[formatterParams.data.name];
          const countryName = formatterParams.data.name;
          
          if (formatterParams.dataIndex === params.dataIndex) {
            // Add underline for hovered item
            return code ? `{${code}|}   {underline|${countryName}}` : `{underline|${countryName}}`;
          } else {
            return code ? `{${code}|}   ${countryName}` : countryName;
          }
        };
        
        // Add underline style to rich text
        if (!newOption.series[0].label.rich.underline) {
          newOption.series[0].label.rich.underline = {
            textDecoration: 'underline',
            color: '#374151'
          };
        }
        
        this.countriesChart.setOption(newOption, false);
      });
      
      this.countriesChart.on('mouseout', (params) => {
        this.countriesChart.getZr().setCursorStyle('default');
        
        // Remove underline effect by restoring original formatter
        const currentOption = this.countriesChart.getOption();
        const newOption = JSON.parse(JSON.stringify(currentOption));
        
        newOption.series[0].label.formatter = function(formatterParams) {
          const flagCodes = {
            'United States': 'us',
            'India': 'in',
            'United Kingdom': 'gb',
            'Australia': 'au',
            'Brazil': 'br',
            'Canada': 'ca'
          };
          const code = flagCodes[formatterParams.data.name];
          return code ? `{${code}|}   ${formatterParams.data.name}` : formatterParams.data.name;
        };
        
        this.countriesChart.setOption(newOption, false);
      });
      
      // Final resize to ensure proper dimensions
      setTimeout(() => {
        if (this.countriesChart) this.countriesChart.resize();
      }, 100);
    },
    
    getCountryName(countryCode) {
      const countryNames = {
        'USA': 'United States',
        'IND': 'India',
        'GBR': 'United Kingdom',
        'AUS': 'Australia',
        'BRA': 'Brazil',
        'CAN': 'Canada'
      };
      return countryNames[countryCode] || countryCode;
    },

    getCountryCode(countryName) {
      const nameToCode = {
        'United States': 'USA',
        'India': 'IND',
        'United Kingdom': 'GBR',
        'Australia': 'AUS',
        'Brazil': 'BRA',
        'Canada': 'CAN'
      };
      return nameToCode[countryName] || null;
    },

    initStatesChart() {
      const chartElement = document.getElementById('states-chart');
      if (chartElement && typeof echarts !== 'undefined') {
        // Wait for container to be visible and have dimensions
        const waitForContainer = () => {
          const rect = chartElement.getBoundingClientRect();
          if (rect.width === 0 || rect.height === 0) {
            setTimeout(waitForContainer, 50);
            return;
          }
          
          // Dispose existing chart if it exists
          if (this.statesChart) {
            this.statesChart.dispose();
          }
          
          this.statesChart = echarts.init(chartElement);
          this.setupStatesChart();
        };
        
        waitForContainer();
      }
    },

    setupStatesChart() {
      if (!this.statesChart) return;
        
      // Ensure resize listener is added
      if (!this.resizeListenerAdded) {
        window.addEventListener('resize', () => {
          if (this.countriesChart) this.countriesChart.resize();
          if (this.statesChart) this.statesChart.resize();
        });
        this.resizeListenerAdded = true;
      }
      
      // Get data for selected country or default to India's states
      const statesData = this.selectedCountry && this.countryStatesData[this.selectedCountry] 
        ? this.countryStatesData[this.selectedCountry]
        : this.countryStatesData['IND'];
      
      // Get country flag for the selected country
      const countryFlagCodes = {
        'USA': 'us',
        'IND': 'in', 
        'GBR': 'gb',
        'AUS': 'au',
        'BRA': 'br',
        'CAN': 'ca'
      };
      
      const selectedCountryCode = this.selectedCountry || 'IND';
      const flagCode = countryFlagCodes[selectedCountryCode];
      
      const option = {
        // Add smooth animation
        animation: true,
        animationDuration: 1000,
        animationEasing: 'cubicOut',
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          formatter: function(params) {
            return params[0].name + '<br/>' + 
                   'Views: ' + params[0].value.toLocaleString();
          }
        },
        grid: {
          left: '5%',
          right: '15%',
          top: '5%',
          bottom: '15%',
          containLabel: false
        },
        graphic: this.generateAlignedGraphics(this.statesChart, statesData),
        xAxis: {
          type: 'value',
          show: false
        },
        yAxis: {
          type: 'category',
          data: statesData.map(item => item.name),
          inverse: true,
          show: false
        },
        series: [{
          data: statesData,
          type: 'bar',
          itemStyle: {
            color: '#fef3c7',
            borderRadius: [0, 4, 4, 0]
          },
          emphasis: {
            disabled: true
          },
          barWidth: '60%',
          // Add animation for bars
          animation: true,
          animationDuration: 1000,
          animationEasing: 'cubicOut',
          animationDelay: function(idx) {
            return idx * 100;
          },
          label: {
            show: true,
            position: 'insideLeft',
            color: '#374151',
            fontSize: 12,
            fontWeight: 'normal',
            offset: [10, 0],
            rich: {
              flag: {
                backgroundColor: {
                  image: `https://flagcdn.com/16x12/${flagCode}.png`
                },
                width: 16,
                height: 12,
                borderRadius: 2
              }
            },
            formatter: function(params) {
              return `{flag|}   ${params.data.name}`;
            }
          }
        }]
      };
      
      this.statesChart.setOption(option);
      
      // Final resize to ensure proper dimensions
      setTimeout(() => {
        if (this.statesChart) this.statesChart.resize();
      }, 100);
    }
  };
}
</script> 

    <!-- Devices Box -->
    <div class="bg-white rounded-lg border border-gray-200 shadow-sm relative w-full max-w-md overflow-hidden" style="aspect-ratio: 7/6;" x-data="deviceAnalytics()" x-init="$nextTick(() => setTimeout(() => initBrowserChart(), 100))">
  <!-- Load Iconify -->
  <script src="https://code.iconify.design/iconify-icon/3.0.0/iconify-icon.min.js"></script>
  
  <!-- Device Analytics Container -->
  <div class="relative px-3 pt-3 pb-2 h-full flex flex-col">
    <!-- Header with Title and Tabs -->
    <div class="flex items-center justify-between mb-2 pt-3 pl-3">
      <!-- Title -->
      <h3 class="text-lg font-semibold text-gray-800">Devices</h3>
      
      <!-- Device Tabs -->
      <div class="flex space-x-3">
        <button @click="device_tab = 'browser'; setTimeout(() => initBrowserChart(), 50)" 
                class="text-xs font-medium transition-colors cursor-pointer px-2 py-1"
                :class="device_tab === 'browser' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-700'">
          Browsers
        </button>
        <button @click="device_tab = 'os'; setTimeout(() => initOSChart(), 50)" 
                class="text-xs font-medium transition-colors cursor-pointer px-2 py-1"
                :class="device_tab === 'os' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-700'">
          OS
        </button>
        <button @click="device_tab = 'size'" 
                class="text-xs font-medium transition-colors cursor-pointer px-2 py-1"
                :class="device_tab === 'size' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-700'">
          Screen Size
        </button>
      </div>
    </div>
    <!-- Content Area -->
    <div class="flex-1 flex items-stretch justify-center overflow-hidden">
      <!-- Browser Chart -->
      <div x-show="device_tab === 'browser'" class="w-full h-full flex flex-col">
        <!-- Column Headers -->
        <div class="flex justify-between items-center px-4 pt-2 pb-0 flex-shrink-0">
          <h4 class="text-sm font-medium text-gray-600">Browser</h4>
          <h4 class="text-sm font-medium text-gray-600 pr-2">Views</h4>
        </div>
        <!-- Chart Container -->
        <div class="flex-1 min-h-0">
          <div id="browsers-chart" class="w-full h-full"></div>
        </div>
      </div>

      <!-- OS Chart -->
      <div x-show="device_tab === 'os'" class="w-full h-full flex flex-col">
        <!-- Column Headers -->
        <div class="flex justify-between items-center px-4 pt-2 pb-0 flex-shrink-0">
          <h4 class="text-sm font-medium text-gray-600">Operating System</h4>
          <h4 class="text-sm font-medium text-gray-600 pr-2">Views</h4>
        </div>
        <!-- Chart Container -->
        <div class="flex-1 min-h-0">
          <div id="os-chart" class="w-full h-full"></div>
        </div>
      </div>

      <!-- Size Chart -->
              <div x-show="device_tab === 'size'" class="w-full h-full flex items-center justify-center">
          <!-- Circular Progress Design -->
          <div class="grid grid-cols-2 gap-x-4 gap-y-12 w-full max-w-lg px-8">
          <!-- Desktop -->
          <div class="flex flex-col items-center">
            <div class="relative mb-1">
              <!-- Background Circle -->
              <svg class="w-20 h-20 transform -rotate-90" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                <circle cx="50" cy="50" r="40" stroke="#2563eb" stroke-width="8" fill="none" 
                        stroke-dasharray="251.2" 
                        stroke-dashoffset="125.6"
                        stroke-linecap="round"
                        class="transition-all duration-1000 ease-out"
                        style="animation: desktopProgress 2s ease-out forwards;"/>
              </svg>
              <!-- Icon in center -->
              <div class="absolute inset-0 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-600">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25" />
                </svg>
              </div>
              <!-- Value on top -->
              <div class="absolute -top-5 left-1/2 transform -translate-x-1/2">
                <span class="text-sm font-normal text-gray-800">567</span>
              </div>
            </div>
            <h3 class="text-xs font-normal text-gray-700">Desktop</h3>
          </div>

          <!-- Mobile -->
          <div class="flex flex-col items-center">
            <div class="relative mb-1">
              <!-- Background Circle -->
              <svg class="w-20 h-20 transform -rotate-90" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                <circle cx="50" cy="50" r="40" stroke="#2563eb" stroke-width="8" fill="none" 
                        stroke-dasharray="251.2" 
                        stroke-dashoffset="167.5"
                        stroke-linecap="round"
                        class="transition-all duration-1000 ease-out"
                        style="animation: mobileProgress 2s ease-out forwards;"/>
              </svg>
              <!-- Icon in center -->
              <div class="absolute inset-0 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-600">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3" />
                </svg>
              </div>
              <!-- Value on top -->
              <div class="absolute -top-5 left-1/2 transform -translate-x-1/2">
                <span class="text-sm font-normal text-gray-800">334</span>
              </div>
            </div>
            <h3 class="text-xs font-normal text-gray-700">Mobile</h3>
          </div>

          <!-- Tablet -->
          <div class="flex flex-col items-center">
            <div class="relative mb-1">
              <!-- Background Circle -->
              <svg class="w-20 h-20 transform -rotate-90" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                <circle cx="50" cy="50" r="40" stroke="#2563eb" stroke-width="8" fill="none" 
                        stroke-dasharray="251.2" 
                        stroke-dashoffset="188.4"
                        stroke-linecap="round"
                        class="transition-all duration-1000 ease-out"
                        style="animation: tabletProgress 2s ease-out forwards;"/>
              </svg>
              <!-- Icon in center -->
              <div class="absolute inset-0 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-600">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5h3m-6.75 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-15a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 4.5v15a2.25 2.25 0 0 0 2.25 2.25Z" />
                </svg>
              </div>
              <!-- Value on top -->
              <div class="absolute -top-5 left-1/2 transform -translate-x-1/2">
                <span class="text-sm font-normal text-gray-800">189</span>
              </div>
            </div>
            <h3 class="text-xs font-normal text-gray-700">Tablet</h3>
          </div>

          <!-- Others -->
          <div class="flex flex-col items-center">
            <div class="relative mb-2">
              <!-- Background Circle -->
              <svg class="w-20 h-20 transform -rotate-90" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                <circle cx="50" cy="50" r="40" stroke="#2563eb" stroke-width="8" fill="none" 
                        stroke-dasharray="251.2" 
                        stroke-dashoffset="236.3"
                        stroke-linecap="round"
                        class="transition-all duration-1000 ease-out"
                        style="animation: othersProgress 2s ease-out forwards;"/>
              </svg>
              <!-- Icon in center -->
              <div class="absolute inset-0 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-600">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                </svg>
              </div>
              <!-- Value on top -->
              <div class="absolute -top-5 left-1/2 transform -translate-x-1/2">
                <span class="text-sm font-normal text-gray-800">67</span>
              </div>
            </div>
            <h3 class="text-xs font-normal text-gray-700">Others</h3>
          </div>
        </div>
      </div>

      <!-- CSS Animations -->
      <style>
        @keyframes desktopProgress {
          from { stroke-dashoffset: 251.2; }
          to { stroke-dashoffset: 125.6; } /* 50% progress (567/1157 total) */
        }
        @keyframes mobileProgress {
          from { stroke-dashoffset: 251.2; }
          to { stroke-dashoffset: 167.5; } /* 33% progress (334/1157 total) */
        }
        @keyframes tabletProgress {
          from { stroke-dashoffset: 251.2; }
          to { stroke-dashoffset: 188.4; } /* 25% progress (189/1157 total) */
        }
        @keyframes othersProgress {
          from { stroke-dashoffset: 251.2; }
          to { stroke-dashoffset: 236.3; } /* 6% progress (67/1157 total) */
        }
      </style>
    </div>
  </div>
</div>

<script>
function deviceAnalytics() {
  return {
    device_tab: 'browser',
    browserChart: null,
    osChart: null,
    resizeListenerAdded: false,

    initBrowserChart() {
      const chartElement = document.getElementById('browsers-chart');
      if (chartElement && typeof echarts !== 'undefined') {
        // Wait for container to be visible and have dimensions
        const waitForContainer = () => {
          const rect = chartElement.getBoundingClientRect();
          if (rect.width === 0 || rect.height === 0) {
            setTimeout(waitForContainer, 50);
            return;
          }
          
          // Dispose existing chart if it exists to ensure fresh animation
          if (this.browserChart) {
            this.browserChart.dispose();
          }
          
          this.browserChart = echarts.init(chartElement);
          
          // Preload icons to reduce delay
          this.preloadBrowserIcons().then(() => {
            this.setupBrowserChart();
          });
        };
        
        waitForContainer();
      }
    },
    
    preloadBrowserIcons() {
      return new Promise((resolve) => {
        const iconUrls = [
          'https://cdnjs.cloudflare.com/ajax/libs/browser-logos/75.0.1/chrome/chrome_16x16.png',
          'https://cdnjs.cloudflare.com/ajax/libs/browser-logos/75.0.1/safari/safari_16x16.png',
          'https://cdnjs.cloudflare.com/ajax/libs/browser-logos/75.0.1/firefox/firefox_16x16.png',
          'https://cdnjs.cloudflare.com/ajax/libs/browser-logos/75.0.1/edge/edge_16x16.png',
          'https://cdnjs.cloudflare.com/ajax/libs/browser-logos/75.0.1/opera/opera_16x16.png'
        ];
        
        let loadedCount = 0;
        const totalIcons = iconUrls.length;
        
        // If all icons load quickly, proceed
        iconUrls.forEach(url => {
          const img = new Image();
          img.onload = img.onerror = () => {
            loadedCount++;
            if (loadedCount === totalIcons) {
              resolve();
            }
          };
          img.src = url;
        });
        
        // Don't wait more than 1 second for icons
        setTimeout(resolve, 1000);
      });
    },

    generateAlignedGraphics(chart, data) {
      if (!chart) return [];
      
      const chartHeight = chart.getHeight();
      const gridTopPercent = 5; // from grid.top: '5%'
      const gridBottomPercent = 15; // from grid.bottom: '15%'
      
      // Calculate usable height in pixels
      const topOffset = (gridTopPercent / 100) * chartHeight;
      const bottomOffset = (gridBottomPercent / 100) * chartHeight;
      const usableHeight = chartHeight - topOffset - bottomOffset;
      
      // Calculate height per bar
      const barHeight = usableHeight / data.length;
      
      return data.map((item, index) => {
        // Calculate Y position: start from top offset + half bar height + index * bar height
        const yPosition = topOffset + (barHeight / 2) + (index * barHeight);
        
        return {
          type: 'text',
          left: '87%',
          top: yPosition,
          style: {
            text: item.value.toLocaleString(),
            fontSize: 12,
            fill: '#6b7280',
            textAlign: 'right'
          }
        };
      });
    },
    
    setupBrowserChart() {
      if (!this.browserChart) return;
        
      // Add resize listener for responsiveness
      if (!this.resizeListenerAdded) {
        window.addEventListener('resize', () => {
          if (this.browserChart) this.browserChart.resize();
          if (this.osChart) this.osChart.resize();
        });
        this.resizeListenerAdded = true;
      }
        
      // Browser data sorted by value (highest to lowest)
      const browserData = [
        {value: 845, name: 'Chrome'},
        {value: 623, name: 'Safari'},
        {value: 456, name: 'Firefox'},
        {value: 234, name: 'Edge'},
        {value: 156, name: 'Opera'},
        {value: 89, name: 'Other'}
      ].sort((a, b) => b.value - a.value);
      
      // Browser icon mapping for iconify
      const browserIcons = {
        'Chrome': 'logos:chrome',
        'Safari': 'logos:safari',
        'Firefox': 'logos:firefox',
        'Edge': 'logos:microsoft-edge',
        'Opera': 'logos:opera',
        'Other': 'material-symbols:more-horiz'
      };
      
      const option = {
        // Add smooth animation
        animation: true,
        animationDuration: 1000,
        animationEasing: 'cubicOut',
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          formatter: function(params) {
            return params[0].name + '<br/>' + 
                   'Views: ' + params[0].value.toLocaleString();
          }
        },
        grid: {
          left: '5%',
          right: '15%',
          top: '5%',
          bottom: '15%',
          containLabel: false
        },
        graphic: this.generateAlignedGraphics(this.browserChart, browserData),
        xAxis: {
          type: 'value',
          show: false
        },
        yAxis: {
          type: 'category',
          data: browserData.map(item => item.name),
          inverse: true,
          show: false
        },
        series: [{
          data: browserData,
          type: 'bar',
          itemStyle: {
            color: '#fef3c7',
            borderRadius: [0, 4, 4, 0]
          },
          emphasis: {
            disabled: true
          },
          barWidth: '60%',
          // Add animation for bars
          animation: true,
          animationDuration: 1000,
          animationEasing: 'cubicOut',
          animationDelay: function(idx) {
            return idx * 100;
          },
          label: {
            show: true,
            position: 'insideLeft',
            color: '#374151',
            fontSize: 12,
            fontWeight: 'normal',
            offset: [10, 0],
            rich: {
              chrome: {
                backgroundColor: {
                  image: 'https://cdnjs.cloudflare.com/ajax/libs/browser-logos/75.0.1/chrome/chrome_16x16.png'
                },
                width: 16,
                height: 16,
                borderRadius: 2
              },
              safari: {
                backgroundColor: {
                  image: 'https://cdnjs.cloudflare.com/ajax/libs/browser-logos/75.0.1/safari/safari_16x16.png'
                },
                width: 16,
                height: 16,
                borderRadius: 2
              },
              firefox: {
                backgroundColor: {
                  image: 'https://cdnjs.cloudflare.com/ajax/libs/browser-logos/75.0.1/firefox/firefox_16x16.png'
                },
                width: 16,
                height: 16,
                borderRadius: 2
              },
              edge: {
                backgroundColor: {
                  image: 'https://cdnjs.cloudflare.com/ajax/libs/browser-logos/75.0.1/edge/edge_16x16.png'
                },
                width: 16,
                height: 16,
                borderRadius: 2
              },
              opera: {
                backgroundColor: {
                  image: 'https://cdnjs.cloudflare.com/ajax/libs/browser-logos/75.0.1/opera/opera_16x16.png'
                },
                width: 16,
                height: 16,
                borderRadius: 2
              }
            },
            formatter: function(params) {
              const browserCodes = {
                'Chrome': 'chrome',
                'Safari': 'safari',
                'Firefox': 'firefox',
                'Edge': 'edge',
                'Opera': 'opera'
              };
              const code = browserCodes[params.data.name];
              return code ? `{${code}|}   ${params.data.name}` : params.data.name;
            }
          }
        }]
      };
      
      this.browserChart.setOption(option);
      
      // Final resize to ensure proper dimensions
      setTimeout(() => {
        if (this.browserChart) this.browserChart.resize();
      }, 100);
    },
    
    initOSChart() {
      const chartElement = document.getElementById('os-chart');
      if (chartElement && typeof echarts !== 'undefined') {
        // Wait for container to be visible and have dimensions
        const waitForContainer = () => {
          const rect = chartElement.getBoundingClientRect();
          if (rect.width === 0 || rect.height === 0) {
            setTimeout(waitForContainer, 50);
            return;
          }
          
          // Dispose existing chart if it exists to ensure fresh animation
          if (this.osChart) {
            this.osChart.dispose();
          }
          
          this.osChart = echarts.init(chartElement);
          
          // Preload icons to reduce delay
          this.preloadOSIcons().then(() => {
            this.setupOSChart();
          });
        };
        
        waitForContainer();
      }
    },
    
    preloadOSIcons() {
      return new Promise((resolve) => {
        const iconUrls = [
          'https://img.icons8.com/color/16/000000/windows-10.png',
          'https://img.icons8.com/color/16/000000/mac-os.png',
          'https://img.icons8.com/color/16/000000/android-os.png',
          'https://img.icons8.com/color/16/000000/ios-logo.png',
          'https://img.icons8.com/color/16/000000/linux.png'
        ];
        
        let loadedCount = 0;
        const totalIcons = iconUrls.length;
        
        // If all icons load quickly, proceed
        iconUrls.forEach(url => {
          const img = new Image();
          img.onload = img.onerror = () => {
            loadedCount++;
            if (loadedCount === totalIcons) {
              resolve();
            }
          };
          img.src = url;
        });
        
        // Don't wait more than 1 second for icons
        setTimeout(resolve, 1000);
      });
    },
    
    setupOSChart() {
      if (!this.osChart) return;
        
      // Ensure resize listener is added
      if (!this.resizeListenerAdded) {
        window.addEventListener('resize', () => {
          if (this.browserChart) this.browserChart.resize();
          if (this.osChart) this.osChart.resize();
        });
        this.resizeListenerAdded = true;
      }
      
      // OS data sorted by value (highest to lowest)
      const osData = [
        {value: 734, name: 'Windows'},
        {value: 623, name: 'macOS'},
        {value: 456, name: 'Android'},
        {value: 334, name: 'iOS'},
        {value: 189, name: 'Linux'},
        {value: 67, name: 'Other'}
      ].sort((a, b) => b.value - a.value);
      
      // OS icon mapping for iconify
      const osIcons = {
        'Windows': 'logos:microsoft-windows',
        'macOS': 'logos:apple',
        'Android': 'logos:android-icon',
        'iOS': 'logos:apple',
        'Linux': 'logos:linux-tux',
        'Other': 'material-symbols:more-horiz'
      };
      
      const option = {
        // Add smooth animation
        animation: true,
        animationDuration: 1000,
        animationEasing: 'cubicOut',
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          formatter: function(params) {
            return params[0].name + '<br/>' + 
                   'Views: ' + params[0].value.toLocaleString();
          }
        },
        grid: {
          left: '5%',
          right: '15%',
          top: '5%',
          bottom: '15%',
          containLabel: false
        },
        graphic: this.generateAlignedGraphics(this.osChart, osData),
        xAxis: {
          type: 'value',
          show: false
        },
        yAxis: {
          type: 'category',
          data: osData.map(item => item.name),
          inverse: true,
          show: false
        },
        series: [{
          data: osData,
          type: 'bar',
          itemStyle: {
            color: '#fef3c7',
            borderRadius: [0, 4, 4, 0]
          },
          emphasis: {
            disabled: true
          },
          barWidth: '60%',
          // Add animation for bars
          animation: true,
          animationDuration: 1000,
          animationEasing: 'cubicOut',
          animationDelay: function(idx) {
            return idx * 100;
          },
          label: {
            show: true,
            position: 'insideLeft',
            color: '#374151',
            fontSize: 12,
            fontWeight: 'normal',
            offset: [10, 0],
            rich: {
              windows: {
                backgroundColor: {
                  image: 'https://img.icons8.com/color/16/000000/windows-10.png'
                },
                width: 16,
                height: 16,
                borderRadius: 2
              },
              macos: {
                backgroundColor: {
                  image: 'https://img.icons8.com/color/16/000000/mac-os.png'
                },
                width: 16,
                height: 16,
                borderRadius: 2
              },
              android: {
                backgroundColor: {
                  image: 'https://img.icons8.com/color/16/000000/android-os.png'
                },
                width: 16,
                height: 16,
                borderRadius: 2
              },
              ios: {
                backgroundColor: {
                  image: 'https://img.icons8.com/color/16/000000/ios-logo.png'
                },
                width: 16,
                height: 16,
                borderRadius: 2
              },
              linux: {
                backgroundColor: {
                  image: 'https://img.icons8.com/color/16/000000/linux.png'
                },
                width: 16,
                height: 16,
                borderRadius: 2
              }
            },
            formatter: function(params) {
              const osCodes = {
                'Windows': 'windows',
                'macOS': 'macos',
                'Android': 'android',
                'iOS': 'ios',
                'Linux': 'linux'
              };
              const code = osCodes[params.data.name];
              return code ? `{${code}|}   ${params.data.name}` : params.data.name;
            }
          }
        }]
      };
      
      this.osChart.setOption(option);
      
      // Final resize to ensure proper dimensions
      setTimeout(() => {
        if (this.osChart) this.osChart.resize();
      }, 100);
    }
  };
}
</script> 

  </div>
</div>

  
    <dl class="grid grid-cols-1 mt-6 xl:grid-cols-1 gap-y-4" x-show="disableAnalytics">
  <div class="rounded-md bg-blue-50 p-4">
    <div class="flex">
      <div class="flex-shrink-0">
        <svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd" />
        </svg>
      </div>
      <div class="ml-3">
        <h3 class="text-sm font-medium text-blue-800">Analytics isn't included in your current plan.</h3>
        <div class="mt-2 text-sm text-blue-700">
          <p>To unlock this and access average views per day, per month and more, kindly contact TPStreams Support.</p>
        </div>
      </div>
    </div>
  </div>  
</dl>
    </div>
  </template>
  <template x-if="active_tab === 'thumbnails'">
    <div class="max-w-4xl">
  <div class="relative mt-4" x-data="clipboardComponent()">
    <h3 class="mt-4 text-sm font-semibold leading-6 text-gray-900">Thumbnail</h3>
    <p class="text-gray-500 text-sm leading-6">Choose or upload a compelling thumbnail to represent your video, visible before playback begins.</p>

    <!-- Upload New Thumbnail Section -->
    <div class="mt-4" x-data="{ isFileSelected: false, fileName: '', fileInput: null }">
      <ul role="list" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-y-0.5 sm:gap-y-1.5 xl:gap-y-2.5 gap-x-0.5 sm:gap-x-1.5 xl:gap-x-2.5">
        <li class="relative">
          <div class="group aspect-h-7 aspect-w-10 block w-full overflow-hidden bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100">
            <div class="flex justify-center items-center pointer-events-none object-cover group-hover:opacity-75">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <!-- input to store the uploaded thumbnail -->
            <input type="file" name="file" id="fileInput"
            x-on:change="
            isFileSelected = true;
            fileName = $event.target.files[0].name;
            fileInput = $event.target;
            $nextTick(() => $refs.thumbnail_form.submit());"
            class="opacity-0 absolute inset-0 focus:outline-none" accept=".png, .jpeg, .jpg" />
          </div>
        </li>

        <!-- Display Existing Thumbnails Section -->
        
          <li class="relative" x-data="">
            <div x-data="{ isPortrait: false }" class="group block w-full bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 relative">
              <div class="aspect-h-7 aspect-w-10">
                <img src="https://images.unsplash.com/photo-1582053433976-25c00369fc93?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=512&amp;q=80" class="object-contain w-full h-full" x-on:load="isPortrait = $event.target.naturalHeight > $event.target.naturalWidth">
              </div>
              <button type="button" class="absolute inset-0 focus:outline-none"
                x-on:click="
                  document.getElementById('path').value = thumbnailValue;
                  $refs.thumbnail_form.submit();
                ">
                <span class="sr-only">Select thumbnail</span>
              </button>
              <!-- Cross button to delete thumbnail -->
              <div class="absolute top-2 right-2 z-10">
                <button type="button" class="size-7 inline-flex justify-center items-center gap-x-1.5 font-medium text-sm rounded-full border border-stone-200 bg-white text-stone-600 shadow-sm hover:bg-stone-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-stone-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-remove-element="#dismiss-img1">
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                  </svg>
                </button>
              </div>
            </div>
          </li>
        
          <li class="relative" x-data="">
            <div x-data="{ isPortrait: false }" class="group block w-full bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 relative">
              <div class="aspect-h-7 aspect-w-10">
                <img src="https://images.unsplash.com/photo-1614926857083-7be149266cda?ixlib=rb-1.2.1&amp;ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;auto=format&amp;fit=crop&amp;w=512&amp;q=80" class="object-contain w-full h-full" x-on:load="isPortrait = $event.target.naturalHeight > $event.target.naturalWidth">
              </div>
              <button type="button" class="absolute inset-0 focus:outline-none"
                x-on:click="
                  document.getElementById('path').value = thumbnailValue;
                  $refs.thumbnail_form.submit();
                ">
                <span class="sr-only">Select thumbnail</span>
              </button>
              <!-- Cross button to delete thumbnail -->
              <div class="absolute top-2 right-2 z-10">
                <button type="button" class="size-7 inline-flex justify-center items-center gap-x-1.5 font-medium text-sm rounded-full border border-stone-200 bg-white text-stone-600 shadow-sm hover:bg-stone-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-stone-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-remove-element="#dismiss-img1">
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                  </svg>
                </button>
              </div>
            </div>
          </li>
        
          <li class="relative" x-data="">
            <div x-data="{ isPortrait: false }" class="group block w-full bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 relative">
              <div class="aspect-h-7 aspect-w-10">
                <img src="https://images.unsplash.com/photo-1614705827065-62c3dc488f40?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=512&amp;q=80" class="object-contain w-full h-full" x-on:load="isPortrait = $event.target.naturalHeight > $event.target.naturalWidth">
              </div>
              <button type="button" class="absolute inset-0 focus:outline-none"
                x-on:click="
                  document.getElementById('path').value = thumbnailValue;
                  $refs.thumbnail_form.submit();
                ">
                <span class="sr-only">Select thumbnail</span>
              </button>
              <!-- Cross button to delete thumbnail -->
              <div class="absolute top-2 right-2 z-10">
                <button type="button" class="size-7 inline-flex justify-center items-center gap-x-1.5 font-medium text-sm rounded-full border border-stone-200 bg-white text-stone-600 shadow-sm hover:bg-stone-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-stone-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-remove-element="#dismiss-img1">
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                  </svg>
                </button>
              </div>
            </div>
          </li>
        
          <li class="relative" x-data="">
            <div x-data="{ isPortrait: false }" class="group block w-full bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 relative">
              <div class="aspect-h-7 aspect-w-10">
                <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=512&amp;q=80" class="object-contain w-full h-full" x-on:load="isPortrait = $event.target.naturalHeight > $event.target.naturalWidth">
              </div>
              <button type="button" class="absolute inset-0 focus:outline-none"
                x-on:click="
                  document.getElementById('path').value = thumbnailValue;
                  $refs.thumbnail_form.submit();
                ">
                <span class="sr-only">Select thumbnail</span>
              </button>
              <!-- Cross button to delete thumbnail -->
              <div class="absolute top-2 right-2 z-10">
                <button type="button" class="size-7 inline-flex justify-center items-center gap-x-1.5 font-medium text-sm rounded-full border border-stone-200 bg-white text-stone-600 shadow-sm hover:bg-stone-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-stone-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-remove-element="#dismiss-img1">
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                  </svg>
                </button>
              </div>
            </div>
          </li>
        
          <li class="relative" x-data="">
            <div x-data="{ isPortrait: false }" class="group block w-full bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 relative">
              <div class="aspect-h-7 aspect-w-10">
                <img src="https://images.unsplash.com/photo-1586348943529-beaae6c28db9?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=512&amp;q=80" class="object-contain w-full h-full" x-on:load="isPortrait = $event.target.naturalHeight > $event.target.naturalWidth">
              </div>
              <button type="button" class="absolute inset-0 focus:outline-none"
                x-on:click="
                  document.getElementById('path').value = thumbnailValue;
                  $refs.thumbnail_form.submit();
                ">
                <span class="sr-only">Select thumbnail</span>
              </button>
              <!-- Cross button to delete thumbnail -->
              <div class="absolute top-2 right-2 z-10">
                <button type="button" class="size-7 inline-flex justify-center items-center gap-x-1.5 font-medium text-sm rounded-full border border-stone-200 bg-white text-stone-600 shadow-sm hover:bg-stone-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-stone-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-remove-element="#dismiss-img1">
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                  </svg>
                </button>
              </div>
            </div>
          </li>
        
          <li class="relative" x-data="">
            <div x-data="{ isPortrait: false }" class="group block w-full bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 relative">
              <div class="aspect-h-7 aspect-w-10">
                <img src="https://images.unsplash.com/photo-1497436072909-60f360e1d4b1?ixlib=rb-1.2.1&amp;ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;auto=format&amp;fit=crop&amp;w=512&amp;q=80" class="object-contain w-full h-full" x-on:load="isPortrait = $event.target.naturalHeight > $event.target.naturalWidth">
              </div>
              <button type="button" class="absolute inset-0 focus:outline-none"
                x-on:click="
                  document.getElementById('path').value = thumbnailValue;
                  $refs.thumbnail_form.submit();
                ">
                <span class="sr-only">Select thumbnail</span>
              </button>
              <!-- Cross button to delete thumbnail -->
              <div class="absolute top-2 right-2 z-10">
                <button type="button" class="size-7 inline-flex justify-center items-center gap-x-1.5 font-medium text-sm rounded-full border border-stone-200 bg-white text-stone-600 shadow-sm hover:bg-stone-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-stone-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-remove-element="#dismiss-img1">
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                  </svg>
                </button>
              </div>
            </div>
          </li>
        
          <li class="relative" x-data="">
            <div x-data="{ isPortrait: false }" class="group block w-full bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 relative">
              <div class="aspect-h-7 aspect-w-10">
                <img src="https://images.unsplash.com/photo-1547036967-23d11aacaee0?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=512&amp;q=80" class="object-contain w-full h-full" x-on:load="isPortrait = $event.target.naturalHeight > $event.target.naturalWidth">
              </div>
              <button type="button" class="absolute inset-0 focus:outline-none"
                x-on:click="
                  document.getElementById('path').value = thumbnailValue;
                  $refs.thumbnail_form.submit();
                ">
                <span class="sr-only">Select thumbnail</span>
              </button>
              <!-- Cross button to delete thumbnail -->
              <div class="absolute top-2 right-2 z-10">
                <button type="button" class="size-7 inline-flex justify-center items-center gap-x-1.5 font-medium text-sm rounded-full border border-stone-200 bg-white text-stone-600 shadow-sm hover:bg-stone-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-stone-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-remove-element="#dismiss-img1">
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                  </svg>
                </button>
              </div>
            </div>
          </li>
        
      </ul>
      <!-- Hidden input to store the selected thumbnail path -->
      <input type="hidden" name="path" id="path" value="">
      <!-- Hidden input to store the thumbnail URL to delete -->
      <input type="hidden" name="thumbnail_url" id="thumbnail_url_to_delete" value="">
    </div>
  </div>
</div>

  </template>
  <template x-if="active_tab === 'chapters'">
    <div>
      <div class="max-w-4xl" x-data="clipboardComponent()">
  <div class="relative mt-4" >
    <h3 class="mt-4 text-sm font-semibold leading-6 text-gray-900">Chapters</h3>
    <p class="text-gray-500 text-sm leading-6 mb-3">Break up your video into chapters for easier browsing! Add titles and start times (within the 9:58 total video length) to let viewers jump right to what interests them.</p>
  </div>
  <form method="GET" class="group" novalidate onkeydown="return event.key != 'Enter';">
      <div>        
      
      <!-- Dynamic input elements -->
          <template x-for="(chapter, index) in chapters" :key="index">   
              <div class="mb-6">
                  <div class="flex space-x-4 items-center" x-ref="inputs">
                      <div class="">
                          <input type="text"
                              x-ref="input"
                              x-model="chapter.starttime"
                              max="00:19"
                              x-on:input="handleUserInput($event)"
                              placeholder="MM:SS"
                              type="text"
                              :id="'timeInput-' + index"
                              maxlength="8"
                              @click="handleClickFocus($event)" 
                              @keydown="handleKeydown($event,index)"
                              @change="insertAndApplyValidations($event);checkForErrors($event,chapter);handleStartTimeChange(index,chapters)"
                              @focus="handleInputFocus($event)" 
                              class="w-32 block appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-blue-600 sm:text-sm focus:outline-none focus:ring-blue-600 sm:text-sm invalid:border-red-500 invalid:text-red-900"
                              data-hide-seconds
                            >
                      </div>

                      <div class="">
                          <input 
                              x-model="chapter.title"
                              class="block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-blue-600 sm:text-sm peer" 
                              type="text" 
                              placeholder="Title"
                              :id="'titleInput-' + index"
                              @change="handleStartTimeChange(index)"
                              x-ref="titleInput"
                              @keydown.enter="handletitleEnter(index);"
                              required
                          >
                      </div>


                      <div class="">
                          <button type="button" @click="deleteChapter(index)" class="rounded-md border-0 py-1.5 text-gray-900 sm:text-sm sm:leading-6">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                              <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                            </svg>
                          </button>
                      </div>  

                  </div>
                  <p :id="'starttime-error-' + index" class="mt-2 mb-2 text-sm text-red-600 hidden">Duplicate start time found.</p>
                 <div class="mt-2 mb-2 text-sm text-red-600" x-show="chapter.showError">Chapter time doesn't fit the video length.</div>
              </div>
          </template>
          <div class="flex mt-2 mb-3 space-x-4">
              <button type="button" 
                  @click="addChapter(); $nextTick(() => { $refs.input.focus(); });"
                  class="inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                  </svg>
                  <span>Add Chapter</span>
              </button>

              <button type="submit" class="save-button inline-flex items-center rounded-md bg-blue-700 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 group-invalid:pointer-events-none group-invalid:opacity-30">
                  <span>Save Chapter</span>
              </button> 
          </div>
      </div>
  </form>
</div>
<script>
  var controlsElements = document.getElementsByClassName('controls');
  var videoduration = 598;

  // Convert the HTMLCollection to an array for easier manipulation
  var controlsArray = Array.from(controlsElements);

  // Iterate over each controls element and remove it
  controlsArray.forEach(function(element) {
      element.remove();
  });
  function clipboardComponent() {
    return {
      chapters: [
        
        { starttime: '00:00', title: 'chapter 1', showError: false },
        
        { starttime: '00:05', title: 'chapter 2', showError: false },
        
        { starttime: '00:15', title: 'chapter 3', showError: false },
        
      ],
      previousInput:[],
      init() {
        this.$nextTick(() => {
          this.chapters.forEach((chapter, index) => {
            const inputBox = document.getElementById('timeInput-' + index);
            //this.initializeInputBox(inputBox);
          });
        });
      },
      handletitleEnter(index) {
        const nextIndex = index + 1;
        const nextInputId = 'timeInput-' + nextIndex;
        const nextInput = document.getElementById(nextInputId);
  
        if (nextInput) {
          nextInput.focus();
        }
        else{
          this.addChapter();
          setTimeout(() => {
            const nextInput = document.getElementById(nextInputId);
            nextInput.focus();
          }); 
        }
      },  
      checkForErrors(event,chapter) {
        const eventDuration = this.durationToSeconds(event.target.value);
        const input = event.target;
        if(videoduration<eventDuration){
          chapter.showError = true;
          input.setCustomValidity("No Duplicate");
          //input.reportValidity();
        }
        else{
          input.setCustomValidity("");
          chapter.showError = false;
        }
      },
      addChapter() {
        this.chapters.push({ starttime: '', title: '', showError: false });
      },
      handleStartTimeChange(index) {
        const hasDuplicateStartTimes = this.checkForDuplicateStartTimes(index);
        this.updateSaveButtonAndInputStyles(hasDuplicateStartTimes, index);
      },
      checkForDuplicateStartTimes(excludeIndex) {
        const startTime = this.chapters[excludeIndex].starttime;
        return this.chapters.some((chapter, i) => chapter.starttime === startTime && i !== excludeIndex);
      },
      updateSaveButtonAndInputStyles(hasDuplicate, index) {
        const saveButton = document.querySelector('.save-button');
        saveButton.disabled = hasDuplicate;
        document.getElementById('starttime-error-' + index).classList.toggle('hidden', !hasDuplicate);
        const timeInput = document.getElementById('timeInput-' + index);
        timeInput.classList.toggle('text-red-900', hasDuplicate);
        timeInput.classList.toggle('border-red-500', hasDuplicate);
        saveButton.classList.toggle('opacity-50', hasDuplicate);
        saveButton.classList.toggle('cursor-not-allowed', hasDuplicate);
        saveButton.classList.toggle('text-red-900', hasDuplicate);
      },
      deleteChapter(index) {
        const deletedStartTime = this.chapters[index].starttime;
        this.chapters.splice(index, 1);
        const uniqueIndex = this.checkDuplicateAndReturnUniqueIndex(deletedStartTime);
        if (uniqueIndex !== undefined)
          this.updateSaveButtonAndInputStyles(false, uniqueIndex);
      },
      checkDuplicateAndReturnUniqueIndex(startTime) {
        let index;
        for (let i = 0; i < this.chapters.length; i++) {
          const chapter = this.chapters[i];
          if (chapter.starttime === startTime) {
            if (index === undefined) {
              index = i;
            } else {
              return null;
            }
          }
        }
        return index;
      },

      getCursorSelection(event, hideHours) {
        const { target: { selectionStart, selectionEnd, value } } = event;
        const hourMarker = value.indexOf(':');
        const minuteMarker = value.lastIndexOf(':');
        let cursorSelection;
        if (selectionStart <= hourMarker) {
          cursorSelection = 'hours';
        } else if (hideHours || selectionStart <= minuteMarker) {
          cursorSelection = 'minutes';
        } else if (!hideHours && selectionStart > minuteMarker) {
          cursorSelection = 'seconds';
        }
        const content = value.slice(selectionStart, selectionEnd);
        this.cursorSelection = cursorSelection;
        return { cursorSelection, hideHours, hourMarker, minuteMarker, content };
      },
      checkForErrors(event,chapter) {
        const eventDuration = this.durationToSeconds(event.target.value);
        const input = event.target;
        if(videoduration<eventDuration){
          chapter.showError = true;
          input.setCustomValidity("No Duplicate");
          //input.reportValidity();
        }
        else{
          input.setCustomValidity("");
          chapter.showError = false;
        }
      },

      updateActiveAdjustmentFactor(inputBox, adjustmentFactor) {
        inputBox.setAttribute('data-adjustment-factor', adjustmentFactor);
      },
      getAdjustmentFactor(inputBox) {
        let adjustmentFactor = 1;
        if (Number(inputBox.getAttribute('data-adjustment-factor')) > 0) {
          adjustmentFactor = Number(inputBox.getAttribute('data-adjustment-factor'));
        }
        return adjustmentFactor;
      },
      shouldHideHours(){
        return true;
      },
      focusNextInputField(inputBox){
        const index = parseInt(inputBox.id.split('-')[1], 10);
        const nextInputId = 'titleInput-' + index;
        const nextInput = document.getElementById(nextInputId);
        nextInput.focus()
      },
      handleKeydown(event) {
        const changeValueKeys = ['ArrowDown', 'ArrowUp', 'ArrowLeft', 'ArrowRight', 'Enter'];
        const adjustmentFactor = this.getAdjustmentFactor(event.target);

        if (changeValueKeys.includes(event.key)) {
          switch (event.key) {
            case 'ArrowLeft':
              this.shiftTimeUnitAreaFocus(event.target, 'left');
              break;
            case 'ArrowRight':
              this.shiftTimeUnitAreaFocus(event.target, 'right');
              break;
            case 'Enter':
              this.insertAndApplyValidations(event);
              this.focusNextInputField(event.target)
              event.target.blur();
              break;
            default:
          }
          event.preventDefault();
        }
      },
      highlightTimeUnitArea(inputBox, adjustmentFactor) {
        const hourMarker = inputBox.value.indexOf(':');
        const minuteMarker = inputBox.value.lastIndexOf(':');
        const hideHours = this.shouldHideHours(inputBox);
        const sectioned = inputBox.value.split(':');
        if (adjustmentFactor >= 60 * 60) {
          inputBox.selectionStart = 0; // hours mode
          inputBox.selectionEnd = hourMarker;
        } else if (!hideHours && adjustmentFactor < 60) {
          inputBox.selectionStart = minuteMarker + 1; // seconds mode
          inputBox.selectionEnd = minuteMarker + 1 + sectioned[2].length;
        } else {
          inputBox.selectionStart = hourMarker + 1; // minutes mode
          inputBox.selectionEnd = hourMarker + 1 + sectioned[1].length;
          adjustmentFactor = 60;
        }

        if (adjustmentFactor >= 1 && adjustmentFactor <= 3600) {
          inputBox.setAttribute('data-adjustment-factor', adjustmentFactor);
        }
      },
      shiftTimeUnitAreaFocus(inputBox, direction){
        const adjustmentFactor = this.getAdjustmentFactor(inputBox);
        switch (direction) {
          case 'left':
            this.highlightTimeUnitArea(inputBox, adjustmentFactor < 3600 ? adjustmentFactor * 60 : 3600);
            break;
          case 'right':
            this.highlightTimeUnitArea(inputBox, adjustmentFactor > 60 ? adjustmentFactor / 60 : 1);
            break;
          default:
        }
      },
      handleClickFocus(event) {
        const inputBox = event.target;
        const hideHours = this.shouldHideHours(inputBox);
        const { cursorSelection, hourMarker, minuteMarker } = this.getCursorSelection(event, hideHours);

        if (!cursorSelection) {
          return;
        }

        const cursorAdjustmentFactor = hideHours ? 3 : 0;
        switch (cursorSelection) {
          case 'hours':
            this.updateActiveAdjustmentFactor(inputBox, 3600);
            event.target.setSelectionRange(0, hourMarker);
            return;
          case 'minutes':
            this.updateActiveAdjustmentFactor(inputBox, 60);
            event.target.setSelectionRange(hourMarker + 1, minuteMarker + cursorAdjustmentFactor);
            return;
          case 'seconds':
            this.updateActiveAdjustmentFactor(inputBox, 1);
            event.target.setSelectionRange(minuteMarker + 1, minuteMarker + 3);
            return;
          default:
            this.updateActiveAdjustmentFactor(inputBox, 1);
            event.target.setSelectionRange(minuteMarker + 1, minuteMarker + 3);
            return;
        }
      },

      //handling input

      createEvent(type, option = { bubbles: false, cancelable: false }) {
        const event = document.createEvent('Event');
        event.initEvent(type, option.bubbles, option.cancelable);
        return event;
      },
      getMinMaxConstraints(inputBox){
        const minDuration = this.getDurationAttributeValue(inputBox, 'durationMin', 0);
        const maxDuration = this.getDurationAttributeValue(
          inputBox,
          'durationMax',
          99 * 3600 + 59 * 60 + 59,
        ); // by default 99:99:99 is now new max
        return {
          minDuration,
          maxDuration,
        }
      },
      applyMinMaxConstraints(inputBox, value){
        const { maxDuration, minDuration } = this.getMinMaxConstraints(inputBox);
        return Math.min(Math.max(value, minDuration), maxDuration);
      },
      insertAndApplyValidations(event){
        const inputBox = event.target;
        const duration = inputBox.value || inputBox.dataset.duration;
        const secondsValue = this.durationToSeconds(duration);
        this.insertFormatted(inputBox, this.applyMinMaxConstraints(inputBox, secondsValue));
      },
      getDurationAttributeValue(inputBox, name, defaultValue){
        const value = inputBox.dataset[name];
        if (value && isValidDurationFormat(value, shouldHideHours(inputBox))) {
          return durationToSeconds(value);
        } else {
          return defaultValue;
        }
      },
      getInitialDuration(inputBox){
        const duration = this.getDurationAttributeValue(inputBox, 'duration', 0);
        const secondsValue = this.durationToSeconds(duration);
        return this.applyMinMaxConstraints(inputBox, secondsValue);
      },
      handleInputFocus(event){
        // get input selection
        const inputBox = event.target;
        const {maxDuration} = this.getMinMaxConstraints(inputBox);
        const maxHourInput = Math.floor(maxDuration / 3600);
        const charsForHours = maxHourInput < 1 ? 0 : maxHourInput.toString().length;

        if(inputBox.value==''){
          const index = parseInt(inputBox.id.split('-')[1], 10);
            if(this.shouldHideHours()){
              inputBox.value = "00:00"
            }
            else{
              inputBox.value = "00:00:00"
            }
            this.previousInput[index]=inputBox.value
            this.highlightTimeUnitArea(inputBox, 3600);
        }
    
        /* this is for firefox and safari, when you focus using tab key, both selectionStart
        and selectionEnd are 0, so manually trigger hour seleciton. */
        if (
          (event.target.selectionEnd === 0 && event.target.selectionStart === 0) ||
          event.target.selectionEnd - event.target.selectionStart > charsForHours ||
          charsForHours === 0
        ) {
          setTimeout(() => {
            inputBox.focus();
            inputBox.select();
            this.highlightTimeUnitArea(inputBox, 3600);
          }, 1);
        }
      },
      validateValue(value, hideHours, constraints){
        const sectioned = value.split(':');
        const colonCount = (value.match(/:/g) || []).length;
        if (sectioned.length < 2) {
          return hideHours ? '00:00' : '00:00:00';
        }
        let mustUpdateValue;
        if (hideHours) {
          // if the input does not have a single ":" or is like "01:02:03:04:05", then reset the input
          if (!hideHours && sectioned.length !== 2) {
            return '00:00'; // fallback to default
          }
          // if hour (hh) input is not a number or negative set it to 0
          if (isNaN(sectioned[0])) {
            sectioned[0] = '00';
            mustUpdateValue = true;
          }

          // if minture (ss) input is not a number or negative set it to 0
          if(sectioned[0]==''){
            sectioned[0] = '00';
            mustUpdateValue = true;
          }
          if (isNaN(sectioned[1]) || sectioned[1] < 0 || sectioned[1]=='') {
            sectioned[1] = '00';
            mustUpdateValue = true;
          }
          // if minutes (mm) more than 5, include 0 at begining to 06 0r 07 
          
          if (sectioned[1][0] > 5) {
            sectioned[1] = '0'+sectioned[1][0];
            mustUpdateValue = true;
          }
          if (sectioned[0][0] > 5) {
            sectioned[0] = '0'+sectioned[0][0];
            mustUpdateValue = true;
          }
          if (mustUpdateValue) {
            return sectioned.join(':');
          }
        } else {
          // if the input does not have 2 ":" or is like "01:02:03:04:05", then reset the input
          if (!hideHours && sectioned.length !== 3) {
            return '00:00:00'; // fallback to default
          }
          // if hour (hh) input is not a number or negative set it to 0
          if (isNaN(sectioned[0])) {
            sectioned[0] = '00';
            mustUpdateValue = true;
          }
          // if minutes (mm) input is not a number or negative set it to 0
          if (isNaN(sectioned[1]) || sectioned[1] < 0) {
            sectioned[1] = '00';
            mustUpdateValue = true;
          }
          if(sectioned[1]==''){
            sectioned[1] = '00';
            mustUpdateValue = true;
          }
          if(sectioned[0]==''){
            sectioned[0] = '00';
            mustUpdateValue = true;
          }
          if(sectioned[2]==''){
            sectioned[2] = '00';
            mustUpdateValue = true;
          }
          // if minutes (mm) more than 59, set it to 59
          if (sectioned[1][0] > 5) {
            sectioned[1][0] = '0'+sectioned[1][0];
            mustUpdateValue = true;
          }
          // if seconds(ss) input is not a number or negative set it to 0
          if (isNaN(sectioned[2]) || sectioned[2] < 0) {
            sectioned[2] = '00';
            mustUpdateValue = true;
          }
          // if seconds (ss) more than 59, set it to 59
          if (sectioned[2][0] > 5) {
            sectioned[2] = '0'+sectioned[2][0];
            mustUpdateValue = true;
          }
          if (mustUpdateValue) {
            return sectioned.join(':');
          }
        }
        return false;
      },
      durationToSeconds(value){
        if (!/:/.test(value)) {
          return 0;
        }
        const sectioned = value.split(':');
        if (sectioned.length < 2) {
          return 0;
        } else if(!this.shouldHideHours()){
          return (
            Number(sectioned[2] ? (sectioned[2] > 59 ? 59 : sectioned[2]) : 0) +
            Number((sectioned[1] > 59 ? 59 : sectioned[1]) * 60) +
            Number(sectioned[0] * 60 * 60)
          );
        }
        else{
          return (
            Number(sectioned[1] ? (sectioned[2] > 59 ? 59 : sectioned[1]) : 0) +
            Number((sectioned[0] > 59 ? 59 : sectioned[0]) * 60)
          );
        }
      },
      secondsToDuration(value, hideHours){
        let secondsValue = value;
        const hours = Math.floor(secondsValue / 3600);
        if(!hideHours)
          secondsValue %= 3600;
        const minutes = Math.floor(secondsValue / 60);
        const seconds = secondsValue % 60;
        const formattedHours = String(hours).padStart(2, '0');
        const formattedMinutes = String(minutes).padStart(2, '0');
        const formattedSeconds = String(seconds).padStart(2, '0');
        return hideHours
          ? `${formattedMinutes}:${formattedSeconds}`
          : `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;
      },
      insertFormatted(inputBox, secondsValue, dispatchSyntheticEvents, adjustmentFactor = 1){
        const hideHours = this.shouldHideHours(inputBox);
        const formattedValue = this.secondsToDuration(secondsValue, hideHours);
        const existingValue = inputBox.value;
        const index = parseInt(inputBox.id.split('-')[1], 10);
        // Don't use setValue method here because
        // it breaks the arrow keys and arrow buttons control over the input
        inputBox.value = formattedValue;
        this.chapters[index].starttime=formattedValue

        // save current cursor location for automatic increase

        // manually trigger an "input" event for other event listeners
        if (dispatchSyntheticEvents !== false) {
          if (existingValue != formattedValue) {
            inputBox.dispatchEvent(this.createEvent('change', {bubbles: true, cancelable: true}));
          }
          inputBox.dispatchEvent(this.createEvent('input'));
        }
        inputBox.setAttribute('data-adjustment-factor', adjustmentFactor);
        this.highlightTimeUnitArea(inputBox, adjustmentFactor);
      },
      handleUserInput(event){
        const inputBox = event.target;
        const sectioned = inputBox.value.split(':');
        const index = parseInt(inputBox.id.split('-')[1], 10);

        const hideHours = this.shouldHideHours(inputBox);
        const {cursorSelection} = this.getCursorSelection(event, hideHours);

        if ((sectioned.length < 2) ||(sectioned.length < 3 && !hideHours)) {
          const constrainedValue = this.applyMinMaxConstraints(inputBox, this.getInitialDuration(inputBox));
          let value = inputBox.value
          value = value.replace(/[^0-9]/g, ''); // Remove all non-numeric characters
          value = value.replace(/(\d{2})(?=\d)/g, '$1:');
          value = this.durationToSeconds(value)
          if(inputBox.value[2]!=':'){
            this.insertFormatted(inputBox, value, false,60);
          }
          else{
            this.insertFormatted(inputBox, value, false,1);
          }
          this.shiftTimeUnitAreaFocus(inputBox, 'left');
          return;
        }
    
        const {maxDuration} = this.getMinMaxConstraints(inputBox);
        const maxHourInput = Math.floor(maxDuration / 3600);
        const charsForHours = maxHourInput < 1 ? 0 : maxHourInput.toString().length;
    
        // MODE :  Hours hidden
        if (hideHours){
          const mustUpdateValue = this.validateValue(event.target.value, true);
          if (mustUpdateValue !== false) {
            const constrainedValue = this.applyMinMaxConstraints(
              event.target,
              this.durationToSeconds(mustUpdateValue),
            );
            this.insertFormatted(event.target, constrainedValue, false);
          }
          if(event.inputType!='deleteContentBackward'){
          // done entering hours, so shift highlight to minutes
            if (
              (charsForHours < 1 && cursorSelection === 'hours') ||
              (sectioned[0].length >= charsForHours && cursorSelection === 'hours')
              ){
                if (charsForHours < 1) {
                  sectioned[0] = '00';
                }
                this.shiftTimeUnitAreaFocus(inputBox, 'right');
            }
            // done entering minutes, so just highlight minutes
            if (sectioned[1].length >= 2 && cursorSelection === 'minutes') {
              this.highlightTimeUnitArea(inputBox, 60);
            }
          }
          else{
            if(cursorSelection === 'minutes'){
              this.highlightTimeUnitArea(inputBox, 60);
            }
            if(cursorSelection === 'hours'){
              this.highlightTimeUnitArea(inputBox, 3600);
            }
          }
        } 
            // MODE :  Default (hours not hidden)

        else {
          const mustUpdateValue = this.validateValue(event.target.value, false);
    
          if (mustUpdateValue !== false) {
            const constrainedValue = this.applyMinMaxConstraints(
              event.target,
              this.durationToSeconds(mustUpdateValue),
            );
            this.insertFormatted(event.target, constrainedValue, false);
          }
          // done entering hours, so shift highlight to minutes
          if (
            (charsForHours < 1 && cursorSelection === 'hours') ||
            (sectioned[0].length >= charsForHours && cursorSelection === 'hours')
          ) {
            if (charsForHours < 1) {
              sectioned[0] = '00';
            }
            this.shiftTimeUnitAreaFocus(inputBox, 'right');
          }
    
          // done entering minutes, so shift highlight to seconds
          if (sectioned[1].length >= 2 && cursorSelection === 'minutes') {
            this.shiftTimeUnitAreaFocus(inputBox, 'right');
          }
          // done entering seconds, just highlight seconds
          if (sectioned[2].length >= 2 && cursorSelection === 'seconds') {
            this.highlightTimeUnitArea(inputBox, 1);
          }
        }
      }
    }
  }
</script>


    </div>
  </template>
  <template x-if="active_tab === 'captions'">
    <div>
      <div class="max-w-3xl" x-show="!disableAnalytics">
  <div class="relative" class="mt-2">
    <div class="flex justify-between items-center mt-2">
      <h2 class="text-sm font-semibold leading-7 text-gray-900">Captions</h3>
        <button type="button" @click="showCreateCaptionModel = !showCreateCaptionModel"
          class="text-sm font-semibold leading-6 text-blue-600 hover:text-blue-500"><span aria-hidden="true">+</span>
          Upload Caption</button>
    </div>
    <div class="mt-2 text-sm text-gray-900 sm:col-span-2">
      <ul role="list" class="divide-y divide-gray-100 rounded-md border border-gray-200">
        
        <template x-if="!false">
          <li class="flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6">
  <div class="flex w-0 flex-1 items-center">
    <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd"
        d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z"
        clip-rule="evenodd" />
    </svg>
    <div class="ml-4 flex min-w-0 flex-1 gap-2">
      <span class="truncate font-medium">English(auto-generated).srt</span>
      <span class="flex-shrink-0 text-gray-400">1.4mb</span>
    </div>
  </div>
  <div class="ml-4 flex-shrink-0 flex">
    <div class="relative inline-block text-left" x-data="{showMenu:false}">
      <div>
        <button @click="showMenu = !showMenu" @click.away="showMenu=false" type="button"
          class="flex items-center rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:ring-offset-gray-100"
          id="menu-button" aria-expanded="true" aria-haspopup="true">
          <span class="sr-only">Open options</span>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path
              d="M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM10 8.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM11.5 15.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" />
          </svg>
        </button>
      </div>
      <div x-cloak x-show="showMenu"
        class="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
        role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"
        x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95"
        x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75"
        x-transition:leave-start="transform opacity-100 scale-100"
        x-transition:leave-end="transform opacity-0 scale-95">
        <div class="py-1" role="none">
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-1">Disable</a>
          
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
            id="menu-item-2">Download</a>
        </div>
      </div>
    </div>
  </div>
</li>
        </template>
        
        <template x-if="!false">
          <li class="flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6">
  <div class="flex w-0 flex-1 items-center">
    <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd"
        d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z"
        clip-rule="evenodd" />
    </svg>
    <div class="ml-4 flex min-w-0 flex-1 gap-2">
      <span class="truncate font-medium">Tamil.srt</span>
      <span class="flex-shrink-0 text-gray-400">1.0mb</span>
    </div>
  </div>
  <div class="ml-4 flex-shrink-0 flex">
    <div class="relative inline-block text-left" x-data="{showMenu:false}">
      <div>
        <button @click="showMenu = !showMenu" @click.away="showMenu=false" type="button"
          class="flex items-center rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:ring-offset-gray-100"
          id="menu-button" aria-expanded="true" aria-haspopup="true">
          <span class="sr-only">Open options</span>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path
              d="M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM10 8.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM11.5 15.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" />
          </svg>
        </button>
      </div>
      <div x-cloak x-show="showMenu"
        class="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
        role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"
        x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95"
        x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75"
        x-transition:leave-start="transform opacity-100 scale-100"
        x-transition:leave-end="transform opacity-0 scale-95">
        <div class="py-1" role="none">
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-1">Disable</a>
          
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
            id="menu-item-1">Delete</a>
          
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
            id="menu-item-2">Download</a>
        </div>
      </div>
    </div>
  </div>
</li>
        </template>
        
        <template x-if="!true">
          <li class="flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6">
  <div class="flex w-0 flex-1 items-center">
    <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd"
        d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z"
        clip-rule="evenodd" />
    </svg>
    <div class="ml-4 flex min-w-0 flex-1 gap-2">
      <span class="truncate font-medium">Malayalam.srt</span>
      <span class="flex-shrink-0 text-gray-400">1.2mb</span>
    </div>
  </div>
  <div class="ml-4 flex-shrink-0 flex">
    <div class="relative inline-block text-left" x-data="{showMenu:false}">
      <div>
        <button @click="showMenu = !showMenu" @click.away="showMenu=false" type="button"
          class="flex items-center rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:ring-offset-gray-100"
          id="menu-button" aria-expanded="true" aria-haspopup="true">
          <span class="sr-only">Open options</span>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path
              d="M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM10 8.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM11.5 15.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" />
          </svg>
        </button>
      </div>
      <div x-cloak x-show="showMenu"
        class="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
        role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"
        x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95"
        x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75"
        x-transition:leave-start="transform opacity-100 scale-100"
        x-transition:leave-end="transform opacity-0 scale-95">
        <div class="py-1" role="none">
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-1">Enable</a>
          
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
            id="menu-item-1">Delete</a>
          
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
            id="menu-item-2">Download</a>
        </div>
      </div>
    </div>
  </div>
</li>
        </template>
        
      </ul>
    </div>
  </div>
  <div class="relative" class="mt-2">
    <h2 class="mt-4 text-sm font-semibold leading-6 text-gray-900">Disabled</h3>
      <div class="mt-2 text-sm text-gray-900 sm:col-span-2">
        <ul role="list" class="divide-y divide-gray-100 rounded-md border border-gray-200">
          
          <template x-if="false">
            <li class="flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6">
  <div class="flex w-0 flex-1 items-center">
    <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd"
        d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z"
        clip-rule="evenodd" />
    </svg>
    <div class="ml-4 flex min-w-0 flex-1 gap-2">
      <span class="truncate font-medium">English(auto-generated).srt</span>
      <span class="flex-shrink-0 text-gray-400">1.4mb</span>
    </div>
  </div>
  <div class="ml-4 flex-shrink-0 flex">
    <div class="relative inline-block text-left" x-data="{showMenu:false}">
      <div>
        <button @click="showMenu = !showMenu" @click.away="showMenu=false" type="button"
          class="flex items-center rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:ring-offset-gray-100"
          id="menu-button" aria-expanded="true" aria-haspopup="true">
          <span class="sr-only">Open options</span>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path
              d="M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM10 8.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM11.5 15.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" />
          </svg>
        </button>
      </div>
      <div x-cloak x-show="showMenu"
        class="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
        role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"
        x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95"
        x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75"
        x-transition:leave-start="transform opacity-100 scale-100"
        x-transition:leave-end="transform opacity-0 scale-95">
        <div class="py-1" role="none">
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-1">Disable</a>
          
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
            id="menu-item-2">Download</a>
        </div>
      </div>
    </div>
  </div>
</li>
          </template>
          
          <template x-if="false">
            <li class="flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6">
  <div class="flex w-0 flex-1 items-center">
    <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd"
        d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z"
        clip-rule="evenodd" />
    </svg>
    <div class="ml-4 flex min-w-0 flex-1 gap-2">
      <span class="truncate font-medium">Tamil.srt</span>
      <span class="flex-shrink-0 text-gray-400">1.0mb</span>
    </div>
  </div>
  <div class="ml-4 flex-shrink-0 flex">
    <div class="relative inline-block text-left" x-data="{showMenu:false}">
      <div>
        <button @click="showMenu = !showMenu" @click.away="showMenu=false" type="button"
          class="flex items-center rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:ring-offset-gray-100"
          id="menu-button" aria-expanded="true" aria-haspopup="true">
          <span class="sr-only">Open options</span>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path
              d="M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM10 8.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM11.5 15.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" />
          </svg>
        </button>
      </div>
      <div x-cloak x-show="showMenu"
        class="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
        role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"
        x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95"
        x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75"
        x-transition:leave-start="transform opacity-100 scale-100"
        x-transition:leave-end="transform opacity-0 scale-95">
        <div class="py-1" role="none">
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-1">Disable</a>
          
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
            id="menu-item-1">Delete</a>
          
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
            id="menu-item-2">Download</a>
        </div>
      </div>
    </div>
  </div>
</li>
          </template>
          
          <template x-if="true">
            <li class="flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6">
  <div class="flex w-0 flex-1 items-center">
    <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd"
        d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z"
        clip-rule="evenodd" />
    </svg>
    <div class="ml-4 flex min-w-0 flex-1 gap-2">
      <span class="truncate font-medium">Malayalam.srt</span>
      <span class="flex-shrink-0 text-gray-400">1.2mb</span>
    </div>
  </div>
  <div class="ml-4 flex-shrink-0 flex">
    <div class="relative inline-block text-left" x-data="{showMenu:false}">
      <div>
        <button @click="showMenu = !showMenu" @click.away="showMenu=false" type="button"
          class="flex items-center rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:ring-offset-gray-100"
          id="menu-button" aria-expanded="true" aria-haspopup="true">
          <span class="sr-only">Open options</span>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path
              d="M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM10 8.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM11.5 15.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" />
          </svg>
        </button>
      </div>
      <div x-cloak x-show="showMenu"
        class="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
        role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"
        x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95"
        x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75"
        x-transition:leave-start="transform opacity-100 scale-100"
        x-transition:leave-end="transform opacity-0 scale-95">
        <div class="py-1" role="none">
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-1">Enable</a>
          
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
            id="menu-item-1">Delete</a>
          
          <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
            id="menu-item-2">Download</a>
        </div>
      </div>
    </div>
  </div>
</li>
          </template>
          
        </ul>
      </div>
  </div>
</div>
      <div class="max-w-3xl" x-show="disableAnalytics">
  <div class="relative" class="mt-2">
    <div class="text-center py-10 flex flex-col items-center">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z" />
      </svg>
      <h3 class="mt-2 text-sm font-semibold text-gray-900">No Captions Uploaded Yet.</h3>
      <p class="mt-1 text-sm text-gray-500">Upload captions to make your videos accessible and engaging.</p>
      <div class="mt-6">
        <button type="button" @click="showCreateCaptionModel = !showCreateCaptionModel" class="inline-flex items-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600">
          <svg class="-ml-0.5 mr-1.5 h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z" />
          </svg>
          Add Caption
        </button>
      </div>
    </div>
  </div>
</div>

      <div x-show="showCreateCaptionModel" class="relative z-50" aria-labelledby="modal-title" role="dialog"
  aria-modal="true">
  <div x-show="showCreateCaptionModel" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200"
    x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
    class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
  <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
    <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
      <div x-show="showCreateCaptionModel" x-transition:enter="ease-out duration-300"
        x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
        x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200"
        x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
        x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
        @click.away ="showCreateCaptionModel = false"
        class="relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl sm:p-6">
        <div class="absolute right-0 top-0 hidden pr-4 pt-4 sm:block">
          <button type="button" @click="showCreateCaptionModel = false"
            class="rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
            <span class="sr-only">Close</span>
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
              aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="mt-3 sm:mt-0 sm:text-left">
          <h2 class="text-base font-semibold leading-7 text-gray-900">Upload Caption</h2>
          <p class="mt-1 text-sm leading-6 text-gray-600">Add captions, or subtitles to the videos. Supported formats
            are
            .VTT and .SRT.</p>
          <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
            <div class="sm:col-span-3">
              <label for="first-name" class="block text-sm font-medium leading-6 text-gray-900">Name</label>
              <div class="mt-2">
                <input type="text" name="first-name" id="first-name" autocomplete="given-name" placeholder="Type caption name"
                  class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6">
              </div>
            </div>
            <div class="sm:col-span-3">
              <label for="country" class="block text-sm font-medium leading-6 text-gray-900">Language</label>
              <div class="mt-2">
                <select id="country" name="country" autocomplete="country-name"
                  class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:max-w-xs sm:text-sm sm:leading-6">
                  <option selected="">Select Language</option>
                  <option value="English">English</option>
                  <option value="Tamil">Tamil</option>
                  <option value="Hindi">Hindi</option>
                </select>
              </div>
            </div>
            <div class="col-span-full border-b border-gray-900/10 pb-10"
              x-data="{ isFileSelected: false, fileName: '', fileInput: null }">
              <label for="user-photo" class="block text-sm font-medium leading-6 text-slate-900">
                Caption
              </label>
              <div class="mt-2 flex items-center" x-show="!isFileSelected">
                <div class="relative select-none">
                  <input type="file" name="login_screen_image" id="fileInput"
                    class="peer absolute inset-0 h-full w-full rounded-md opacity-0 cursor-pointer" x-on:change="
                            isFileSelected = true;
                            fileName = $event.target.files[0].name;
                            fileInput = $event.target;
                          ">
                  <label for="fileInput"
                    class="rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                    <span>Choose file</span>
                    <span class="sr-only"> caption file</span>
                  </label>
                </div>
              </div>
              <div class="mt-2 flex items-center" x-show="isFileSelected">
                <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor"
                  aria-hidden="true">
                  <path fill-rule="evenodd"
                    d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z"
                    clip-rule="evenodd" />
                </svg>
                <div class="ml-4 flex min-w-0 flex-1 gap-2">
                  <span class="text-sm leading-6 font-medium text-gray-900" x-text="fileName"></span>
                  <button class="ml-6 text-sm font-medium leading-6 text-blue-600" x-show="fileInput" x-on:click="
                      isFileSelected = false;
                      fileName = '';
                      fileInput.value = '';
                    ">
                    Remove
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
            <button type="button"
              class="inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto">Upload</button>
            <button type="button" @click="showCreateCaptionModel = false"
              class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
    </div>
  </template>  
</div>