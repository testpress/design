<!doctype html>
<html class=" ">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Eleventy v3.0.0">
  <title>Overall (Consolidated) Mindset Report</title>
  <link rel="stylesheet" href="/pr-preview/pr-724/css/tailwind.css" />
  
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
  <script>
    sans = [
        'ui-sans-serif',
        'system-ui',
        '-apple-system',
        'BlinkMacSystemFont',
        '"Segoe UI"',
        'Roboto',
        '"Helvetica Neue"',
        'Arial',
        '"Noto Sans"',
        'sans-serif',
        '"Apple Color Emoji"',
        '"Segoe UI Emoji"',
        '"Segoe UI Symbol"',
        '"Noto Color Emoji"',
    ]
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter var', ...sans],
          },
        }
      }
    }
  </script>
  
  <link rel="stylesheet" href="/pr-preview/pr-724/node_modules/apexcharts/dist/apexcharts.css">
  <style type="text/css">
    .apexcharts-tooltip.apexcharts-theme-light {
      background-color: transparent !important;
      border: none !important;
      box-shadow: none !important;
    }
    .animate-bounce-subtle {
      animation: bounce-subtle 2s infinite;
    }
    @keyframes bounce-subtle {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-4px); }
    }
  </style>


  <script defer src="https://unpkg.com/alpinejs@3.4.2/dist/cdn.min.js"></script>
  <script src="/node_modules/preline/dist/preline.js"></script>

   <style>
    [x-cloak] {
      display: none !important;
    }
  </style>
</head>

 
  <body class="antialiased h-full overflow-y-scroll min-h-screen bg-gray-100">
    <div class="min-h-full">
      
  <div x-data="consolidatedMindsetComponent()" class="py-5 max-w-7xl mx-auto lg:px-8 px-4 space-y-5">
    <div>
      <nav class="sm:hidden mb-2" aria-label="Back">
  <a href="/pr-preview/pr-724/analytics/" class="flex items-center text-sm font-medium text-gray-500 hover:text-gray-700">
    <svg class="-ml-1 mr-1 h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
    </svg>
    Back
  </a>
</nav>
<nav class="hidden sm:flex mb-2" aria-label="Breadcrumb">
  <ol role="list" class="flex items-center space-x-4">
    <li>
      <div class="flex items-center">
        <a href="#" class="text-sm font-medium text-gray-500 hover:text-gray-700">IBPS PO Prelims</a>
      </div>
    </li>
    <li>
      <div class="flex items-center">
        <svg class="shrink-0 size-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
        <a href="#" class="ml-4 text-sm font-medium text-gray-500 hover:text-gray-700" aria-current="page">Review</a>
      </div>
    </li>
    <li class="flex items-center">
      <svg class="shrink-0 size-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
      <a href="javascript:history.back()" class="ml-1 text-sm font-medium text-gray-500 hover:text-gray-700">Mindset Insights</a>
    </li>
    <li class="flex items-center">
      <svg class="shrink-0 size-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
      <span class="ml-1 text-sm font-bold text-gray-800" aria-current="page">Overall Patterns</span>
    </li>
  </ol>
</nav>
      <div class="mb-2">
  <h1 class="text-lg md:text-xl font-semibold text-gray-800">Overall Mindset Patterns</h1>
  <p class="text-sm text-gray-500 max-w-2xl mt-1">
    A summary of reflections across your last <span class="font-bold text-gray-700" x-text="data.totalReflectedExams || 0"></span> reflected exams to help you see what's holding you back and what can you do to perform better.
  </p>
</div>
    </div>
    <div class="bg-white border border-gray-200 shadow-sm rounded-xl overflow-hidden">
  <div class="py-3 px-5 border-b border-gray-200">
    <h2 class="font-semibold text-gray-800">Frequent Reasons for Errors</h2>
    <p class="text-sm text-gray-500 mt-1">
      Spotting most recurring error patterns helps you distinguish between a single bad day and long-term habits affecting your performance.
    </p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-10 gap-6 p-5 items-start">
    
    <div class="lg:col-span-4 flex justify-center lg:justify-start">
      <div id="consolidated-error-chart" class="w-full max-w-[310px] h-[310px]"></div>
    </div>

    <div class="lg:col-span-6">
      <ul class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-x-8">
        <template x-for="(label, index) in chartData.labels" :key="label">
          <li class="py-3 flex items-start gap-x-3">
            <span class="size-3 rounded-sm shrink-0 mt-1" 
                  :style="`background-color: ${colorMapper.getColor(label)}`"></span>
            
            <div class="flex flex-col">
              <span class="text-sm font-semibold text-gray-800" x-text="label"></span>
              
              <div class="flex items-center gap-x-2 mt-0.5">
                 <span class="text-xs font-medium text-gray-500" x-text="`${chartData.series[index]} Errors`"></span>
                 <span class="size-1 rounded-full bg-gray-500"></span>
                 <span class="text-xs text-gray-500" x-text="`across ${chartData.examCounts[index]} exams`"></span>
              </div>
            </div>
          </li>
        </template>
      </ul>
    </div>
  </div>
</div>
    <div class="bg-white border border-gray-200 shadow-sm rounded-xl overflow-hidden">
  <div class="py-4 px-5 border-b border-gray-200">
    <h2 class="font-semibold text-gray-800">Things to consider</h2>
    <p class="text-sm text-gray-500 mt-1">
      Based on your top mistakes, here are some tips and quizzes that might help you perform better in your next exam.
    </p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-10 gap-6 p-5">
    
    <div class="lg:col-span-4 flex flex-col">
      <div class="mb-4">
        <h3 class="text-sm font-semibold text-gray-700">Top Mindset Barriers</h3>
        <p class="text-sm text-gray-500 mt-1">
          Recurring patterns from your reflections.
        </p>
      </div>
      <div class="w-full h-64 block">
        <div id="consolidated-bubble-chart" class="w-full h-full"></div>
      </div>
    </div>

    <div class="lg:col-span-6 flex flex-col gap-y-3">
      <template x-for="error in pathway.topErrors.slice(0, 3)" :key="error.id">
        <div class="bg-white border border-gray-200 shadow-sm rounded-lg p-4 relative border-l-4" 
             :style="`border-left-color: ${colorMapper.getColor(error.reason)}`">
          <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-y-4 sm:gap-x-4">
            <div class="flex-1">
              <div class="flex items-center gap-x-2 mb-1.5">
                <span class="text-[10px] uppercase tracking-wider font-semibold text-gray-800" x-text="error.reason"></span>
                <span class="text-[10px] font-bold text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded" x-text="error.count + ' mistakes'"></span>
              </div>
              <div class="text-[13px] text-gray-600 leading-relaxed italic">
                <p x-text="error.recommendation"></p>
              </div>
            </div>
            
            <div class="shrink-0 w-full sm:w-auto self-end">
              <button @click="startPractice(error.id)"
                  class="py-2 px-3.5 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 focus:outline-hidden focus:bg-gray-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
                Practice Now
                <svg class="size-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14m-7-7 7 7-7 7"/></svg>
              </button>
            </div>
          </div>
        </div>
      </template>
    </div>
  </div>
</div>
    
    <div class="relative z-50" aria-labelledby="modal-title" role="dialog" aria-modal="true" x-show="isQuizOpen" style="display: none;">
  <div
    class="fixed inset-0 bg-gray-900/50 transition-opacity"
    x-show="isQuizOpen"
    x-transition:enter="ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
  ></div>
  <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-0 text-center sm:p-0">
      <div
        class="relative transform overflow-hidden bg-white text-left shadow-xl transition-all w-full h-[100dvh] flex flex-col dark:bg-neutral-900"
        x-show="isQuizOpen"
        x-transition:enter="ease-out duration-300"
        x-transition:enter-start="opacity-0 scale-95"
        x-transition:enter-end="opacity-100 scale-100"
        x-transition:leave="ease-in duration-200"
        x-transition:leave-start="opacity-100 scale-100"
        x-transition:leave-end="opacity-0 scale-95"
      >
        <div class="py-3 border-b border-gray-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 z-10">
          <div class="max-w-7xl mx-auto lg:px-8 px-4 flex justify-between items-center">
            <div x-show="!showSummary" class="flex items-center space-x-3 w-full">
              <h3 class="whitespace-nowrap text-gray-800 dark:text-neutral-200">
                Question <span x-text="currentIndex + 1"></span> of <span x-text="questions.length"></span>
              </h3>
              <div class="flex w-1/2 h-1.5 bg-gray-200 rounded-full overflow-hidden dark:bg-neutral-700">
                <div
                  class="flex flex-col justify-center rounded-full overflow-hidden bg-emerald-600 transition-all duration-500 dark:bg-emerald-500"
                  :style="`width: ${(currentIndex + 1) / questions.length * 100}%`"
                ></div>
              </div>
            </div>
            <div x-show="showSummary" class="w-full">
              <h3 class="whitespace-nowrap text-gray-800 dark:text-neutral-200 text-center">
                Quiz Results
              </h3>
            </div>
            <button
              x-show="!showSummary"
              @click="showSummary = true; calculateScore(); renderPracticeQuizChart();"
              type="button"
              class="ml-2 whitespace-nowrap py-1.5 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-red-500 text-white hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 shadow-sm transition-colors"
            >
              End
              <span class="hidden sm:inline"> Quiz</span>
            </button>
          </div>
        </div>

        <div x-ref="quizBody" x-show="!showSummary" class="flex-1 overflow-y-auto bg-white dark:bg-neutral-900" @touchstart="handleTouchStart" @touchend="handleTouchEnd">
          <div class="py-5 max-w-7xl mx-auto lg:px-8 px-4 space-y-5">
            <div class="mb-4">
              <span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-white/10 dark:text-white">
                <span x-text="questions[currentIndex]?.subject || 'General'"></span>
                <span class="opacity-50 mx-1">•</span>
                <span x-text="questions[currentIndex]?.reasonLabel || 'Review'"></span>
              </span>
            </div>

            <div class="mb-6">
              <h4 class="text-lg font-medium text-gray-800 dark:text-neutral-200 mb-2 leading-snug" x-html="questions[currentIndex]?.text"></h4>
            </div>

            <div class="grid grid-cols-1 gap-3">
              <template x-for="(option, idx) in questions[currentIndex]?.options" :key="idx">
                <div
                  class="option-item flex items-start justify-between p-3.5 rounded-xl border transition-all cursor-pointer select-none relative overflow-hidden group"
                  @click="selectOption(idx)"
                  :class="{
                    'border-gray-200 bg-white hover:bg-gray-50 hover:border-gray-300 dark:bg-neutral-900 dark:border-neutral-700 dark:hover:bg-neutral-800': !hasAnswered,
                    'border-emerald-500 bg-emerald-50/50 dark:bg-emerald-500/10 dark:border-emerald-500 ring-1 ring-emerald-500': hasAnswered && idx === questions[currentIndex].correctIdx,
                    'border-red-500 bg-red-50/50 dark:bg-red-500/10 dark:border-red-500': hasAnswered && idx === selectedIdx && idx !== questions[currentIndex].correctIdx,
                    'opacity-50 border-gray-200 bg-gray-50 dark:bg-neutral-800 dark:border-neutral-700': hasAnswered && idx !== questions[currentIndex].correctIdx && idx !== selectedIdx
                  }"
                >
                  <div class="flex items-start flex-1 min-w-0 z-10">
                    <span
                      class="text-sm font-semibold mr-3 flex-shrink-0 mt-0.5 w-5"
                      :class="{
                        'text-gray-500 dark:text-neutral-400 group-hover:text-gray-800 dark:group-hover:text-neutral-200': !hasAnswered,
                        'text-emerald-700 dark:text-emerald-400': hasAnswered && idx === questions[currentIndex].correctIdx,
                        'text-red-700 dark:text-red-400': hasAnswered && idx === selectedIdx && idx !== questions[currentIndex].correctIdx
                      }"
                      x-text="String.fromCharCode(65 + idx) + '.'"
                    ></span>
                    <div class="text-sm text-gray-700 dark:text-neutral-300 break-words leading-relaxed font-medium" x-html="option.text"></div>
                  </div>

                  <div class="shrink-0 ml-3 z-10">
                    <div x-show="hasAnswered && idx === questions[currentIndex].correctIdx">
                      <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
                      </svg>
                    </div>
                    <div x-show="hasAnswered && idx === selectedIdx && idx !== questions[currentIndex].correctIdx">
                      <svg class="w-5 h-5 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m15 9-6 6"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 9 6 6"></path>
                      </svg>
                    </div>
                  </div>
                </div>
              </template>
            </div>

            <div x-show="hasAnswered" x-collapse class="mt-4">
              <div class="explanation-card bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-600 rounded-lg p-4">
                <div class="flex items-center mb-3">
                  <svg class="w-4 h-4 mr-2 text-gray-600 dark:text-neutral-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                  <h5 class="text-sm font-medium text-gray-800 dark:text-neutral-200">Explanation</h5>
                </div>
                <p class="text-sm text-gray-700 dark:text-neutral-300 mb-3" x-html="questions[currentIndex]?.explanation || 'No explanation available.'"></p>
              </div>
            </div>
            <div class="h-32 md:h-24"></div>
          </div>
        </div>

        <div x-show="showSummary" x-transition class="py-5 max-w-7xl mx-auto lg:px-8 px-4 space-y-5">
  <div class="text-center mb-6">
    <div class="flex items-center justify-center gap-x-1.5">
      <h2 class="text-base font-medium text-gray-600 dark:text-neutral-400">
        Total score:
      </h2>
      <div class="flex items-center gap-x-1.5">
        <p class="text-base font-semibold text-gray-800 dark:text-neutral-200">
          <span x-text="correctAnswers"></span>/<span x-text="questions.length"></span>
        </p>
        <span class="text-sm leading-5 text-gray-500 dark:text-neutral-400">
          (<span x-text="Math.round((correctAnswers / questions.length) * 100 * 10) / 10"></span>%)
        </span>
      </div>
    </div>
  </div>

  <div class="md:col-span-3 lg:col-span-2">
    <div class="py-6">
      <div class="flex flex-col justify-center items-center">
        <div id="practice-quiz-pie-chart" class="min-h-[14rem] w-[230px] h-[230px]"></div>
        <div class="flex justify-center sm:justify-end items-center gap-x-4 mt-3 sm:mt-6">
          <div class="inline-flex items-center">
            <span class="size-2.5 inline-block bg-green-600 rounded-sm me-2"></span>
            <span class="text-[13px] text-gray-600 dark:text-neutral-400">
              Correct
            </span>
          </div>
          <div class="inline-flex items-center">
            <span class="size-2.5 inline-block bg-red-500 rounded-sm me-2"></span>
            <span class="text-[13px] text-gray-600 dark:text-neutral-400">
              Incorrect
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="flex gap-4 justify-center">
    <button
      @click="retakeQuiz"
      type="button"
      class="retake-quiz-button py-1.5 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 focus:outline-hidden focus:bg-gray-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
      <svg class="shrink-0 size-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
        <path d="M3 3v5h5"/>
        <path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/>
        <path d="M16 16h5v5"/>
      </svg>
      Retake Quiz
    </button>
    <button
      @click="closeQuiz"
      type="button"
      class="py-1.5 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 focus:outline-hidden focus:bg-gray-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
      Exit Quiz
    </button>
  </div>
</div>


        <div class="border-t border-gray-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 z-10 absolute bottom-0 w-full">
          <div class="py-5 max-w-7xl mx-auto lg:px-8 px-4">
            <div x-show="!showSummary" x-transition class="w-full flex md:justify-end justify-center space-x-2">
            <button
              @click="previousQuestion"
              x-show="currentIndex > 0"
              class="hidden md:inline-flex items-center gap-x-2 py-2 px-3.5 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 focus:outline-hidden focus:bg-gray-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700"
            >
              <svg class="shrink-0 size-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m15 18-6-6 6-6" />
              </svg>
              Previous
            </button>

            <button
              @click="nextQuestion"
              :disabled="(!hasAnswered && currentIndex < questions.length - 1) || currentIndex == questions.length - 1"
              class="hidden md:inline-flex items-center gap-x-2 py-2 px-3.5 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 focus:outline-hidden focus:bg-gray-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700"
              :class="{ 'opacity-50 cursor-not-allowed': !hasAnswered && currentIndex < questions.length - 1 }"
            >
              Next
              <svg class="shrink-0 size-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m9 18 6-6-6-6" />
              </svg>
            </button>

              <div class="md:hidden flex flex-col gap-2 w-full">
                <p class="text-[10px] text-center text-gray-400 dark:text-neutral-500 uppercase tracking-widest mt-1 font-medium animate-pulse">
                  Swipe Left to Continue, Right to Go Back
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
  </div>

    </div>

    
  <script src="https://preline.co/pro/assets/vendor/lodash/lodash.min.js"></script>
<script src="https://preline.co/pro/assets/vendor/apexcharts/dist/apexcharts.min.js"></script>
<script src="https://preline.co/pro/assets/js/hs-apexcharts-helpers.js"></script>

<script>
  function renderDonutChart(
    chartId,
    seriesData,
    seriesLabels,
    chartColors,
    chartHeight = 230,
    chartWidth = 230
  ) {
    const chartEl = document.querySelector(chartId);
    if (!chartEl) {
      console.warn(`Chart element ${chartId} not found.`);
      return;
    }
    chartEl.innerHTML = '';
    const options = (mode) => ({
      chart: {
        height: chartHeight,
        width: chartWidth,
        type: 'donut',
        zoom: { enabled: false }
      },
      plotOptions: { pie: { donut: { size: '76%' } } },
      series: seriesData,
      labels: seriesLabels,
      legend: { show: false },
      dataLabels: { enabled: false },
      stroke: { width: 5 },
      grid: { padding: { top: -12, bottom: -11, left: -12, right: -12 } },
      states: {
        hover: { filter: { type: 'none', value: 0 } },
        active: { allowMultipleDataPointsSelection: false }
      },
      tooltip: {
        enabled: true,
        custom: ({ seriesIndex, w }) => {
          if (seriesIndex < 0 || !w.globals.labels[seriesIndex]) return '';
          const label = w.globals.labels[seriesIndex];
          const value = w.globals.series[seriesIndex];
          const total = w.globals.series.reduce((a, b) => a + b, 0);
          const percentage = ((value / total) * 100).toFixed(1);
          const color = w.globals.colors[seriesIndex];
          return `
  <div class="border border-gray-300 bg-white w-36 text-gray-900 shadow-xl">
    <div class="px-2 py-1.5 font-semibold text-[13px] flex items-center">
      <span>${label}</span>
      <span class="ms-auto">${percentage}%</span>
    </div>
    <div class="border-t border-gray-200"></div>
    <div class="space-y-1.5 p-2">
      <div class="flex items-center gap-x-2 text-xs text-gray-600">
        <span class="w-3 h-3 rounded-sm inline-block" style="background:${color}"></span>
        <span>Count</span>
        <span class="ms-auto">${value}</span>
      </div>
    </div>
  </div>
          `;
        }
      }
    });
    const theme = { colors: chartColors, stroke: { colors: ['#ffffff'] } };
    buildChart(chartId, options, theme, theme);
  }

  function renderPieChart(
    chartId,
    seriesData,
    seriesLabels,
    chartColors,
    chartHeight = 310,
    chartWidth = 310
  ) {
    const chartEl = document.querySelector(chartId);
    if (!chartEl) {
      console.warn(`Chart element ${chartId} not found.`);
      return;
    }
    chartEl.innerHTML = '';

    const options = (mode) => ({
      chart: {
        height: chartHeight,
        width: chartWidth,
        type: 'pie',
        zoom: { enabled: false }
      },
      plotOptions: {
        pie: {
          expandOnClick: true,
          donut: {
            labels: {
              show: false
            }
          }
        }
      },
      series: seriesData,
      labels: seriesLabels,
      legend: { show: false },
      dataLabels: { enabled: false },
      stroke: { width: 2, colors: ['#ffffff'] },
      grid: {
        padding: { top: 10, bottom: 10, left: 10, right: 10 }
      },
      states: {
        hover: {
          filter: { type: 'darken', value: 0.95 }
        },
        active: {
          allowMultipleDataPointsSelection: false,
          filter: { type: 'darken', value: 0.85 }
        }
      },
      tooltip: {
        enabled: true,
        custom: ({ seriesIndex, w }) => {
          if (seriesIndex < 0 || !w.globals.labels[seriesIndex]) return '';
          const label = w.globals.labels[seriesIndex];
          const value = w.globals.series[seriesIndex];
          const total = w.globals.series.reduce((a, b) => a + b, 0);
          const percentage = total > 0 ? ((value / total) * 100).toFixed(1) : 0;
          const color = w.globals.colors[seriesIndex];

          return `
  <div class="border border-gray-300 bg-white w-36 text-gray-900 shadow-xl">
    <div class="px-2 py-1.5 font-semibold text-[13px] flex items-center">
      <span class="break-words whitespace-normal w-full block">${label}</span>
      <span class="ms-auto">${percentage}%</span>
    </div>
    <div class="border-t border-gray-200"></div>
    <div class="space-y-1.5 p-2">
      <div class="flex items-center gap-x-2 text-xs text-gray-600">
        <span class="w-3 h-3 rounded-sm inline-block" style="background:${color}"></span>
        <span>Count</span>
        <span class="ms-auto">${value}</span>
      </div>
    </div>
  </div>
          `;
        }
      }
    });

    const theme = {
      colors: chartColors,
      stroke: {
        colors: ['#ffffff']
      }
    };

    buildChart(chartId, options, theme, theme);
  }

  function renderBubbleChart(chartId, seriesData, chartColors, actualPercentages) {
    const chartEl = document.querySelector(chartId);
    if (!chartEl) {
      console.warn(`Chart element ${chartId} not found.`);
      return;
    }

    chartEl.innerHTML = '';

    const textColors = (chartColors || [])
      .slice(0, seriesData.length)
      .map((hex) => {
        if (!hex) return '#1f2937';
        const h = hex.replace('#', '');
        const r = parseInt(h.substring(0, 2), 16);
        const g = parseInt(h.substring(2, 4), 16);
        const b = parseInt(h.substring(4, 6), 16);
        const brightness = (r * 299 + g * 587 + b * 114) / 1000;
        return brightness > 160 ? '#1f2937' : '#ffffff';
      });

    const options = () => ({
      chart: {
        height: '100%',
        type: 'bubble',
        toolbar: { show: false },
        zoom: { enabled: false }
      },
      series: seriesData,
      dataLabels: {
        style: {
          fontSize: '18px',
          fontFamily: 'Inter, ui-sans-serif',
          fontWeight: '600',
          colors: textColors
        },
        formatter: (_value, opts) => {
          const idx = opts.seriesIndex;
          return actualPercentages && actualPercentages[idx] != null
            ? `${actualPercentages[idx]}%`
            : '';
        }
      },
      fill: { opacity: 1 },
      legend: { show: false },
      plotOptions: {
        bubble: {
          zScaling: false,
          minBubbleRadius: 40
        }
      },
      grid: {
        show: false,
        padding: { top: 0, bottom: 0, left: 0, right: 0 }
      },
      xaxis: {
        min: 0,
        max: 15,
        labels: { show: false },
        axisBorder: { show: false },
        axisTicks: { show: false }
      },
      yaxis: {
        min: 0,
        max: 15,
        labels: { show: false }
      },
      tooltip: { 
        enabled: true,
        custom: ({ seriesIndex, w }) => {
          const name = w.config.series[seriesIndex].name;
          const percent = actualPercentages[seriesIndex];
          return `<div class="p-2 bg-white border border-gray-200 shadow-lg rounded-lg">
                    <div class="text-xs font-bold">${name}</div>
                    <div class="text-[10px] text-gray-500">${percent}% of total mistakes</div>
                  </div>`;
        }
      },
      states: { hover: { filter: { type: 'none' } } }
    });

    buildChart(
      chartId,
      options,
      { colors: chartColors, markers: { strokeColors: 'rgb(255, 255, 255)' } },
      { colors: chartColors, markers: { strokeColors: 'rgb(38, 38, 38)' } }
    );
  }
</script>
  <script>
  const COLOR_PALETTE = [
    '#3B82F6',
    '#6366F1',
    '#8B5CF6',
    '#EC4899',
    '#F43F5E',
    '#F97316',
    '#EAB308',
    '#22C55E',
    '#10B981',
    '#14B8A6',
    '#06B6D4',
    '#64748B',
    '#9CA3AF',
    '#F87171',
    '#A78BFA',
  ];
  class ColorMapper {
    constructor(baseLabels = []) {
      this.mapping = {};
      this.colorIndex = 0;
      baseLabels.forEach(label => this.getColor(label));
    }
    getColor(label) {
      if (!this.mapping[label]) {
        this.mapping[label] = COLOR_PALETTE[this.colorIndex % COLOR_PALETTE.length];
        this.colorIndex++;
      }
      return this.mapping[label];
    }
    getColorsForLabels(labels = []) {
      return labels.map(label => this.getColor(label));
    }
  }

  const RECOMMENDATION_MAPPING = {
    'didnt_understand_question': "If you'd like, try pausing for a few seconds to restate the question in your own words before solving. Many students find that rephrasing clarifies what the question is *really* asking.",
    'didnt_know_strategy': "If you want, you could try identifying what kind of problem this is before solving it. Noting the pattern first often makes the right approach easier to spot.",
    'didnt_know_key_information': "If you'd like, note the exact fact or concept you were missing and do a quick refresher on just that one idea. Filling a single gap is often enough to unlock similar questions next time.",
    'used_wrong_strategy': "If you want, you could compare your approach with the solution's approach and ask: 'At what point did they choose differently?' Spotting that fork helps avoid repeating the same strategy next time.",
    'execution_mistake': "If you'd like, try adding a quick checkpoint during solving—after a calculation or step—to verify you're still on track. Small pauses can prevent small slips.",
    'missed_question_detail': "If you want, you could try scanning the question once specifically for constraints or qualifiers (like 'only', 'except', or units) before solving. Many students catch hidden details this way.",
    'misread_options': "If you'd like, try reading each option carefully and matching it back to what you *intended* to answer. This helps avoid choosing a nearby or look-alike option by accident.",
    'rushed': "If you want, consider slowing down slightly on the first read and speeding up only after you're clear on the question. Many students find this tradeoff improves accuracy without costing time.",
    'running_out_of_time': "If you'd like, you could try deciding earlier which questions to skip and return to. Protecting time for stronger questions often leads to better overall scores.",
    'didnt_answer': "If you want, you could set a soft time limit per question and make a best attempt before moving on. Even partial reasoning improves your odds compared to leaving it blank.",
    'marking_error': "If you'd like, try adding a final 'intent check'—quickly confirm that the option you clicked matches the one you solved for. This small habit prevents avoidable losses.",
    'other': "If you want, briefly note what caused the issue this time. Patterns become easier to fix once the reason is clear—even if it doesn't fit a standard category."
  };

  function consolidatedMindsetComponent() {
    return {
      data: {"totalErrors":42,"totalReflectedExams":12,"summary":{"ids":["didnt_understand_question","didnt_know_strategy","didnt_know_key_information","used_wrong_strategy","execution_mistake","missed_question_detail","misread_options","rushed","running_out_of_time","didnt_answer","marking_error","other"],"labels":["Didn't Understand Question","Didn't Know Strategy","Didn't Know Key Information","Used Wrong Strategy","Execution Mistake","Missed a Question Detail","Misread Options","Rushed","Running Out of Time","Didn't Answer","Marking Error","Other"],"series":[14,12,9,8,6,6,4,3,2,1,1,1],"examCounts":[5,4,6,3,7,4,2,2,1,1,1,1]},"topErrors":[{"id":"execution_mistake","label":"Execution Mistake","count":14,"examCount":5,"suggestedImprovement":"If you'd like, try adding a quick checkpoint during solving—after a calculation or step—to verify you're still on track. Small pauses can prevent small slips."},{"id":"didnt_know_key_information","label":"Didn't Know Key Information","count":12,"examCount":4,"suggestedImprovement":"If you'd like, note the exact fact or concept you were missing and do a quick refresher on just that one idea. Filling a single gap is often enough to unlock similar questions next time."},{"id":"missed_question_detail","label":"Missed a Question Detail","count":9,"examCount":6,"suggestedImprovement":"If you want, you could try scanning the question once specifically for constraints or qualifiers (like 'only', 'except', or units) before solving. Many students catch hidden details this way."}],"questions":[{"id":501,"reasonId":"execution_mistake","reasonLabel":"Execution Mistake","subject":"Physics","examName":"Physics - Rotational Motion","text":"A solid sphere of mass 2kg and radius 0.5m rotates about its axis. What is its Moment of Inertia?","correctIdx":1,"options":[{"text":"0.5 kg m²"},{"text":"0.2 kg m²"},{"text":"0.4 kg m²"},{"text":"1.0 kg m²"}],"explanation":"Moment of Inertia for a solid sphere is I = (2/5)MR². Substituting M=2, R=0.5 (or 1/2): I = (2/5) * 2 * (1/2)² = (4/5) * (1/4) = 1/5 = 0.2 kg m²."},{"id":502,"reasonId":"execution_mistake","reasonLabel":"Execution Mistake","subject":"Chemistry","examName":"Chemistry - Stoichiometry","text":"How many moles of O₂ are required to completely react with 2 moles of Butane (C₄H₁₀)?","correctIdx":2,"options":[{"text":"6.5"},{"text":"8"},{"text":"13"},{"text":"10"}],"explanation":"Reaction: 2C₄H₁₀ + 13O₂ → 8CO₂ + 10H₂O. The stoichiometry shows 2 moles of Butane require 13 moles of Oxygen. Common error is forgetting to balance the oxygen for both CO2 and H2O."},{"id":503,"reasonId":"execution_mistake","reasonLabel":"Execution Mistake","subject":"Math","examName":"Math - Calculus","text":"Evaluate d/dx (sin²(x)).","correctIdx":0,"options":[{"text":"sin(2x)"},{"text":"cos²(x)"},{"text":"2sin(x)"},{"text":"-sin(2x)"}],"explanation":"Using chain rule: d/dx(sin(x)²) = 2sin(x) * d/dx(sin(x)) = 2sin(x)cos(x). By double angle identity, 2sin(x)cos(x) = sin(2x)."},{"id":504,"reasonId":"execution_mistake","reasonLabel":"Execution Mistake","subject":"Physics","examName":"Physics - Current Electricity","text":"Three resistors of 2Ω, 3Ω, and 6Ω are connected in parallel. What is the equivalent resistance?","correctIdx":1,"options":[{"text":"11Ω"},{"text":"1Ω"},{"text":"0.5Ω"},{"text":"1.5Ω"}],"explanation":"1/Req = 1/2 + 1/3 + 1/6. LCM is 6. 1/Req = (3+2+1)/6 = 6/6 = 1. So Req = 1Ω. A common execution error is summing them (series) or flipping the fraction incorrectly."},{"id":505,"reasonId":"execution_mistake","reasonLabel":"Execution Mistake","subject":"Chemistry","examName":"Chemistry - Solutions","text":"Calculate the molarity of a solution containing 4g of NaOH in 250ml of solution.","correctIdx":3,"options":[{"text":"0.1 M"},{"text":"1.0 M"},{"text":"0.2 M"},{"text":"0.4 M"}],"explanation":"Molar mass of NaOH = 40g/mol. Moles = 4/40 = 0.1 mol. Volume = 0.25 L. Molarity = 0.1 / 0.25 = 0.4 M."},{"id":301,"reasonId":"didnt_know_key_information","reasonLabel":"Didn't Know Key Information","subject":"Chemistry","examName":"Chemistry - Solutions","text":"Which of the following colligative properties is used to determine the molar mass of proteins and polymers?","correctIdx":2,"options":[{"text":"Relative lowering of Vapor Pressure"},{"text":"Elevation in Boiling Point"},{"text":"Osmotic Pressure"},{"text":"Depression in Freezing Point"}],"explanation":"Osmotic pressure is preferred for macromolecules because it has a measurable magnitude even at room temperature and molarity is used instead of molality."},{"id":302,"reasonId":"didnt_know_key_information","reasonLabel":"Didn't Know Key Information","subject":"Biology","examName":"Biology - Genetics","text":"In a DNA molecule, which bond holds the nitrogenous bases together?","correctIdx":1,"options":[{"text":"Phosphodiester bond"},{"text":"Hydrogen bond"},{"text":"Glycosidic bond"},{"text":"Peptide bond"}],"explanation":"The nitrogenous bases of the two strands of DNA are paired through Hydrogen bonds (A=T has 2, G≡C has 3). Phosphodiester bonds connect the sugar-phosphate backbone."},{"id":303,"reasonId":"didnt_know_key_information","reasonLabel":"Didn't Know Key Information","subject":"Physics","examName":"Physics - Modern Physics","text":"What is the relationship between half-life (T) and mean life (τ) of a radioactive substance?","correctIdx":0,"options":[{"text":"T = 0.693 × τ"},{"text":"τ = 0.693 × T"},{"text":"T = τ"},{"text":"T = τ²"}],"explanation":"Half-life T = ln(2)/λ = 0.693/λ. Mean life τ = 1/λ. Therefore, T = 0.693 × τ. This is a key formula in radioactivity."},{"id":304,"reasonId":"didnt_know_key_information","reasonLabel":"Didn't Know Key Information","subject":"Math","examName":"Math - Coordinate Geometry","text":"What is the eccentricity of a rectangular hyperbola?","correctIdx":2,"options":[{"text":"1"},{"text":"0"},{"text":"√2"},{"text":"2"}],"explanation":"For a rectangular hyperbola (x² - y² = a²), the asymptotes are perpendicular. The eccentricity e is always √2."},{"id":305,"reasonId":"didnt_know_key_information","reasonLabel":"Didn't Know Key Information","subject":"Chemistry","examName":"Chemistry - Periodic Table","text":"Which element has the highest electron gain enthalpy (most negative)?","correctIdx":1,"options":[{"text":"Fluorine"},{"text":"Chlorine"},{"text":"Oxygen"},{"text":"Nitrogen"}],"explanation":"Chlorine has the highest electron gain enthalpy. Fluorine is smaller, so inter-electronic repulsion makes adding an electron slightly harder than in Chlorine."},{"id":601,"reasonId":"missed_question_detail","reasonLabel":"Missed a Detail","subject":"Chemistry","examName":"Chemistry - Organic","text":"Which of the following compounds does NOT undergo Cannizzaro reaction?","correctIdx":0,"options":[{"text":"Acetaldehyde (CH₃CHO)"},{"text":"Formaldehyde (HCHO)"},{"text":"Benzaldehyde (C₆H₅CHO)"},{"text":"Chloral (CCl₃CHO)"}],"explanation":"Cannizzaro reaction is given by aldehydes lacking alpha-hydrogens. Acetaldehyde (CH₃CHO) has 3 alpha-hydrogens, so it undergoes Aldol Condensation instead. The question asked for 'NOT'."},{"id":602,"reasonId":"missed_question_detail","reasonLabel":"Missed a Detail","subject":"Math","examName":"Math - Matrices","text":"If A is a skew-symmetric matrix of order 3, then determinant of A is?","correctIdx":2,"options":[{"text":"±1"},{"text":"Non-zero"},{"text":"Zero"},{"text":"Cannot be determined"}],"explanation":"The determinant of a skew-symmetric matrix of *odd* order is always zero. The detail 'order 3' is crucial here."},{"id":603,"reasonId":"missed_question_detail","reasonLabel":"Missed a Detail","subject":"Physics","examName":"Physics - Thermodynamics","text":"Work done in a cyclic process is equal to:","correctIdx":3,"options":[{"text":"Zero"},{"text":"Infinity"},{"text":"Heat absorbed"},{"text":"Area inside the P-V loop"}],"explanation":"While change in internal energy is zero, work done is the Area inside the P-V loop. Students often confuse 'cyclic process means dU=0' with 'Work=0'."},{"id":604,"reasonId":"missed_question_detail","reasonLabel":"Missed a Detail","subject":"Biology","examName":"Biology - Botany","text":"Which of the following is NOT a feature of Monocots?","correctIdx":1,"options":[{"text":"Parallel venation"},{"text":"Tap root system"},{"text":"Trimerous flowers"},{"text":"Scattered vascular bundles"}],"explanation":"Monocots have a Fibrous root system, not a Tap root system (which is a Dicot feature). The question asked for what is *NOT* a feature."},{"id":605,"reasonId":"missed_question_detail","reasonLabel":"Missed a Detail","subject":"Math","examName":"Math - Functions","text":"Find the domain of f(x) = √(1 - x²).","correctIdx":1,"options":[{"text":"(-1, 1)"},{"text":"[-1, 1]"},{"text":"R - (-1, 1)"},{"text":"(0, 1)"}],"explanation":"For the square root to be defined, 1 - x² ≥ 0, which implies x² ≤ 1, so -1 ≤ x ≤ 1. The square brackets denote inclusion of -1 and 1, which is the correct detail often missed."}]},
      chartData: { labels: [], series: [], ids: [], examCounts: [] },
      pathway: { topErrors: [], totalErrors: 0 },
      colorMapper: null,
      isQuizOpen: false,
      questions: [],
      currentIndex: 0,
      selectedIdx: null,
      hasAnswered: false,
      selectedReasonId: null,
      selectedReasonLabel: '',
      touchStartX: 0,
      showSummary: false,
      correctAnswers: 0,
      userAnswers: [],

      init() {
        const src = this.data || {};
        this.pathway.totalErrors = src.totalErrors || 0;
        this.chartData = src.summary || { labels: [], series: [], ids: [], examCounts: [] };
        this.colorMapper = new ColorMapper(this.chartData.labels);
        this.processTopErrors(src.topErrors);
        this.$nextTick(() => this.renderCharts());
      },

      startPractice(reasonId) {
        this.selectedReasonId = reasonId;
        const reasonIdx = this.chartData.ids.indexOf(reasonId);
        this.selectedReasonLabel = reasonIdx !== -1 ? this.chartData.labels[reasonIdx] : 'Practice';
        
        const allQuestions = this.data.questions || [];
        this.questions = allQuestions
          .filter(q => q.reasonId === reasonId)
          .slice(0, 10);

        if (this.questions.length > 0) {
          this.currentIndex = 0;
          this.hasAnswered = false;
          this.selectedIdx = null;
          this.showSummary = false;
          this.correctAnswers = 0;
          this.userAnswers = [];
          this.isQuizOpen = true;
          document.body.style.overflow = 'hidden';
        } else {
          alert("No practice questions found for this reason.");
        }
      },

      selectOption(idx) {
        if (this.hasAnswered) return;
        this.selectedIdx = idx;
        this.hasAnswered = true;
        this.userAnswers[this.currentIndex] = idx;
      },

      nextQuestion() {
        if (this.currentIndex < this.questions.length - 1) {
          this.currentIndex++;
          const nextAnswer = this.userAnswers[this.currentIndex];
          this.selectedIdx = nextAnswer !== undefined ? nextAnswer : null;
          this.hasAnswered = nextAnswer !== undefined;
          const container = this.$refs.quizBody;
          if (container) container.scrollTop = 0;
        } else {
          this.calculateScore();
          this.showSummary = true;
          this.$nextTick(() => {
            this.renderPracticeQuizChart();
          });
        }
      },

      previousQuestion() {
        if (this.currentIndex > 0) {
          this.currentIndex--;
          const previousAnswer = this.userAnswers[this.currentIndex];
          this.selectedIdx = previousAnswer !== undefined ? previousAnswer : null;
          this.hasAnswered = previousAnswer !== undefined;
          const container = this.$refs.quizBody;
          if (container) container.scrollTop = 0;
        }
      },

      calculateScore() {
        this.correctAnswers = 0;
        this.questions.forEach((question, index) => {
          const userAnswer = this.userAnswers[index];
          if (userAnswer === question.correctIdx) {
            this.correctAnswers++;
          }
        });
      },

      retakeQuiz() {
        this.currentIndex = 0;
        this.hasAnswered = false;
        this.selectedIdx = null;
        this.showSummary = false;
        this.correctAnswers = 0;
        this.userAnswers = [];
        const container = this.$refs.quizBody;
        if (container) container.scrollTop = 0;
      },

      closeQuiz() {
        this.isQuizOpen = false;
        document.body.style.overflow = 'auto';
        setTimeout(() => {
          this.questions = [];
          this.currentIndex = 0;
          this.selectedIdx = null;
          this.hasAnswered = false;
          this.showSummary = false;
          this.correctAnswers = 0;
          this.userAnswers = [];
        }, 500);
      },

      handleTouchStart(e) { this.touchStartX = e.changedTouches[0].screenX; },
      handleTouchEnd(e) {
        const diff = this.touchStartX - e.changedTouches[0].screenX;
        if (diff > 50 && this.hasAnswered) {
           this.nextQuestion();
        } else if (diff < -50) {
           this.previousQuestion();
        }
      },

      processTopErrors(topErrors) {
        const top3Items = (topErrors || []).slice(0, 3);
        const top3TotalCount = top3Items.reduce((sum, err) => sum + (err.count || 0), 0);
        this.pathway.topErrors = top3Items.map(err => ({
          ...err,
          reason: err.label,
          percentage: top3TotalCount > 0 ? Math.round((err.count / top3TotalCount) * 100) : 0,
          recommendation: err.suggestedImprovement || RECOMMENDATION_MAPPING[err.id] || "If you want, you could review these questions to see if a recurring pattern emerges."
        }));
      },

      renderCharts() {
        renderPieChart('#consolidated-error-chart', this.chartData.series, this.chartData.labels, this.colorMapper.getColorsForLabels(this.chartData.labels), 280, 280);

        const topErrors = this.pathway.topErrors;
        if (!topErrors.length) return;

        const positions = [
          { x: 8.5, y: 7.5, s: 90},
          { x: 4.5, y: 7, s: 70 },
          { x: 6.2, y: 5.2, s: 40 }
        ];

        const bubbleSeries = topErrors.map((error, index) => ({
          name: error.reason,
          data: [[ 
            positions[index]?.x || 5, 
            positions[index]?.y || 5, 
            positions[index]?.s || error.percentage * 1.8
          ]]
        }));

        const chartColors = topErrors.map(error => this.colorMapper.getColor(error.reason));
        const actualPercentages = topErrors.map(error => error.percentage);

        renderBubbleChart('#consolidated-bubble-chart', bubbleSeries, chartColors, actualPercentages);
      },

      renderPracticeQuizChart() {
        const chartContainer = document.querySelector("#practice-quiz-pie-chart");
        if (chartContainer) {
          chartContainer.innerHTML = '';
        }

        let correct = 0;
        let incorrect = 0;

        this.questions.forEach((question, index) => {
          const userAnswer = this.userAnswers[index];
          if (userAnswer === question.correctIdx) {
            correct++;
          } else {
            incorrect++;
          }
        });

        const seriesData = [correct, incorrect];
        const seriesLabels = ['Correct', 'Incorrect'];

        const options = {
          chart: {
            height: 230,
            width: 230,
            type: 'donut',
            zoom: { enabled: false },
            animations: {
              enabled: false
            }
          },
          plotOptions: {
            pie: {
              donut: {
                size: '76%'
              }
            }
          },
          series: seriesData,
          labels: seriesLabels,
          legend: { show: false },
          dataLabels: { enabled: false },
          stroke: { width: 5 },
          colors: ['#22c55e', '#ef4444'],
          stroke: {
            colors: ['#ffffff']
          },
          states: {
            hover: {
              filter: { type: 'none', value: 0 }
            },
            active: {
              allowMultipleDataPointsSelection: false,
            }
          },
          tooltip: {
            enabled: true,
            custom: ({ seriesIndex, w }) => {
              const label = seriesLabels[seriesIndex];
              const value = seriesData[seriesIndex];
              const total = seriesData.reduce((a, b) => a + b, 0);
              const percentage = total > 0 ? ((value / total) * 100).toFixed(1) : 0;
              const color = w.globals.colors[seriesIndex];

              return `
                <div class="border border-gray-300 bg-white w-36 text-gray-900 shadow-xl">
                  <div class="px-2 py-1.5 font-semibold text-[13px] flex items-center">
                    <span>${label}</span>
                    <span class="ms-auto">${percentage}%</span>
                  </div>
                  <div class="border-t border-gray-200"></div>
                  <div class="space-y-1.5 p-2">
                    <div class="flex items-center gap-x-2 text-xs text-gray-600">
                      <span class="w-3 h-3 rounded-sm inline-block" style="background:${color}"></span>
                      <span>Questions</span>
                      <span class="ms-auto">${value}</span>
                    </div>
                  </div>
                </div>
              `;
            }
          }
        };

        const chart = new ApexCharts(chartContainer, options);
        chart.render();
      }
    };
  }
</script>

  </body>


</html>
