<div class="lg:[height:calc(100vh-4rem)] xl:mt-16 flex flex-col lg:pl-[23.5rem] xl:pl-0">
  <!-- Tab Navigation -->
  <div class="px-4 pt-3">
    <nav class="relative flex space-x-1 after:absolute after:bottom-0 after:inset-x-0 after:border-b-2 after:border-gray-200 dark:after:border-neutral-700" aria-label="Tabs" role="tablist" aria-orientation="horizontal">
      <button type="button" 
              class="hs-tab-active:after:bg-emerald-600 hs-tab-active:text-emerald-600 px-2.5 py-1.5 mb-2 relative inline-flex justify-center items-center gap-x-2 hover:bg-gray-100 text-gray-500 hover:text-gray-700 text-sm rounded-lg disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-gray-100 after:absolute after:-bottom-2 after:inset-x-0 after:z-10 after:h-0.5 after:pointer-events-none dark:hs-tab-active:text-emerald-400 dark:hs-tab-active:after:bg-emerald-400 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 active" 
              id="ai-chat-tab" 
              aria-selected="true" 
              data-hs-tab="#ai-chat-content" 
              aria-controls="ai-chat-content" 
              role="tab">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z" />
        </svg>
        Chat
      </button>
      <button type="button" 
              class="hs-tab-active:after:bg-emerald-600 hs-tab-active:text-emerald-600 px-2.5 py-1.5 mb-2 relative inline-flex justify-center items-center gap-x-2 hover:bg-gray-100 text-gray-500 hover:text-gray-700 text-sm rounded-lg disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-gray-100 after:absolute after:-bottom-2 after:inset-x-0 after:z-10 after:h-0.5 after:pointer-events-none dark:hs-tab-active:text-emerald-400 dark:hs-tab-active:after:bg-emerald-400 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" 
              id="ai-quiz-tab" 
              aria-selected="false" 
              data-hs-tab="#ai-quiz-content" 
              aria-controls="ai-quiz-content" 
              role="tab">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
                <circle cx="12" cy="12" r="10"/>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                <path d="M12 17h.01"/>
              </svg>
        Quiz
      </button>
    </nav>
  </div>
  <!-- End Tab Navigation -->

  <!-- Body -->
  <div class="h-full flex flex-col relative overflow-hidden [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500">
    
    <!-- AI Chat Content Tab -->
    <div id="ai-chat-content" class="hs-tab-content" role="tabpanel" aria-labelledby="ai-chat-tab">
      <div class="">
        <!-- Title Input -->
        <div class="xl:h-screen h-[70vh] overflow-y-auto p-4 overflow-y-auto overflow-x-hidden [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500">

          <div class="relative pb-20 lg:pb-[10rem]">

            <!-- List -->
            <div class="w-full space-y-5">
              <div class="ms-auto text-end flex justify-end gap-x-2">
                <!-- Chat Bubble -->
                <div>

                  <div class="space-y-1">
                    <!-- Message -->
                    <div class="group flex justify-end gap-x-2" style="word-break: break-word;">
                      <div class="order-2 text-start bg-emerald-100 dark:bg-emerald-500/20 inline-block rounded-xl pt-2 pb-1.5 px-2.5">
                        <div class="text-sm text-gray-800 dark:text-neutral-200">
                          <span class="text-emerald-600 dark:text-emerald-500"></span>What is photosynthesis?
                        </div>
                      </div>
                    </div><!-- End Message -->
                  </div>
                </div>
              </div>
              <!-- End Item -->

              <!-- Item -->
              <div class="flex gap-x-2">      
                <!-- Chat Bubble -->
                <div>      
                  <div class="space-y-1">
                    <!-- Message -->
                    <div class="group flex justify-start gap-x-2" style="word-break: break-word;">
                      <div class="order-1 bg-gray-200 dark:bg-neutral-950 inline-block rounded-xl pt-2 pb-1.5 px-2.5">
                        <div class="text-sm text-gray-800 dark:text-neutral-200">
                          Photosynthesis is the process by which green plants convert sunlight into chemical energy using carbon dioxide and water
                        </div>
                      </div>
                    </div><!-- End Message -->
                  </div>
                </div>
                <!-- End Chat Bubble -->
              </div>
              
              <!-- End Item -->

              <!-- Item -->
              <div class="ms-auto text-end flex justify-end gap-x-2">
                <!-- Chat Bubble -->
                <div>      
                  <div class="space-y-1">
                    <!-- Message -->
                    <div class="group flex justify-end gap-x-2" style="word-break: break-word;">
                      <div class="order-2 text-start bg-emerald-100 dark:bg-emerald-500/20 inline-block rounded-xl pt-2 pb-1.5 px-2.5">
                        <div class="text-sm text-gray-800 dark:text-neutral-200">
                          Give me 2 question on agricultural practices.
                        </div>
                      </div>
                    </div><!-- End Message -->
                  </div>
                </div>
              </div>
              <!-- End Item -->

              <!-- Item -->
   
            </div>
            
            <!-- End List -->
          </div>
        </div>
        <!-- End Chat Content -->

        <!-- Textarea -->
        <footer class="sticky bottom-20 lg:bottom-0 inset-x-0 z-20 bg-white border-t border-gray-200 dark:bg-neutral-800 dark:border-neutral-700">
          <label for="hs-pro-chtfwtiwrb1" class="sr-only">Message</label>

          <div class="pb-2 ps-2">
            <div class="mb-1.5 sm:mb-0 sm:flex sm:items-center sm:gap-2">
              <div class="grow">
                <textarea id="hs-pro-chtfwtiwrb1" class="max-h-36 pt-4 pb-2 ps-2 pe-4 block w-full border-transparent rounded-0 md:text-sm leading-4 resize-none focus:outline-hidden focus:border-transparent focus:ring-transparent disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:text-neutral-400 dark:placeholder-neutral-500 overflow-y-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500" placeholder="Ask AI anything about the lesson..." data-hs-textarea-auto-height="" style="height: 59px;"></textarea>
              </div>
            </div>

            <div class="pe-4 flex justify-between items-center gap-x-1">
              <!-- Button Group -->
              <div class="flex items-center gap-x-1">
                <!-- Button -->
                <button type="button" class="flex justify-center items-center gap-x-1.5 size-8 text-sm text-gray-600 hover:bg-gray-100 rounded-full disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-gray-100 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:hover:text-neutral-200 dark:focus:text-neutral-200">
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
                  </svg>
                  <span class="sr-only">Attach file</span>
                </button>
              </div>
              <!-- End Button Group -->

              <!-- Button Group -->
              <div class="flex items-center gap-x-1">
                <!-- Button -->
                <button type="button" class="flex justify-center items-center gap-x-1.5 size-8 text-sm text-gray-600 hover:bg-gray-100 rounded-full disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-gray-100 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:hover:text-neutral-200 dark:focus:text-neutral-200">
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                    <line x1="12" x2="12" y1="19" y2="22"></line>
                  </svg>
                  <span class="sr-only">Send voice message</span>
                </button>
                <!-- End Button -->

                <!-- Send Button -->
                <button type="button" class="inline-flex shrink-0 justify-center items-center size-8 text-sm font-medium rounded-full text-white bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 dark:focus:bg-emerald-600">
                  <span class="sr-only">Send</span>
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m5 12 7-7 7 7"></path>
                    <path d="M12 19V5"></path>
                  </svg>
                </button>
                <!-- End Send Button -->
              </div>
              <!-- End Button Group -->
            </div>
          </div>
        </footer>
      </div>
    </div>
    <!-- End AI Chat Content Tab -->

    <!-- AI Quiz Content Tab -->
    <!-- AI Quiz Content Tab -->
<div id="ai-quiz-content" class="hs-tab-content" role="tabpanel" aria-labelledby="ai-quiz-tab" style="display: none;">
  <div class="h-full flex flex-col">
    <!-- Create Quiz View -->
    <div id="create-quiz-view" class="h-full flex flex-col">
      <div class="flex-1 overflow-y-auto p-4">
        <!-- Quiz Card -->
        <div class="bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-700 p-4" style="display: block;">
          <!-- Content Layout - Left: Text, Right: Actions -->
          <div class="flex flex-row items-center justify-between gap-3">
            <!-- Left Side: Title and Description -->
            <div>
              <h3 class="text-sm font-medium text-gray-800 dark:text-neutral-200 mb-1">Create Quiz</h3>
              <p class="text-xs text-gray-600 dark:text-neutral-400">Create quiz sets with preferred question types, difficulty, and more.</p>
            </div>
            
            <!-- Right Side: Filter Icon and Generate Button -->
            <div class="flex items-center gap-2 flex-shrink-0">
              <!-- Filter Icon Button -->
              <div class="hs-tooltip inline-block">
                <button type="button" data-hs-overlay="#customize-quiz-modal" class="hs-tooltip-toggle p-1.5 inline-flex justify-center items-center text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:bg-neutral-700">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0m-3.75 0H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75" />
                  </svg>
                </button>
                <div class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 inline-block absolute invisible z-20  py-1.5 px-2.5 bg-gray-900 text-xs font-medium text-white rounded-lg shadow-md dark:bg-neutral-700" role="tooltip">
                  Customize Quiz
                </div>
              </div>
              
              <!-- Generate Button -->
              <button type="button" id="generate-quiz-btn" class="py-1.5 px-3 inline-flex items-center gap-x-2 text-xs font-medium rounded-lg border border-emerald-600 bg-emerald-600 text-white shadow-2xs hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none dark:bg-emerald-500 dark:border-emerald-500 dark:hover:bg-emerald-600 dark:focus:bg-emerald-600">
                Generate
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quizzes List View (Hidden by default) -->
    <div id="quizzes-list-view" class="h-full flex flex-col" style="display: none;">
      <!-- AI Quizzes List View -->
<div id="ai-quizzes-list" class="h-full flex flex-col">
  <!-- Header with CTA Buttons -->
  <div class="flex items-center justify-between px-4 pt-4 border-gray-200 dark:border-neutral-700">
    <div class="min-w-0 flex-1">
      <h3 class="text-sm font-medium text-gray-800 dark:text-neutral-200">My Quizzes</h3>
    </div>
    <div class="flex items-center gap-2">
      <!-- Customize Button -->
      <button type="button" data-hs-overlay="#customize-quiz-modal" class="p-1.5 inline-flex justify-center items-center text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:bg-neutral-700" title="Customize">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0m-3.75 0H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75" />
        </svg>
      </button>
      
      <!-- Generate Button -->
      <button type="button" id="quizzes-generate-btn" class="py-1.5 px-3 inline-flex items-center gap-x-1.5 text-xs font-medium rounded-lg border border-emerald-600 bg-emerald-600 text-white shadow-2xs hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-emerald-700 dark:bg-emerald-500 dark:border-emerald-500 dark:hover:bg-emerald-600 dark:focus:bg-emerald-600">
        Generate
      </button>
    </div>
  </div>

  <!-- Quizzes List -->
  <div class="flex-1 overflow-y-auto p-4">
    <div class="space-y-4">
      
      <!-- Skeleton Loading Card (Hidden by default) -->
      <div id="quiz-skeleton" class="bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-700 p-4 animate-pulse" style="display: none;">
        <div class="flex items-start justify-between mb-3">
          <!-- Title skeleton -->
          <div class="h-4 bg-gray-200 dark:bg-neutral-700 rounded w-3/4"></div>
          <!-- Three dot menu skeleton -->
          <div class="h-6 w-6 bg-gray-200 dark:bg-neutral-700 rounded"></div>
        </div>
        
        <!-- Progress Bar skeleton -->
        <div class="space-y-2">
          <div class="flex justify-between">
            <div class="h-3 bg-gray-200 dark:bg-neutral-700 rounded w-16"></div>
            <div class="h-3 bg-gray-200 dark:bg-neutral-700 rounded w-12"></div>
          </div>
          <div class="w-full bg-gray-200 dark:bg-neutral-700 rounded-full h-1.5">
            <div class="bg-gray-300 dark:bg-neutral-600 h-1.5 rounded-full w-1/3"></div>
          </div>
        </div>
      </div>
      
      <!-- Quiz cards will be dynamically added here by JavaScript -->
      
    </div>
  </div>
</div>
<!-- End AI Quizzes List View -->

    </div>
    <!-- Quiz Detail View (Hidden by default) -->
    <div id="quiz-detail-view" class="h-full flex flex-col" style="display: none;">
      <div class="xl:h-screen h-[70vh]  p-4 overflow-y-auto overflow-x-hidden [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500">

        <div class="relative pb-20 lg:pb-[10rem]">
          <!-- Header with Back Button and Title -->
          <div class="flex items-center justify-between mb-5">
            <div class="flex items-center gap-x-3">
              <button type="button" onclick="showQuizList()" class="p-1.5 inline-flex justify-center items-center text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:bg-neutral-700">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                </svg>
              </button>
              <h1 class="text-sm font-medium text-gray-800 dark:text-neutral-200">Probability Concepts And Distributions</h1>
            </div>
            <!-- Future: Add actions like settings, share, etc. here -->
          </div>
          <div class="w-full space-y-5">
            <div class="w-full flex gap-x-2">      
              <div class="w-full">      
                <div class="space-y-1">
                  <div class="group flex justify-start gap-x-2" style="word-break: break-word;">
                    <div class="order-1 bg-gray-200 dark:bg-neutral-950 inline-block rounded-xl w-full">
                      <div class="text-sm text-gray-800 dark:text-neutral-200">
                        
                        <div class="w-full">  
  <!-- Quiz Card -->
  <div class="bg-white dark:bg-neutral-900 rounded-lg shadow-sm border border-gray-200 dark:border-neutral-700">
    
    <div class="p-6">
      <!-- Question -->
      <div class="mb-6">
        <h4 class="text-sm font-medium text-gray-800 dark:text-neutral-200 mb-2">
          1. What was the primary lifestyle of people until 10,000 B.C.E.?
        </h4>
      </div>
      
      <!-- Options -->
      <div class="grid grid-cols-1 gap-3">
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="0"
             data-option="Agricultural"
             data-correct="Nomadic"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              A.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Agricultural">Agricultural</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="0"
             data-option="Nomadic"
             data-correct="Nomadic"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              B.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Nomadic">Nomadic</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="0"
             data-option="Urban"
             data-correct="Nomadic"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              C.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Urban">Urban</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="0"
             data-option="Industrial"
             data-correct="Nomadic"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              D.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Industrial">Industrial</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
      </div>
      
      <!-- Hint Section -->
      <div class="mt-4">
        <!-- Hint Button -->
        <button type="button" 
                class="hint-btn text-xs text-gray-600 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 flex items-center"
                onclick="toggleHint('0')">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3 mr-1">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
          </svg>
          <span class="hint-text">See Hint</span>
        </button>
        
        <!-- Hint Container -->
        <div class="hint-container hidden mt-3">
          <div class="text-xs text-gray-600 dark:text-neutral-400 bg-gray-50 dark:bg-neutral-800 px-3 py-2 rounded-md border border-gray-200 dark:border-neutral-600">
            <span>Think about how early humans survived before agriculture.</span>
          </div>
        </div>
      </div>
      
      <!-- Explanation Section -->
      <div class="explanation-container hidden mt-4">
        <div class="explanation-card bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-600 rounded-lg p-4">
          <!-- Explanation Header -->
          <div class="flex items-center mb-3">
            <svg class="w-4 h-4 mr-2 text-gray-600 dark:text-neutral-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <h5 class="text-sm font-medium text-gray-800 dark:text-neutral-200">Explanation</h5>
          </div>
          
          <!-- Explanation Text -->
          <p class="text-sm text-gray-700 dark:text-neutral-300 mb-3">Until 10,000 B.C.E., people lived a nomadic lifestyle, wandering in groups in search of food and shelter.</p>
          
          <!-- Citations -->
          
          <div class="flex items-center gap-2 text-xs text-gray-500 dark:text-neutral-400">
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-emerald-600 dark:text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 1">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-emerald-600 dark:text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-emerald-600 dark:text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
          </div>
          
        </div>
      </div>
    </div>
    
    <div class="p-6">
      <!-- Question -->
      <div class="mb-6">
        <h4 class="text-sm font-medium text-gray-800 dark:text-neutral-200 mb-2">
          2. What term is used to describe plants of the same kind cultivated on a large scale?
        </h4>
      </div>
      
      <!-- Options -->
      <div class="grid grid-cols-1 gap-3">
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="1"
             data-option="Field"
             data-correct="Crop"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              A.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Field">Field</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="1"
             data-option="Crop"
             data-correct="Crop"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              B.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Crop">Crop</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="1"
             data-option="Garden"
             data-correct="Crop"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              C.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Garden">Garden</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="1"
             data-option="Harvest"
             data-correct="Crop"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              D.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Harvest">Harvest</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
      </div>
      
      <!-- Hint Section -->
      <div class="mt-4">
        <!-- Hint Button -->
        <button type="button" 
                class="hint-btn text-xs text-gray-600 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 flex items-center"
                onclick="toggleHint('1')">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3 mr-1">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
          </svg>
          <span class="hint-text">See Hint</span>
        </button>
        
        <!-- Hint Container -->
        <div class="hint-container hidden mt-3">
          <div class="text-xs text-gray-600 dark:text-neutral-400 bg-gray-50 dark:bg-neutral-800 px-3 py-2 rounded-md border border-gray-200 dark:border-neutral-600">
            <span>Think about how farmers classify what they grow.</span>
          </div>
        </div>
      </div>
      
      <!-- Explanation Section -->
      <div class="explanation-container hidden mt-4">
        <div class="explanation-card bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-600 rounded-lg p-4">
          <!-- Explanation Header -->
          <div class="flex items-center mb-3">
            <svg class="w-4 h-4 mr-2 text-gray-600 dark:text-neutral-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <h5 class="text-sm font-medium text-gray-800 dark:text-neutral-200">Explanation</h5>
          </div>
          
          <!-- Explanation Text -->
          <p class="text-sm text-gray-700 dark:text-neutral-300 mb-3">A crop refers to plants of the same kind grown together in one area on a large scale.</p>
          
          <!-- Citations -->
          
          <div class="flex items-center gap-2 text-xs text-gray-500 dark:text-neutral-400">
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-emerald-600 dark:text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 1">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-emerald-600 dark:text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-emerald-600 dark:text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
          </div>
          
        </div>
      </div>
    </div>
    

    <!-- Summary Card - Clean & Simple -->
    <div class="summary-card hidden p-6">
            <!-- Score Display -->
      <div class="text-center">
        <div class="flex items-center justify-center gap-x-1.5">
          <h2 class="text-base font-medium text-gray-600 dark:text-neutral-400">
            Total score:
          </h2>
          <div class="flex items-center gap-x-1.5">
            <p class="text-base font-semibold text-gray-800 dark:text-neutral-200">
              1/3
            </p>
            <span class="text-sm leading-5 text-gray-500 dark:text-neutral-400">
              (33.3%)
            </span>
          </div>
        </div>
      </div>
      
      <!-- Pie Chart -->
      <div class="md:col-span-3 lg:col-span-2">
        <div class="py-6">
          <div class="flex flex-col justify-center items-center">
            <div id="quiz-pie-chart" class="min-h-[14rem] w-[230px] h-[230px]"></div>
            
            <!-- Legend Indicator -->
            <div class="flex justify-center sm:justify-end items-center gap-x-4 mt-3 sm:mt-6">
              <div class="inline-flex items-center">
                <span class="size-2.5 inline-block bg-green-600 rounded-sm me-2"></span>
                <span class="text-[13px] text-gray-600 dark:text-neutral-400">
                  Correct
                </span>
              </div>
              <div class="inline-flex items-center">
                <span class="size-2.5 inline-block bg-red-500 rounded-sm me-2"></span>
                <span class="text-[13px] text-gray-600 dark:text-neutral-400">
                  Incorrect
                </span>
              </div>
              <div class="inline-flex items-center">
                <span class="size-2.5 inline-block bg-orange-500 rounded-sm me-2 dark:bg-neutral-700"></span>
                <span class="text-[13px] text-gray-600 dark:text-neutral-400">
                  Unanswered
                </span>
              </div>
            </div>
            <!-- End Legend Indicator -->
          </div>
        </div>
      </div>
      
      <!-- Action Buttons -->
      <div class="flex gap-4 justify-center">
        <!-- Review Button -->
        <button type="button" 
                class="view-answers-btn py-3 px-5 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 focus:outline-hidden focus:bg-gray-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                  </svg>
          Review
        </button>
        
        <!-- Retake Button -->
        <button type="button" 
                class="retake-quiz-btn py-3 px-5 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 focus:outline-hidden focus:bg-gray-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3" />
                  </svg>
          Retake
        </button>
      </div>
      
    </div>

      <!-- Navigation Controls - Clean & Simple -->
      <div class="flex items-center justify-between px-3 pb-3">
        <!-- Back Button -->
        <button type="button" 
                class="nav-btn prev-btn flex items-center justify-center w-8 h-8 text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 transition-colors disabled:opacity-40 disabled:cursor-not-allowed" 
                onclick="navigateQuestion('prev')" 
                disabled="">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>
        
        <!-- Question Counter -->
        <div class="text-sm font-medium text-gray-600 dark:text-neutral-400">
          <span class="current-question">1</span> / <span class="total-questions">2</span>
        </div>
        
        <!-- Next Button -->
        <button type="button" 
                class="nav-btn next-btn flex items-center justify-center w-8 h-8 text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 transition-colors disabled:opacity-40 disabled:cursor-not-allowed"
                onclick="navigateQuestion('next')">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
      </div>
  </div>
</div>

<!-- ApexCharts Scripts -->
<!-- ApexCharts Scripts for Quiz Component -->
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/preline@2.0.3/dist/hs-apexcharts-helpers.js"></script>

<script>
  function renderQuizDonutChart() {
    // Clear existing chart if any
    const chartContainer = document.querySelector("#quiz-pie-chart");
    if (chartContainer) {
      chartContainer.innerHTML = '';
    }
    
    const seriesData = [1, 1, 1]; // Correct, Incorrect, Unanswered
    const seriesLabels = ['Correct', 'Incorrect', 'Unanswered'];
    
    const options = {
      chart: {
        height: 230,
        width: 230,
        type: 'donut',
        zoom: { enabled: false },
        animations: {
          enabled: false // Disable animations to prevent jerky behavior
        }
      },
      plotOptions: {
        pie: {
          donut: {
            size: '76%'
          }
        }
      },
      series: seriesData,
      labels: seriesLabels,
      legend: { show: false },
      dataLabels: { enabled: false },
      stroke: { width: 5 },
      colors: ['#22c55e', '#ef4444', '#f97316'],
      stroke: {
        colors: ['#ffffff']
      },
      states: {
        hover: {
          filter: { type: 'none', value: 0 }
        },
        active: {
          allowMultipleDataPointsSelection: false,
        }
      },
      tooltip: {
        enabled: true,
        custom: ({ seriesIndex, w }) => {
          const label = seriesLabels[seriesIndex];
          const value = seriesData[seriesIndex];
          const total = seriesData.reduce((a, b) => a + b, 0);
          const percentage = ((value / total) * 100).toFixed(1);
          const color = w.globals.colors[seriesIndex];
  
          return `
            <div class="border border-gray-300 bg-white w-36 text-gray-900 shadow-xl">
              <div class="px-2 py-1.5 font-semibold text-[13px] flex items-center">
                <span>${label}</span>
                <span class="ms-auto">${percentage}%</span>
              </div>
              <div class="border-t border-gray-200"></div>
              <div class="space-y-1.5 p-2">
                <div class="flex items-center gap-x-2 text-xs text-gray-600">
                  <span class="w-3 h-3 rounded-sm inline-block" style="background:${color}"></span>
                  <span>Questions</span>
                  <span class="ms-auto">${value}</span>
                </div>
              </div>
            </div>
          `;
        }
      }
    };
  
    const chart = new ApexCharts(chartContainer, options);
    chart.render();
  }
</script> 
<script>

  
  function toggleHint(questionIndex) {
    const questionContainer = document.querySelector(`[data-question="${questionIndex}"]`).closest('.p-6');
    const hintContainer = questionContainer.querySelector('.hint-container');
    const hintBtn = questionContainer.querySelector('.hint-btn');
    const hintText = questionContainer.querySelector('.hint-text');
    
    if (hintContainer.classList.contains('hidden')) {
      // Show hint
      hintContainer.classList.remove('hidden');
      hintText.textContent = 'Hide Hint';
    } else {
      // Hide hint
      hintContainer.classList.add('hidden');
      hintText.textContent = 'Show Hint';
    }
  }
  
  if (typeof currentQuestionIndex === 'undefined') {
    var currentQuestionIndex = 0;
  }
  
  function navigateQuestion(direction) {
    const totalQuestions = 2;
    
    if (direction === 'next' && currentQuestionIndex < totalQuestions - 1) {
      currentQuestionIndex++;
    } else if (direction === 'next' && currentQuestionIndex === totalQuestions - 1) {
      // Show summary when clicking next on last question
      showSummary();
      return;
    } else if (direction === 'prev' && currentQuestionIndex > 0) {
      currentQuestionIndex--;
    }
    
    // Update question display
    showQuestion(currentQuestionIndex);
    
    // Update navigation buttons
    updateNavigationButtons();
    
    // Update counter
    updateQuestionCounter();
  }
  
  function showSummary() {
    // Pre-render the chart before showing summary
    renderQuizDonutChart();
    
    // Hide all questions
    const questions = document.querySelectorAll('.p-6');
    questions.forEach((question, i) => {
      if (i < questions.length - 1) { // Don't hide the summary card
        question.style.display = 'none';
      }
    });
    
    // Show summary card
    const summaryCard = document.querySelector('.summary-card');
    if (summaryCard) {
      summaryCard.classList.remove('hidden');
      summaryCard.style.display = 'block';
    }
    
    updateNavigationButtonsForSummary();
  }
  
  function showQuestion(index) {
    const questions = document.querySelectorAll('.p-6');
    questions.forEach((question, i) => {
      if (i === index) {
        question.style.display = 'block';
      } else {
        question.style.display = 'none';
      }
    });
  }
  
  function updateNavigationButtons() {
    const totalQuestions = 2;
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    
    if (prevBtn) {
      prevBtn.disabled = currentQuestionIndex === 0;
    }
    if (nextBtn) {
      nextBtn.disabled = false;
    }
  }
  
  function updateQuestionCounter() {
    const currentQuestionSpan = document.querySelector('.current-question');
    if (currentQuestionSpan) {
      currentQuestionSpan.textContent = currentQuestionIndex + 1;
    }
  }
  
  function updateNavigationButtonsForSummary() {
    const navigationContainer = document.querySelector('.flex.items-center.justify-between.px-3.pb-3');
    if (navigationContainer) {
      navigationContainer.style.display = 'none';
    }
  }
  
  
  function selectOption(element) {
    const questionIndex = element.getAttribute('data-question');
    const selectedOption = element.getAttribute('data-option');
    const correctOption = element.getAttribute('data-correct');
    
    // Reset all options in this question to default state
    const questionOptions = document.querySelectorAll(`[data-question="${questionIndex}"]`);
    questionOptions.forEach(option => {
      option.classList.remove('border-emerald-500', 'bg-emerald-50', 'dark:bg-emerald-900/20', 'border-red-500', 'bg-red-50', 'dark:bg-red-900/20');
      option.classList.add('border-gray-200', 'dark:border-neutral-600');
      // Hide all checkmarks and wrong icons
      const checkmark = option.querySelector('.checkmark-icon');
      const wrongIcon = option.querySelector('.wrong-icon');
      if (checkmark) checkmark.classList.add('hidden');
      if (wrongIcon) wrongIcon.classList.add('hidden');
    });
    
    // Hide explanation and hint when selecting new option
    const questionContainer = element.closest('.p-6');
    const explanationContainer = questionContainer.querySelector('.explanation-container');
    const hintContainer = questionContainer.querySelector('.hint-container');
    const hintBtn = questionContainer.querySelector('.hint-btn');
    const hintText = questionContainer.querySelector('.hint-text');
    
    if (explanationContainer) explanationContainer.classList.add('hidden');
    if (hintContainer) hintContainer.classList.add('hidden');
    if (hintBtn) hintBtn.classList.add('hidden');
    
    // Apply styling based on selection
    if (selectedOption === correctOption) {
      // Correct answer selected - full emerald styling
      element.classList.remove('border-gray-200', 'dark:border-neutral-600', 'border-dashed');
      element.classList.add('border-emerald-500', 'bg-emerald-50', 'dark:bg-emerald-900/20');
      // Show checkmark
      const checkmark = element.querySelector('.checkmark-icon');
      if (checkmark) checkmark.classList.remove('hidden');
      
      // Show explanation with emerald theme for correct answer
      const explanationContainer = questionContainer.querySelector('.explanation-container');
      const explanationCard = questionContainer.querySelector('.explanation-card');
      if (explanationContainer) {
        explanationContainer.classList.remove('hidden');
        explanationCard.className = 'explanation-card bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-4';
        const headerIcon = explanationCard.querySelector('svg');
        const headerTitle = explanationCard.querySelector('h5');
        if (headerIcon) headerIcon.className = 'w-4 h-4 mr-2 text-emerald-600 dark:text-emerald-500';
        if (headerTitle) headerTitle.className = 'text-sm font-medium text-emerald-800 dark:text-emerald-200';
      }
    } else {
      // Incorrect answer selected
      element.classList.remove('border-gray-200', 'dark:border-neutral-600');
      element.classList.add('border-red-500', 'bg-red-50', 'dark:bg-red-900/20');
      
      // Show wrong icon
      const wrongIcon = element.querySelector('.wrong-icon');
      if (wrongIcon) wrongIcon.classList.remove('hidden');
      
      const correctElement = document.querySelector(`[data-question="${questionIndex}"][data-option="${correctOption}"]`);
      if (correctElement) {
        correctElement.classList.remove('border-gray-200', 'dark:border-neutral-600');
        correctElement.classList.add('border-emerald-500', 'bg-emerald-50', 'dark:bg-emerald-900/20');
        const checkmark = correctElement.querySelector('.checkmark-icon');
        if (checkmark) checkmark.classList.remove('hidden');
      }
      
      // Show explanation with gray theme for wrong answer
      const explanationContainer = questionContainer.querySelector('.explanation-container');
      const explanationCard = questionContainer.querySelector('.explanation-card');
      if (explanationContainer) {
        explanationContainer.classList.remove('hidden');
        explanationCard.className = 'explanation-card bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-600 rounded-lg p-4';
        const headerIcon = explanationCard.querySelector('svg');
        const headerTitle = explanationCard.querySelector('h5');
        if (headerIcon) headerIcon.className = 'w-4 h-4 mr-2 text-gray-600 dark:text-neutral-400';
        if (headerTitle) headerTitle.className = 'text-sm font-medium text-gray-800 dark:text-neutral-200';
      }
    }
  }
  
  // Initialize quiz navigation
  document.addEventListener('DOMContentLoaded', function() {
    showQuestion(0);
    updateNavigationButtons();
    updateQuestionCounter();
    
    // Add event listeners for summary buttons
    document.addEventListener('click', function(e) {
      if (e.target.closest('.view-answers-btn')) {
        // Handle view answers - could show detailed review
        console.log('View answers clicked');
      }
      
      if (e.target.closest('.retake-quiz-btn')) {
        // Reset quiz and go back to first question
        resetQuiz();
      }
    });
    
    // Initialize pie chart when summary is shown
    if (document.querySelector('.summary-card')) {
      renderQuizDonutChart();
    }
  });
  
  
  
  function resetQuiz() {
    // Reset all selections
    const allOptions = document.querySelectorAll('.option-item');
    allOptions.forEach(option => {
      option.classList.remove('border-emerald-500', 'bg-emerald-50', 'dark:bg-emerald-900/20', 'border-red-500', 'bg-red-50', 'dark:bg-red-900/20', 'border-dashed');
      option.classList.add('border-gray-200', 'dark:border-neutral-600');
      
      const checkmark = option.querySelector('.checkmark-icon');
      const wrongIcon = option.querySelector('.wrong-icon');
      if (checkmark) checkmark.classList.add('hidden');
      if (wrongIcon) wrongIcon.classList.add('hidden');
    });
    
    // Hide explanations
    const explanations = document.querySelectorAll('.explanation-container');
    explanations.forEach(exp => exp.classList.add('hidden'));
    
    // Show hints
    const hints = document.querySelectorAll('.hint-btn');
    hints.forEach(hint => hint.classList.remove('hidden'));
    
    // Reset to first question
    currentQuestionIndex = 0;
    showQuestion(0);
    updateNavigationButtons();
    updateQuestionCounter();
    
    // Hide summary
    const summaryCard = document.querySelector('.summary-card');
    if (summaryCard) {
      summaryCard.classList.add('hidden');
      summaryCard.style.display = 'none';
    }
    
    // Show navigation again
    const navigationContainer = document.querySelector('.flex.items-center.justify-between.px-3.pb-3');
    if (navigationContainer) {
      navigationContainer.style.display = 'flex';
    }
  }
</script>
  
                      </div>
                    </div>
                  </div>
                </div>
              </div>
        </div>
      </div>
    </div>   

  </div>
    <!-- Customize Quiz Modal -->
  <div id="customize-quiz-modal" class="hs-overlay hidden size-full fixed top-0 start-0 z-[9999] overflow-x-hidden overflow-y-auto [--close-when-click-inside:true] pointer-events-none" role="dialog" tabindex="-1" aria-labelledby="customize-quiz-modal-label">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity"></div>
    <div class="hs-overlay-open:mt-7 hs-overlay-open:opacity-100 hs-overlay-open:duration-500 mt-0 opacity-0 ease-out transition-all sm:max-w-lg sm:w-full m-3 sm:mx-auto h-[calc(100%-56px)] min-h-[calc(100%-56px)] flex items-center relative z-[10000]">
      <div class="w-full max-h-full flex flex-col bg-white rounded-xl pointer-events-auto shadow-xl dark:bg-neutral-800 relative z-[10000]">
        <!-- Header -->
        <div class="py-3 px-4 flex justify-between items-center border-b border-stone-200 dark:border-neutral-700">
          <h3 id="customize-quiz-modal-label" class="font-semibold text-stone-800 dark:text-neutral-200">
            Customize Quiz
          </h3>
          <button type="button" class="size-8 inline-flex justify-center items-center gap-x-2 rounded-full border border-transparent bg-stone-100 text-stone-800 hover:bg-stone-200 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-stone-200 dark:bg-neutral-700 dark:hover:bg-neutral-600 dark:text-neutral-400 dark:focus:bg-neutral-600" aria-label="Close" data-hs-overlay="#customize-quiz-modal">
            <span class="sr-only">Close</span>
            <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
          </button>
        </div>
        <!-- End Header -->

        <!-- Body -->
        <div class="overflow-y-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-stone-100 [&::-webkit-scrollbar-thumb]:bg-stone-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500">
          <div class="p-4 space-y-5">
            <!-- Difficulty -->
            <div>
              <label class="block mb-2 text-sm font-medium text-stone-800 dark:text-white">
                Difficulty
              </label>
              <div class="h-12 w-full rounded-lg border border-stone-200 dark:border-neutral-600 px-1 flex items-center bg-white dark:bg-neutral-800">
                <div class="flex flex-wrap gap-1.5">
                  <button type="button" class="difficulty-btn rounded-md py-1 px-2 text-sm flex items-center transition-all duration-200 gap-1.5 bg-white dark:bg-neutral-700 text-stone-600 dark:text-neutral-300" data-difficulty="easy">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-[14px] w-[14px]">
                      <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
                    </svg>
                    Easy
                  </button>
                  
                  <button type="button" class="difficulty-btn rounded-md py-1 px-2 text-sm flex items-center transition-all duration-200 gap-1.5 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20" data-difficulty="medium">
                    <span class="flex items-center gap-[2px]">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-[14px] w-[14px]">
                        <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
                      </svg>
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-[14px] w-[14px]">
                        <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
                      </svg>
                    </span>
                    Medium
                  </button>
                  
                  <button type="button" class="difficulty-btn rounded-md py-1 px-2 text-sm flex items-center transition-all duration-200 gap-1.5 bg-white dark:bg-neutral-700 text-stone-600 dark:text-neutral-300" data-difficulty="hard">
                    <span class="flex items-center gap-[2px]">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-[14px] w-[14px]">
                        <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
                      </svg>
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-[14px] w-[14px]">
                        <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
                      </svg>
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-[14px] w-[14px]">
                        <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
                      </svg>
                    </span>
                    Hard
                  </button>
                </div>
              </div>
            </div>
            <!-- End Difficulty -->

            <!-- Number of Questions -->
            <div>
              <label for="question-count" class="block mb-2 text-sm font-medium text-stone-800 dark:text-white">
                Number of Questions
              </label>
              <input type="number" id="question-count" value="10" min="1" max="50" class="py-2 sm:py-2.5 px-3 block w-full border-stone-200 rounded-lg sm:text-sm placeholder:text-stone-400 focus:border-emerald-500 focus:ring-emerald-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-transparent dark:border-neutral-700 dark:text-neutral-300 dark:placeholder:text-white/60 dark:focus:ring-neutral-600">
            </div>
            <!-- End Number of Questions -->

            <!-- Page Range -->
            <div>
              <div class="flex items-center gap-1.5 mb-2">
                <label class="text-sm font-medium text-stone-800 dark:text-white">
                  Page Range
                </label>
                <div class="hs-tooltip [--placement:top] sm:[--placement:right] mt-1">
                  <button type="button" class="hs-tooltip-toggle inline-flex justify-center items-center size-4 text-stone-500 hover:text-stone-700 dark:text-neutral-400 dark:hover:text-neutral-300">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-4">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M12 16v-4"/>
                      <path d="M12 8h.01"/>
                    </svg>
                    <span class="sr-only">Info</span>
                  </button>
                  <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity hidden invisible z-10 py-1 px-2 bg-stone-900 text-xs font-medium text-white rounded-lg shadow-sm dark:bg-neutral-700 max-w-[200px] sm:max-w-none" role="tooltip">
                    Specify the page range to generate questions from
                  </span>
                </div>
              </div>
              <div class="grid sm:grid-cols-2 gap-3">
                <div>
                  <input type="number" id="page-from" min="1" placeholder="1" class="py-2 sm:py-2.5 px-3 block w-full border-stone-200 rounded-lg sm:text-sm placeholder:text-stone-400 focus:border-emerald-500 focus:ring-emerald-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-transparent dark:border-neutral-700 dark:text-neutral-300 dark:placeholder:text-white/60 dark:focus:ring-neutral-600">
                </div>
                <div>
                  <input type="number" id="page-to" min="1" placeholder="10" class="py-2 sm:py-2.5 px-3 block w-full border-stone-200 rounded-lg sm:text-sm placeholder:text-stone-400 focus:border-emerald-500 focus:ring-emerald-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-transparent dark:border-neutral-700 dark:text-neutral-300 dark:placeholder:text-white/60 dark:focus:ring-neutral-600">
                </div>
              </div>
            </div>
            <!-- End Page Range -->
          </div>
        </div>
        <!-- End Body -->

        <!-- Footer -->
        <div class="p-4 flex justify-end gap-x-2">
          <div class="w-full flex justify-end items-center gap-x-2">
            <button type="button" class="py-2 px-3 inline-flex justify-center items-center text-start bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-overlay="#customize-quiz-modal">
              Cancel
            </button>

            <button type="button" class="py-2 px-3 inline-flex justify-center items-center gap-x-2 text-start bg-emerald-600 border border-emerald-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-emerald-300 dark:focus:ring-emerald-500" data-hs-overlay="#customize-quiz-modal">
              Generate Quiz
            </button>
          </div>
        </div>
        <!-- End Footer -->
      </div>
    </div>
  </div>
  <!-- End Customize Quiz Modal -->

  <!-- JavaScript for difficulty selection -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const difficultyButtons = document.querySelectorAll('.difficulty-btn');
      
      // Function to reset all buttons to default state
      function resetDifficultyButtons() {
        difficultyButtons.forEach(btn => {
          btn.classList.remove('bg-emerald-500/10', 'text-emerald-600', 'dark:text-emerald-400', 'border-emerald-500/20');
          btn.classList.add('bg-white', 'dark:bg-neutral-700', 'text-stone-600', 'dark:text-neutral-300', 'border-stone-200', 'dark:border-neutral-600');
        });
      }
      
      // Function to set button as selected
      function selectDifficultyButton(selectedBtn) {
        resetDifficultyButtons();
        selectedBtn.classList.remove('bg-white', 'dark:bg-neutral-700', 'text-stone-600', 'dark:text-neutral-300', 'border-stone-200', 'dark:border-neutral-600');
        selectedBtn.classList.add('bg-emerald-500/10', 'text-emerald-600', 'dark:text-emerald-400', 'border-emerald-500/20');
      }
      
      // Add click event listeners to all difficulty buttons
      difficultyButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          selectDifficultyButton(this);
        });
      });
      
      // Set Medium as default selected (this will run after the DOM is loaded)
      const mediumBtn = document.querySelector('[data-difficulty="medium"]');
      if (mediumBtn) {
        selectDifficultyButton(mediumBtn);
      }
    });
  </script>

  <!-- Make quiz data available to JavaScript -->
  <script>
    // Expose quiz data to global scope for JavaScript access
    window.aiPdfQuizzes = [{"id":1,"title":"Probability Concepts And Distributions","completed":0,"total":15,"status":"not_started"},{"id":2,"title":"Foundational Mathematics For Machine Learning","completed":3,"total":20,"status":"in_progress"},{"id":3,"title":"Linear Models And SVMs","completed":8,"total":12,"status":"in_progress"},{"id":4,"title":"Neural Networks Fundamentals","completed":0,"total":18,"status":"not_started"},{"id":5,"title":"Deep Learning Architectures","completed":12,"total":16,"status":"in_progress"}];
  </script>
  
  <!-- JavaScript for view switching -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const generateBtn = document.getElementById('generate-quiz-btn');
      const createQuizView = document.getElementById('create-quiz-view');
      const quizzesListView = document.getElementById('quizzes-list-view');
      const quizSkeleton = document.getElementById('quiz-skeleton');
      
      const quizData = window.aiPdfQuizzes || [];
      let currentQuizIndex = 0;
      
      if (generateBtn) {
        generateBtn.addEventListener('click', function() {
          // Check if we have more quizzes to show
          if (currentQuizIndex >= quizData.length) {
            return; // Don't proceed if no more quizzes
          }
          
          // Hide create quiz view
          createQuizView.style.display = 'none';
          // Show quizzes list view
          quizzesListView.style.display = 'block';
          
          // Show skeleton loading at the top
          if (quizSkeleton) {
            quizSkeleton.style.display = 'block';
            // Move skeleton to the top of the list
            const quizzesContainer = document.querySelector('#quizzes-list-view .space-y-4');
            if (quizzesContainer.firstChild !== quizSkeleton) {
              quizzesContainer.insertBefore(quizSkeleton, quizzesContainer.firstChild);
            }
          }
          
          // Fill skeleton with quiz data after 500ms
          setTimeout(() => {
            if (currentQuizIndex < quizData.length) {
              fillSkeletonWithQuiz(quizData[currentQuizIndex]);
              currentQuizIndex++;
            }
          }, 500);
        });
      }
      
      // Also handle the Generate button in the Quizzes header
      const quizzesGenerateBtn = document.getElementById('quizzes-generate-btn');
      if (quizzesGenerateBtn) {
        quizzesGenerateBtn.addEventListener('click', function() {
          // Check if we have more quizzes to show
          if (currentQuizIndex >= quizData.length) {
            return; // Don't proceed if no more quizzes
          }
          
          // Show skeleton loading at the top
          if (quizSkeleton) {
            quizSkeleton.style.display = 'block';
            // Move skeleton to the top of the list
            const quizzesContainer = document.querySelector('#quizzes-list-view .space-y-4');
            if (quizzesContainer.firstChild !== quizSkeleton) {
              quizzesContainer.insertBefore(quizSkeleton, quizzesContainer.firstChild);
            }
          }
          
          // Fill skeleton with next quiz data after 500ms
          setTimeout(() => {
            if (currentQuizIndex < quizData.length) {
              fillSkeletonWithQuiz(quizData[currentQuizIndex]);
              currentQuizIndex++;
            }
          }, 500);
        });
      }
      
      function fillSkeletonWithQuiz(quiz) {
        // Create quiz card with actual data
        const quizCard = createQuizCard(quiz);
        
        // Replace skeleton with the new quiz card
        if (quizSkeleton) {
          quizSkeleton.outerHTML = quizCard;
        }
        
        // Reinitialize Preline dropdowns
        if (window.HSStaticMethods) {
          window.HSStaticMethods.autoInit();
        }
        
        // Check if we've shown all quizzes and disable generate buttons
        if (currentQuizIndex >= quizData.length) {
          disableGenerateButtons();
        }
      }
      
      function disableGenerateButtons() {
        // Disable the Create Quiz generate button
        if (generateBtn) {
          generateBtn.disabled = true;
          generateBtn.classList.add('opacity-50', 'cursor-not-allowed');
          generateBtn.classList.remove('hover:bg-emerald-700', 'dark:hover:bg-emerald-600');
        }
        
        // Disable the Quizzes header generate button
        const quizzesGenerateBtn = document.getElementById('quizzes-generate-btn');
        if (quizzesGenerateBtn) {
          quizzesGenerateBtn.disabled = true;
          quizzesGenerateBtn.classList.add('opacity-50', 'cursor-not-allowed');
          quizzesGenerateBtn.classList.remove('hover:bg-emerald-700', 'dark:hover:bg-emerald-600');
        }
      }
      
      function createQuizCard(quiz) {
        const percentage = Math.round((quiz.completed / quiz.total) * 100);
        
                  return `
            <div class="bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-700 p-4 hover:shadow-md transition-shadow cursor-pointer" onclick="showQuizDetail(${quiz.id})">
              <div class="flex items-start justify-between mb-3">
                <h3 class="text-sm font-medium text-gray-800 dark:text-neutral-200 pr-2 min-w-0 flex-1">${quiz.title}</h3>
                <!-- Three Dot Menu -->
                <div class="hs-dropdown [--auto-close:inside] [--placement:bottom-right] relative inline-flex" onclick="event.stopPropagation()">
                  <button type="button" class="p-1.5 inline-flex justify-center items-center text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100 dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:bg-neutral-700" aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown">
                    <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                  </button>

                <div class="hs-dropdown-menu hs-dropdown-open:opacity-100 w-auto transition-[opacity,margin] duration opacity-0 hidden z-10 bg-white rounded-xl shadow-[0_10px_40px_10px_rgba(0,0,0,0.08)] dark:shadow-[0_10px_40px_10px_rgba(0,0,0,0.2)] dark:bg-neutral-900" role="menu" aria-orientation="vertical">
                  <div class="p-1">   
                    <button type="button" class="w-full flex items-center gap-x-3 py-2 px-3 rounded-lg text-sm text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 size-3.5"><path d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3"/></svg>          
                      Restart
                    </button>
                    
                    <button type="button" class="w-full flex items-center gap-x-3 py-2 px-3 rounded-lg text-sm text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 size-3.5"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>           
                      Delete
                    </button>
                  </div>
                </div>
              </div>
            </div>
          
            <!-- Progress Bar -->
            <div class="space-y-2">
              <div class="flex justify-between text-xs text-gray-600 dark:text-neutral-400">
                <span>${quiz.completed}/${quiz.total}</span>
                <span class="font-medium">${percentage}%</span>
              </div>
              <div class="w-full bg-gray-200 dark:bg-neutral-700 rounded-full h-1.5">
                <div class="bg-emerald-600 h-1.5 rounded-full transition-all duration-300" style="width: ${percentage}%"></div>
              </div>
            </div>
          </div>
        `;
      }
    });
    
    // Simple function to show quiz detail
    window.showQuizDetail = function(quizId) {
      console.log('Showing quiz detail for quiz:', quizId);
      
      // Hide quiz list, show quiz detail
      const quizListView = document.getElementById('quizzes-list-view');
      const quizDetailView = document.getElementById('quiz-detail-view');
      
      if (quizListView) quizListView.style.display = 'none';
      if (quizDetailView) {
        quizDetailView.style.display = 'block';
        console.log('Quiz detail view displayed');
        
        // Ensure all quiz content is visible
        const questionContent = quizDetailView.querySelector('#question-1');
        if (questionContent) {
          questionContent.style.display = 'block';
          questionContent.style.visibility = 'visible';
          questionContent.style.opacity = '1';
          console.log('Question content made visible');
        }
      }
    };
    
    // Function to go back to quiz list
    window.showQuizList = function() {
      // Hide quiz detail, show quiz list
      document.getElementById('quiz-detail-view').style.display = 'none';
      document.getElementById('quizzes-list-view').style.display = 'block';
    };
    
    // Essential functions for customize modal
    window.incrementQuestionCount = function() {
      const input = document.getElementById('question-count');
      const currentValue = parseInt(input.value);
      if (currentValue < parseInt(input.max)) {
        input.value = currentValue + 1;
      }
    };

    window.decrementQuestionCount = function() {
      const input = document.getElementById('question-count');
      const currentValue = parseInt(input.value);
      if (currentValue > parseInt(input.min)) {
        input.value = currentValue - 1;
      }
    };

    // Apply customize settings
    window.applyCustomizeSettings = function() {
      const difficulty = document.querySelector('input[name="difficulty"]:checked').value;
      const questionCount = document.getElementById('question-count').value;
      const contentType = document.querySelector('input[name="content-type"]:checked').value;
      
      let contentSelection = {};
      if (contentType === 'topics') {
        const selectedTopics = Array.from(document.querySelectorAll('#selected-topics > div')).map(div => div.textContent.trim().split('\n')[0]);
        contentSelection = { type: 'topics', topics: selectedTopics };
      } else {
        const pageFrom = document.getElementById('page-from').value;
        const pageTo = document.getElementById('page-to').value;
        contentSelection = { type: 'pages', from: pageFrom, to: pageTo };
      }

      // Store settings (you can modify this to send to your backend)
      const settings = {
        difficulty,
        questionCount,
        contentSelection
      };

      console.log('Quiz customization settings:', settings);
      
      // You can add additional logic here to apply the settings
      // For example, update the quiz generation parameters
    };

    // Topics functionality
    document.addEventListener('DOMContentLoaded', function() {
      const topicsSearch = document.getElementById('topics-search');
      const topicsDropdown = document.getElementById('topics-dropdown');
      const topicOptions = document.querySelectorAll('.topic-option');

      if (topicsSearch) {
        topicsSearch.addEventListener('focus', function() {
          topicsDropdown.classList.remove('hidden');
        });

        topicsSearch.addEventListener('input', function() {
          const searchTerm = this.value.toLowerCase();
          topicOptions.forEach(option => {
            const topicText = option.textContent.toLowerCase();
            if (topicText.includes(searchTerm)) {
              option.style.display = 'block';
            } else {
              option.style.display = 'none';
            }
          });
        });

        // Hide dropdown when clicking outside
        document.addEventListener('click', function(e) {
          if (!topicsSearch.contains(e.target) && !topicsDropdown.contains(e.target)) {
            topicsDropdown.classList.add('hidden');
          }
        });
      }

      // Topic selection functionality
      topicOptions.forEach(option => {
        option.addEventListener('click', function() {
          const topic = this.getAttribute('data-topic');
          const topicText = this.textContent;
          addSelectedTopic(topic, topicText);
          topicsDropdown.classList.add('hidden');
          topicsSearch.value = '';
        });
      });
    });

    // Add selected topic to the display
    function addSelectedTopic(topic, topicText) {
      const selectedTopics = document.getElementById('selected-topics');
      const topicTag = document.createElement('div');
      topicTag.className = 'inline-flex items-center gap-x-1 px-2 py-1 text-xs font-medium bg-emerald-100 text-emerald-800 rounded-full dark:bg-emerald-900/20 dark:text-emerald-300';
      topicTag.innerHTML = `
        ${topicText}
        <button type="button" onclick="removeTopic(this)" class="text-emerald-600 hover:text-emerald-800 dark:text-emerald-400 dark:hover:text-emerald-300">
          <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      `;
      selectedTopics.appendChild(topicTag);
    }

    // Remove selected topic
    window.removeTopic = function(button) {
      button.closest('div').remove();
    };
    
  </script>
</div>
<!-- End AI Quiz Content Tab -->
<!-- ApexCharts Scripts -->
<!-- ApexCharts Scripts for Quiz Component -->
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/preline@2.0.3/dist/hs-apexcharts-helpers.js"></script>

<script>
  function renderQuizDonutChart() {
    // Clear existing chart if any
    const chartContainer = document.querySelector("#quiz-pie-chart");
    if (chartContainer) {
      chartContainer.innerHTML = '';
    }
    
    const seriesData = [1, 1, 1]; // Correct, Incorrect, Unanswered
    const seriesLabels = ['Correct', 'Incorrect', 'Unanswered'];
    
    const options = {
      chart: {
        height: 230,
        width: 230,
        type: 'donut',
        zoom: { enabled: false },
        animations: {
          enabled: false // Disable animations to prevent jerky behavior
        }
      },
      plotOptions: {
        pie: {
          donut: {
            size: '76%'
          }
        }
      },
      series: seriesData,
      labels: seriesLabels,
      legend: { show: false },
      dataLabels: { enabled: false },
      stroke: { width: 5 },
      colors: ['#22c55e', '#ef4444', '#f97316'],
      stroke: {
        colors: ['#ffffff']
      },
      states: {
        hover: {
          filter: { type: 'none', value: 0 }
        },
        active: {
          allowMultipleDataPointsSelection: false,
        }
      },
      tooltip: {
        enabled: true,
        custom: ({ seriesIndex, w }) => {
          const label = seriesLabels[seriesIndex];
          const value = seriesData[seriesIndex];
          const total = seriesData.reduce((a, b) => a + b, 0);
          const percentage = ((value / total) * 100).toFixed(1);
          const color = w.globals.colors[seriesIndex];
  
          return `
            <div class="border border-gray-300 bg-white w-36 text-gray-900 shadow-xl">
              <div class="px-2 py-1.5 font-semibold text-[13px] flex items-center">
                <span>${label}</span>
                <span class="ms-auto">${percentage}%</span>
              </div>
              <div class="border-t border-gray-200"></div>
              <div class="space-y-1.5 p-2">
                <div class="flex items-center gap-x-2 text-xs text-gray-600">
                  <span class="w-3 h-3 rounded-sm inline-block" style="background:${color}"></span>
                  <span>Questions</span>
                  <span class="ms-auto">${value}</span>
                </div>
              </div>
            </div>
          `;
        }
      }
    };
  
    const chart = new ApexCharts(chartContainer, options);
    chart.render();
  }
</script> 
<script>

  
  function toggleHint(questionIndex) {
    const questionContainer = document.querySelector(`[data-question="${questionIndex}"]`).closest('.p-6');
    const hintContainer = questionContainer.querySelector('.hint-container');
    const hintBtn = questionContainer.querySelector('.hint-btn');
    const hintText = questionContainer.querySelector('.hint-text');
    
    if (hintContainer.classList.contains('hidden')) {
      // Show hint
      hintContainer.classList.remove('hidden');
      hintText.textContent = 'Hide Hint';
    } else {
      // Hide hint
      hintContainer.classList.add('hidden');
      hintText.textContent = 'Show Hint';
    }
  }
  
  if (typeof currentQuestionIndex === 'undefined') {
    var currentQuestionIndex = 0;
  }
  
  function navigateQuestion(direction) {
    const totalQuestions = 2;
    
    if (direction === 'next' && currentQuestionIndex < totalQuestions - 1) {
      currentQuestionIndex++;
    } else if (direction === 'next' && currentQuestionIndex === totalQuestions - 1) {
      // Show summary when clicking next on last question
      showSummary();
      return;
    } else if (direction === 'prev' && currentQuestionIndex > 0) {
      currentQuestionIndex--;
    }
    
    // Update question display
    showQuestion(currentQuestionIndex);
    
    // Update navigation buttons
    updateNavigationButtons();
    
    // Update counter
    updateQuestionCounter();
  }
  
  function showSummary() {
    // Pre-render the chart before showing summary
    renderQuizDonutChart();
    
    // Hide all questions
    const questions = document.querySelectorAll('.p-6');
    questions.forEach((question, i) => {
      if (i < questions.length - 1) { // Don't hide the summary card
        question.style.display = 'none';
      }
    });
    
    // Show summary card
    const summaryCard = document.querySelector('.summary-card');
    if (summaryCard) {
      summaryCard.classList.remove('hidden');
      summaryCard.style.display = 'block';
    }
    
    updateNavigationButtonsForSummary();
  }
  
  function showQuestion(index) {
    const questions = document.querySelectorAll('.p-6');
    questions.forEach((question, i) => {
      if (i === index) {
        question.style.display = 'block';
      } else {
        question.style.display = 'none';
      }
    });
  }
  
  function updateNavigationButtons() {
    const totalQuestions = 2;
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    
    if (prevBtn) {
      prevBtn.disabled = currentQuestionIndex === 0;
    }
    if (nextBtn) {
      nextBtn.disabled = false;
    }
  }
  
  function updateQuestionCounter() {
    const currentQuestionSpan = document.querySelector('.current-question');
    if (currentQuestionSpan) {
      currentQuestionSpan.textContent = currentQuestionIndex + 1;
    }
  }
  
  function updateNavigationButtonsForSummary() {
    const navigationContainer = document.querySelector('.flex.items-center.justify-between.px-3.pb-3');
    if (navigationContainer) {
      navigationContainer.style.display = 'none';
    }
  }
  
  
  function selectOption(element) {
    const questionIndex = element.getAttribute('data-question');
    const selectedOption = element.getAttribute('data-option');
    const correctOption = element.getAttribute('data-correct');
    
    // Reset all options in this question to default state
    const questionOptions = document.querySelectorAll(`[data-question="${questionIndex}"]`);
    questionOptions.forEach(option => {
      option.classList.remove('border-emerald-500', 'bg-emerald-50', 'dark:bg-emerald-900/20', 'border-red-500', 'bg-red-50', 'dark:bg-red-900/20');
      option.classList.add('border-gray-200', 'dark:border-neutral-600');
      // Hide all checkmarks and wrong icons
      const checkmark = option.querySelector('.checkmark-icon');
      const wrongIcon = option.querySelector('.wrong-icon');
      if (checkmark) checkmark.classList.add('hidden');
      if (wrongIcon) wrongIcon.classList.add('hidden');
    });
    
    // Hide explanation and hint when selecting new option
    const questionContainer = element.closest('.p-6');
    const explanationContainer = questionContainer.querySelector('.explanation-container');
    const hintContainer = questionContainer.querySelector('.hint-container');
    const hintBtn = questionContainer.querySelector('.hint-btn');
    const hintText = questionContainer.querySelector('.hint-text');
    
    if (explanationContainer) explanationContainer.classList.add('hidden');
    if (hintContainer) hintContainer.classList.add('hidden');
    if (hintBtn) hintBtn.classList.add('hidden');
    
    // Apply styling based on selection
    if (selectedOption === correctOption) {
      // Correct answer selected - full emerald styling
      element.classList.remove('border-gray-200', 'dark:border-neutral-600', 'border-dashed');
      element.classList.add('border-emerald-500', 'bg-emerald-50', 'dark:bg-emerald-900/20');
      // Show checkmark
      const checkmark = element.querySelector('.checkmark-icon');
      if (checkmark) checkmark.classList.remove('hidden');
      
      // Show explanation with emerald theme for correct answer
      const explanationContainer = questionContainer.querySelector('.explanation-container');
      const explanationCard = questionContainer.querySelector('.explanation-card');
      if (explanationContainer) {
        explanationContainer.classList.remove('hidden');
        explanationCard.className = 'explanation-card bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-4';
        const headerIcon = explanationCard.querySelector('svg');
        const headerTitle = explanationCard.querySelector('h5');
        if (headerIcon) headerIcon.className = 'w-4 h-4 mr-2 text-emerald-600 dark:text-emerald-500';
        if (headerTitle) headerTitle.className = 'text-sm font-medium text-emerald-800 dark:text-emerald-200';
      }
    } else {
      // Incorrect answer selected
      element.classList.remove('border-gray-200', 'dark:border-neutral-600');
      element.classList.add('border-red-500', 'bg-red-50', 'dark:bg-red-900/20');
      
      // Show wrong icon
      const wrongIcon = element.querySelector('.wrong-icon');
      if (wrongIcon) wrongIcon.classList.remove('hidden');
      
      const correctElement = document.querySelector(`[data-question="${questionIndex}"][data-option="${correctOption}"]`);
      if (correctElement) {
        correctElement.classList.remove('border-gray-200', 'dark:border-neutral-600');
        correctElement.classList.add('border-emerald-500', 'bg-emerald-50', 'dark:bg-emerald-900/20');
        const checkmark = correctElement.querySelector('.checkmark-icon');
        if (checkmark) checkmark.classList.remove('hidden');
      }
      
      // Show explanation with gray theme for wrong answer
      const explanationContainer = questionContainer.querySelector('.explanation-container');
      const explanationCard = questionContainer.querySelector('.explanation-card');
      if (explanationContainer) {
        explanationContainer.classList.remove('hidden');
        explanationCard.className = 'explanation-card bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-600 rounded-lg p-4';
        const headerIcon = explanationCard.querySelector('svg');
        const headerTitle = explanationCard.querySelector('h5');
        if (headerIcon) headerIcon.className = 'w-4 h-4 mr-2 text-gray-600 dark:text-neutral-400';
        if (headerTitle) headerTitle.className = 'text-sm font-medium text-gray-800 dark:text-neutral-200';
      }
    }
  }
  
  // Initialize quiz navigation
  document.addEventListener('DOMContentLoaded', function() {
    showQuestion(0);
    updateNavigationButtons();
    updateQuestionCounter();
    
    // Add event listeners for summary buttons
    document.addEventListener('click', function(e) {
      if (e.target.closest('.view-answers-btn')) {
        // Handle view answers - could show detailed review
        console.log('View answers clicked');
      }
      
      if (e.target.closest('.retake-quiz-btn')) {
        // Reset quiz and go back to first question
        resetQuiz();
      }
    });
    
    // Initialize pie chart when summary is shown
    if (document.querySelector('.summary-card')) {
      renderQuizDonutChart();
    }
  });
  
  
  
  function resetQuiz() {
    // Reset all selections
    const allOptions = document.querySelectorAll('.option-item');
    allOptions.forEach(option => {
      option.classList.remove('border-emerald-500', 'bg-emerald-50', 'dark:bg-emerald-900/20', 'border-red-500', 'bg-red-50', 'dark:bg-red-900/20', 'border-dashed');
      option.classList.add('border-gray-200', 'dark:border-neutral-600');
      
      const checkmark = option.querySelector('.checkmark-icon');
      const wrongIcon = option.querySelector('.wrong-icon');
      if (checkmark) checkmark.classList.add('hidden');
      if (wrongIcon) wrongIcon.classList.add('hidden');
    });
    
    // Hide explanations
    const explanations = document.querySelectorAll('.explanation-container');
    explanations.forEach(exp => exp.classList.add('hidden'));
    
    // Show hints
    const hints = document.querySelectorAll('.hint-btn');
    hints.forEach(hint => hint.classList.remove('hidden'));
    
    // Reset to first question
    currentQuestionIndex = 0;
    showQuestion(0);
    updateNavigationButtons();
    updateQuestionCounter();
    
    // Hide summary
    const summaryCard = document.querySelector('.summary-card');
    if (summaryCard) {
      summaryCard.classList.add('hidden');
      summaryCard.style.display = 'none';
    }
    
    // Show navigation again
    const navigationContainer = document.querySelector('.flex.items-center.justify-between.px-3.pb-3');
    if (navigationContainer) {
      navigationContainer.style.display = 'flex';
    }
  }
</script>


  </div>
  <!-- End Body -->
</div>
</div>

<!-- Scripts for Tab and Quiz Functionality -->
<script>
  // Initialize Preline tabs when DOM is loaded
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize Preline components
    if (typeof HSStaticMethods !== 'undefined') {
      HSStaticMethods.autoInit();
    }
    
    // Add custom tab switching functionality
    const chatTab = document.getElementById('ai-chat-tab');
    const quizTab = document.getElementById('ai-quiz-tab');
    const chatContent = document.getElementById('ai-chat-content');
    const quizContent = document.getElementById('ai-quiz-content');
    
    // Function to switch tabs
    function switchTab(activeTab, activeContent, inactiveTab, inactiveContent) {
      // Update tab states
      activeTab.classList.add('active');
      activeTab.setAttribute('aria-selected', 'true');
      inactiveTab.classList.remove('active');
      inactiveTab.setAttribute('aria-selected', 'false');
      
      // Update content visibility using display style
      activeContent.style.display = 'block';
      inactiveContent.style.display = 'none';
      
      // Ensure Quiz card is visible when Quiz tab is active
      const quizCard = activeContent.querySelector('.bg-white.rounded-xl');
      if (quizCard) {
        quizCard.style.display = 'block';
      }
    }
    
    // Chat tab click handler
    chatTab.addEventListener('click', function() {
      switchTab(chatTab, chatContent, quizTab, quizContent);
    });
    
    // Quiz tab click handler
    quizTab.addEventListener('click', function() {
      switchTab(quizTab, quizContent, chatTab, chatContent);
    });
  });
</script>