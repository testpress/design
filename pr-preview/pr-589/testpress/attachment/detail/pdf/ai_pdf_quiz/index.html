<div class="w-full">  
  <!-- Quiz Card -->
  <div class="bg-white dark:bg-neutral-900 rounded-lg shadow-sm border border-gray-200 dark:border-neutral-700">
    
    <div class="p-6">
      <!-- Question -->
      <div class="mb-6">
        <h4 class="text-sm font-medium text-gray-800 dark:text-neutral-200 mb-2">
          1. What was the primary lifestyle of people until 10,000 B.C.E.?
        </h4>
      </div>
      
      <!-- Options -->
      <div class="grid grid-cols-1 gap-3">
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="0"
             data-option="Agricultural"
             data-correct="Nomadic"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              A.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Agricultural">Agricultural</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="0"
             data-option="Nomadic"
             data-correct="Nomadic"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              B.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Nomadic">Nomadic</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="0"
             data-option="Urban"
             data-correct="Nomadic"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              C.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Urban">Urban</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="0"
             data-option="Industrial"
             data-correct="Nomadic"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              D.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Industrial">Industrial</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
      </div>
      
      <!-- Hint Section -->
      <div class="mt-4">
        <!-- Hint Button -->
        <button type="button" 
                class="hint-btn text-xs text-gray-600 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 flex items-center"
                onclick="toggleHint('0')">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3 mr-1">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
          </svg>
          <span class="hint-text">See Hint</span>
        </button>
        
        <!-- Hint Container -->
        <div class="hint-container hidden mt-3">
          <div class="text-xs text-gray-600 dark:text-neutral-400 bg-gray-50 dark:bg-neutral-800 px-3 py-2 rounded-md border border-gray-200 dark:border-neutral-600">
            <span>Think about how early humans survived before agriculture.</span>
          </div>
        </div>
      </div>
      
      <!-- Explanation Section -->
      <div class="explanation-container hidden mt-4">
        <div class="explanation-card bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-600 rounded-lg p-4">
          <!-- Explanation Header -->
          <div class="flex items-center mb-3">
            <svg class="w-4 h-4 mr-2 text-gray-600 dark:text-neutral-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <h5 class="text-sm font-medium text-gray-800 dark:text-neutral-200">Explanation</h5>
          </div>
          
          <!-- Explanation Text -->
          <p class="text-sm text-gray-700 dark:text-neutral-300 mb-3">Until 10,000 B.C.E., people lived a nomadic lifestyle, wandering in groups in search of food and shelter.</p>
          
          <!-- Citations -->
          
          <div class="flex items-center gap-2 text-xs text-gray-500 dark:text-neutral-400">
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-primary-600 dark:text-primary-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 1">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-primary-600 dark:text-primary-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-primary-600 dark:text-primary-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
          </div>
          
        </div>
      </div>
    </div>
    
    <div class="p-6">
      <!-- Question -->
      <div class="mb-6">
        <h4 class="text-sm font-medium text-gray-800 dark:text-neutral-200 mb-2">
          2. What term is used to describe plants of the same kind cultivated on a large scale?
        </h4>
      </div>
      
      <!-- Options -->
      <div class="grid grid-cols-1 gap-3">
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="1"
             data-option="Field"
             data-correct="Crop"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              A.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Field">Field</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="1"
             data-option="Crop"
             data-correct="Crop"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              B.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Crop">Crop</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="1"
             data-option="Garden"
             data-correct="Crop"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              C.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Garden">Garden</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
        <div class="option-item flex items-start justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="1"
             data-option="Harvest"
             data-correct="Crop"
             onclick="selectOption(this)">
          <div class="flex items-start flex-1 min-w-0">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
              D.
            </span>
            <div class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden" title="Harvest">Harvest</div>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        
      </div>
      
      <!-- Hint Section -->
      <div class="mt-4">
        <!-- Hint Button -->
        <button type="button" 
                class="hint-btn text-xs text-gray-600 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 flex items-center"
                onclick="toggleHint('1')">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3 mr-1">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
          </svg>
          <span class="hint-text">See Hint</span>
        </button>
        
        <!-- Hint Container -->
        <div class="hint-container hidden mt-3">
          <div class="text-xs text-gray-600 dark:text-neutral-400 bg-gray-50 dark:bg-neutral-800 px-3 py-2 rounded-md border border-gray-200 dark:border-neutral-600">
            <span>Think about how farmers classify what they grow.</span>
          </div>
        </div>
      </div>
      
      <!-- Explanation Section -->
      <div class="explanation-container hidden mt-4">
        <div class="explanation-card bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-600 rounded-lg p-4">
          <!-- Explanation Header -->
          <div class="flex items-center mb-3">
            <svg class="w-4 h-4 mr-2 text-gray-600 dark:text-neutral-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <h5 class="text-sm font-medium text-gray-800 dark:text-neutral-200">Explanation</h5>
          </div>
          
          <!-- Explanation Text -->
          <p class="text-sm text-gray-700 dark:text-neutral-300 mb-3">A crop refers to plants of the same kind grown together in one area on a large scale.</p>
          
          <!-- Citations -->
          
          <div class="flex items-center gap-2 text-xs text-gray-500 dark:text-neutral-400">
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-primary-600 dark:text-primary-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 1">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-primary-600 dark:text-primary-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
            <svg class="shrink-0 size-3 inline-block cursor-pointer text-primary-600 dark:text-primary-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Go to reference 3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path>
            </svg>
            
          </div>
          
        </div>
      </div>
    </div>
    

    <!-- Summary Card - Clean & Simple -->
    <div class="summary-card hidden p-6">
            <!-- Score Display -->
      <div class="text-center">
        <div class="flex items-center justify-center gap-x-1.5">
          <h2 class="text-base font-medium text-gray-600 dark:text-neutral-400">
            Total score:
          </h2>
          <div class="flex items-center gap-x-1.5">
            <p class="text-base font-semibold text-gray-800 dark:text-neutral-200">
              1/3
            </p>
            <span class="text-sm leading-5 text-gray-500 dark:text-neutral-400">
              (33.3%)
            </span>
          </div>
        </div>
      </div>
      
      <!-- Pie Chart -->
      <div class="md:col-span-3 lg:col-span-2">
        <div class="py-6">
          <div class="flex flex-col justify-center items-center">
            <div id="quiz-pie-chart" class="min-h-[14rem] w-[230px] h-[230px]"></div>
            
            <!-- Legend Indicator -->
            <div class="flex justify-center sm:justify-end items-center gap-x-4 mt-3 sm:mt-6">
              <div class="inline-flex items-center">
                <span class="size-2.5 inline-block bg-green-600 rounded-sm me-2"></span>
                <span class="text-[13px] text-gray-600 dark:text-neutral-400">
                  Correct
                </span>
              </div>
              <div class="inline-flex items-center">
                <span class="size-2.5 inline-block bg-red-500 rounded-sm me-2"></span>
                <span class="text-[13px] text-gray-600 dark:text-neutral-400">
                  Incorrect
                </span>
              </div>
              <div class="inline-flex items-center">
                <span class="size-2.5 inline-block bg-orange-500 rounded-sm me-2 dark:bg-neutral-700"></span>
                <span class="text-[13px] text-gray-600 dark:text-neutral-400">
                  Unanswered
                </span>
              </div>
            </div>
            <!-- End Legend Indicator -->
          </div>
        </div>
      </div>
      
      <!-- Action Buttons -->
      <div class="flex gap-4 justify-center">
        <!-- Review Button -->
        <button type="button" 
                class="view-answers-btn py-3 px-5 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 focus:outline-hidden focus:bg-gray-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                  </svg>
          Review
        </button>
        
        <!-- Retake Button -->
        <button type="button" 
                class="retake-quiz-btn py-3 px-5 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 focus:outline-hidden focus:bg-gray-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3" />
                  </svg>
          Retake
        </button>
      </div>
      
    </div>

      <!-- Navigation Controls - Clean & Simple -->
      <div class="flex items-center justify-between px-3 pb-3">
        <!-- Back Button -->
        <button type="button" 
                class="nav-btn prev-btn flex items-center justify-center w-8 h-8 text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 transition-colors disabled:opacity-40 disabled:cursor-not-allowed" 
                onclick="navigateQuestion('prev')" 
                disabled="">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>
        
        <!-- Question Counter -->
        <div class="text-sm font-medium text-gray-600 dark:text-neutral-400">
          <span class="current-question">1</span> / <span class="total-questions">2</span>
        </div>
        
        <!-- Next Button -->
        <button type="button" 
                class="nav-btn next-btn flex items-center justify-center w-8 h-8 text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 transition-colors disabled:opacity-40 disabled:cursor-not-allowed"
                onclick="navigateQuestion('next')">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
      </div>
  </div>
</div>

<!-- ApexCharts Scripts -->
<!-- ApexCharts Scripts for Quiz Component -->
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/preline@2.0.3/dist/hs-apexcharts-helpers.js"></script>

<script>
  function renderQuizDonutChart() {
    // Clear existing chart if any
    const chartContainer = document.querySelector("#quiz-pie-chart");
    if (chartContainer) {
      chartContainer.innerHTML = '';
    }
    
    const seriesData = [1, 1, 1]; // Correct, Incorrect, Unanswered
    const seriesLabels = ['Correct', 'Incorrect', 'Unanswered'];
    
    const options = {
      chart: {
        height: 230,
        width: 230,
        type: 'donut',
        zoom: { enabled: false },
        animations: {
          enabled: false // Disable animations to prevent jerky behavior
        }
      },
      plotOptions: {
        pie: {
          donut: {
            size: '76%'
          }
        }
      },
      series: seriesData,
      labels: seriesLabels,
      legend: { show: false },
      dataLabels: { enabled: false },
      stroke: { width: 5 },
      colors: ['#22c55e', '#ef4444', '#f97316'],
      stroke: {
        colors: ['#ffffff']
      },
      states: {
        hover: {
          filter: { type: 'none', value: 0 }
        },
        active: {
          allowMultipleDataPointsSelection: false,
        }
      },
      tooltip: {
        enabled: true,
        custom: ({ seriesIndex, w }) => {
          const label = seriesLabels[seriesIndex];
          const value = seriesData[seriesIndex];
          const total = seriesData.reduce((a, b) => a + b, 0);
          const percentage = ((value / total) * 100).toFixed(1);
          const color = w.globals.colors[seriesIndex];
  
          return `
            <div class="border border-gray-300 bg-white w-36 text-gray-900 shadow-xl">
              <div class="px-2 py-1.5 font-semibold text-[13px] flex items-center">
                <span>${label}</span>
                <span class="ms-auto">${percentage}%</span>
              </div>
              <div class="border-t border-gray-200"></div>
              <div class="space-y-1.5 p-2">
                <div class="flex items-center gap-x-2 text-xs text-gray-600">
                  <span class="w-3 h-3 rounded-sm inline-block" style="background:${color}"></span>
                  <span>Questions</span>
                  <span class="ms-auto">${value}</span>
                </div>
              </div>
            </div>
          `;
        }
      }
    };
  
    const chart = new ApexCharts(chartContainer, options);
    chart.render();
  }
</script> 
<script>

  
  function toggleHint(questionIndex) {
    const questionContainer = document.querySelector(`[data-question="${questionIndex}"]`).closest('.p-6');
    const hintContainer = questionContainer.querySelector('.hint-container');
    const hintBtn = questionContainer.querySelector('.hint-btn');
    const hintText = questionContainer.querySelector('.hint-text');
    
    if (hintContainer.classList.contains('hidden')) {
      // Show hint
      hintContainer.classList.remove('hidden');
      hintText.textContent = 'Hide Hint';
    } else {
      // Hide hint
      hintContainer.classList.add('hidden');
      hintText.textContent = 'Show Hint';
    }
  }
  
  if (typeof currentQuestionIndex === 'undefined') {
    var currentQuestionIndex = 0;
  }
  
  function navigateQuestion(direction) {
    const totalQuestions = 2;
    
    if (direction === 'next' && currentQuestionIndex < totalQuestions - 1) {
      currentQuestionIndex++;
    } else if (direction === 'next' && currentQuestionIndex === totalQuestions - 1) {
      // Show summary when clicking next on last question
      showSummary();
      return;
    } else if (direction === 'prev' && currentQuestionIndex > 0) {
      currentQuestionIndex--;
    }
    
    // Update question display
    showQuestion(currentQuestionIndex);
    
    // Update navigation buttons
    updateNavigationButtons();
    
    // Update counter
    updateQuestionCounter();
  }
  
  function showSummary() {
    // Pre-render the chart before showing summary
    renderQuizDonutChart();
    
    // Hide all questions
    const questions = document.querySelectorAll('.p-6');
    questions.forEach((question, i) => {
      if (i < questions.length - 1) { // Don't hide the summary card
        question.style.display = 'none';
      }
    });
    
    // Show summary card
    const summaryCard = document.querySelector('.summary-card');
    if (summaryCard) {
      summaryCard.classList.remove('hidden');
      summaryCard.style.display = 'block';
    }
    
    updateNavigationButtonsForSummary();
  }
  
  function showQuestion(index) {
    const questions = document.querySelectorAll('.p-6');
    questions.forEach((question, i) => {
      if (i === index) {
        question.style.display = 'block';
      } else {
        question.style.display = 'none';
      }
    });
  }
  
  function updateNavigationButtons() {
    const totalQuestions = 2;
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    
    if (prevBtn) {
      prevBtn.disabled = currentQuestionIndex === 0;
    }
    if (nextBtn) {
      nextBtn.disabled = false;
    }
  }
  
  function updateQuestionCounter() {
    const currentQuestionSpan = document.querySelector('.current-question');
    if (currentQuestionSpan) {
      currentQuestionSpan.textContent = currentQuestionIndex + 1;
    }
  }
  
  function updateNavigationButtonsForSummary() {
    const navigationContainer = document.querySelector('.flex.items-center.justify-between.px-3.pb-3');
    if (navigationContainer) {
      navigationContainer.style.display = 'none';
    }
  }
  
  
  function selectOption(element) {
    const questionIndex = element.getAttribute('data-question');
    const selectedOption = element.getAttribute('data-option');
    const correctOption = element.getAttribute('data-correct');
    
    // Reset all options in this question to default state
    const questionOptions = document.querySelectorAll(`[data-question="${questionIndex}"]`);
    questionOptions.forEach(option => {
      option.classList.remove('border-primary-500', 'bg-primary-50', 'dark:bg-primary-900/20', 'border-red-500', 'bg-red-50', 'dark:bg-red-900/20');
      option.classList.add('border-gray-200', 'dark:border-neutral-600');
      // Hide all checkmarks and wrong icons
      const checkmark = option.querySelector('.checkmark-icon');
      const wrongIcon = option.querySelector('.wrong-icon');
      if (checkmark) checkmark.classList.add('hidden');
      if (wrongIcon) wrongIcon.classList.add('hidden');
    });
    
    // Hide explanation and hint when selecting new option
    const questionContainer = element.closest('.p-6');
    const explanationContainer = questionContainer.querySelector('.explanation-container');
    const hintContainer = questionContainer.querySelector('.hint-container');
    const hintBtn = questionContainer.querySelector('.hint-btn');
    const hintText = questionContainer.querySelector('.hint-text');
    
    if (explanationContainer) explanationContainer.classList.add('hidden');
    if (hintContainer) hintContainer.classList.add('hidden');
    if (hintBtn) hintBtn.classList.add('hidden');
    
    // Apply styling based on selection
    if (selectedOption === correctOption) {
      // Correct answer selected - full primary styling
      element.classList.remove('border-gray-200', 'dark:border-neutral-600', 'border-dashed');
      element.classList.add('border-primary-500', 'bg-primary-50', 'dark:bg-primary-900/20');
      // Show checkmark
      const checkmark = element.querySelector('.checkmark-icon');
      if (checkmark) checkmark.classList.remove('hidden');
      
      // Show explanation with primary theme for correct answer
      const explanationContainer = questionContainer.querySelector('.explanation-container');
      const explanationCard = questionContainer.querySelector('.explanation-card');
      if (explanationContainer) {
        explanationContainer.classList.remove('hidden');
        explanationCard.className = 'explanation-card bg-primary-50 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800 rounded-lg p-4';
        const headerIcon = explanationCard.querySelector('svg');
        const headerTitle = explanationCard.querySelector('h5');
        if (headerIcon) headerIcon.className = 'w-4 h-4 mr-2 text-primary-600 dark:text-primary-500';
        if (headerTitle) headerTitle.className = 'text-sm font-medium text-primary-800 dark:text-primary-200';
      }
    } else {
      // Incorrect answer selected
      element.classList.remove('border-gray-200', 'dark:border-neutral-600');
      element.classList.add('border-red-500', 'bg-red-50', 'dark:bg-red-900/20');
      
      // Show wrong icon
      const wrongIcon = element.querySelector('.wrong-icon');
      if (wrongIcon) wrongIcon.classList.remove('hidden');
      
      const correctElement = document.querySelector(`[data-question="${questionIndex}"][data-option="${correctOption}"]`);
      if (correctElement) {
        correctElement.classList.remove('border-gray-200', 'dark:border-neutral-600');
        correctElement.classList.add('border-primary-500', 'bg-primary-50', 'dark:bg-primary-900/20');
        const checkmark = correctElement.querySelector('.checkmark-icon');
        if (checkmark) checkmark.classList.remove('hidden');
      }
      
      // Show explanation with gray theme for wrong answer
      const explanationContainer = questionContainer.querySelector('.explanation-container');
      const explanationCard = questionContainer.querySelector('.explanation-card');
      if (explanationContainer) {
        explanationContainer.classList.remove('hidden');
        explanationCard.className = 'explanation-card bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-600 rounded-lg p-4';
        const headerIcon = explanationCard.querySelector('svg');
        const headerTitle = explanationCard.querySelector('h5');
        if (headerIcon) headerIcon.className = 'w-4 h-4 mr-2 text-gray-600 dark:text-neutral-400';
        if (headerTitle) headerTitle.className = 'text-sm font-medium text-gray-800 dark:text-neutral-200';
      }
    }
  }
  
  // Initialize quiz navigation
  document.addEventListener('DOMContentLoaded', function() {
    showQuestion(0);
    updateNavigationButtons();
    updateQuestionCounter();
    
    // Add event listeners for summary buttons
    document.addEventListener('click', function(e) {
      if (e.target.closest('.view-answers-btn')) {
        // Handle view answers - could show detailed review
        console.log('View answers clicked');
      }
      
      if (e.target.closest('.retake-quiz-btn')) {
        // Reset quiz and go back to first question
        resetQuiz();
      }
    });
    
    // Initialize pie chart when summary is shown
    if (document.querySelector('.summary-card')) {
      renderQuizDonutChart();
    }
  });
  
  
  
  function resetQuiz() {
    // Reset all selections
    const allOptions = document.querySelectorAll('.option-item');
    allOptions.forEach(option => {
      option.classList.remove('border-primary-500', 'bg-primary-50', 'dark:bg-primary-900/20', 'border-red-500', 'bg-red-50', 'dark:bg-red-900/20', 'border-dashed');
      option.classList.add('border-gray-200', 'dark:border-neutral-600');
      
      const checkmark = option.querySelector('.checkmark-icon');
      const wrongIcon = option.querySelector('.wrong-icon');
      if (checkmark) checkmark.classList.add('hidden');
      if (wrongIcon) wrongIcon.classList.add('hidden');
    });
    
    // Hide explanations
    const explanations = document.querySelectorAll('.explanation-container');
    explanations.forEach(exp => exp.classList.add('hidden'));
    
    // Show hints
    const hints = document.querySelectorAll('.hint-btn');
    hints.forEach(hint => hint.classList.remove('hidden'));
    
    // Reset to first question
    currentQuestionIndex = 0;
    showQuestion(0);
    updateNavigationButtons();
    updateQuestionCounter();
    
    // Hide summary
    const summaryCard = document.querySelector('.summary-card');
    if (summaryCard) {
      summaryCard.classList.add('hidden');
      summaryCard.style.display = 'none';
    }
    
    // Show navigation again
    const navigationContainer = document.querySelector('.flex.items-center.justify-between.px-3.pb-3');
    if (navigationContainer) {
      navigationContainer.style.display = 'flex';
    }
  }
</script>
  