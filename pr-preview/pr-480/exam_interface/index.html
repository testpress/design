<!doctype html>
<html class=" ">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Eleventy v3.0.0">
  <title>Exam Interface</title>
  <link rel="stylesheet" href="/pr-preview/pr-480/css/tailwind.css" />
  
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
  <script>
    sans = [
        'ui-sans-serif',
        'system-ui',
        '-apple-system',
        'BlinkMacSystemFont',
        '"Segoe UI"',
        'Roboto',
        '"Helvetica Neue"',
        'Arial',
        '"Noto Sans"',
        'sans-serif',
        '"Apple Color Emoji"',
        '"Segoe UI Emoji"',
        '"Segoe UI Symbol"',
        '"Noto Color Emoji"',
    ]
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter var', ...sans],
          },
        }
      }
    }
  </script>
   

  <script defer src="https://unpkg.com/alpinejs@3.4.2/dist/cdn.min.js"></script>
  <script src="/node_modules/preline/dist/preline.js"></script>

   <style>
    [x-cloak] {
      display: none !important;
    }
  </style>
</head>

 
  <body class="antialiased h-full  ">
    <div class="min-h-full">
      
<div class="h-screen flex flex-col" x-data="examComponent()", x-init="selectSection(0)">
<!-- ========== HEADER ========== -->
<header class="sticky top-0 z-50 flex justify-between  md:flex-nowrap z-50 w-full bg-white border-b border-gray-200 py-2 px-4 sm:px-6">
  <nav>
    <span class="flex-none font-semibold text-sm sm:text-lg text-black focus:outline-hidden focus:opacity-80" x-text="exam.name"></span>
  </nav>
  <div class="md:hidden flex justify-end items-center gap-x-2">
    <div class="hs-dropdown [--auto-close:inside] [--placement:bottom-left] relative inline-flex">
      <div class="hs-tooltip [--placement:bottom] inline-block">
        <button id="choose_question" aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="shrink-0 size-3.5">
            <path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
      <!-- End Notifications Button Icon -->
    
      <!-- Notifications Dropdown -->
      <div class="hs-dropdown-menu hs-dropdown-open:opacity-100 w-full sm:w-96 transition-[opacity,margin] duration opacity-0 hidden z-10 bg-white border border-gray-200  sm:rounded-lg shadow-md sm:shadow-xl dark:bg-neutral-900 dark:border-neutral-700" role="menu" aria-orientation="vertical" aria-labelledby="choose_question">

        <div  role="tabpanel" aria-labelledby="hs-pro-tabs-dnn-item-all">
        <div class="space-y-5">
          <div class="p-3">
  <p class="text-wrap font-medium text-xs sm:text-sm text-gray-800 dark:text-neutral-200">
    Choose a Question
  </p>
  <div class="flex flex-wrap flex-grow gap-3 overflow-y-auto max-h-56 mt-4">
    <template x-for="(q, index) in currentSection.questions" :key="q.q_no">
      <button
        @click="goToQuestion(index)"
        class="w-8 h-8 rounded-full text-sm font-semibold"
        :class="{
          'bg-emerald-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'answered',
          'bg-red-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'visited',
          'bg-purple-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'review',
          'bg-gray-200 text-gray-800': getQuestionStatus(currentSection.name, q.q_no) === 'not_visited'
        }"
        x-text="q.q_no"
      ></button>
    </template>
  </div>
</div>

        </div>
        </div>
      </div>
      
    </div>

  </div>
</header>
<div class="flex flex-grow overflow-hidden  ">
  <div class="w-full md:w-4/5">
  <div class="flex flex-wrap">
    <div class="w-full">
  <div class="flex flex-wrap justify-between basis-full items-center w-full">
    <div class="grid grid-cols-1 sm:hidden border-b border-gray-200 w-full px-4 sm:px-6">
      <!-- Use an "onChange" listener to redirect the user to the selected tab URL. -->
      <div x-data="{openSectionDropdown:false}" @click.outside="openSectionDropdown = false" class="relative w-full">
        <!-- Trigger Button -->
        <button
          @click="openSectionDropdown = !openSectionDropdown"
          class="w-full text-left py-2 bg-white text-sm text-gray-800 flex items-center justify-between"
        >
          <span x-text="currentSection.name"></span>
          <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
      
        <!-- Dropdown List -->
        <div
          x-show="openSectionDropdown"
          x-transition
          class="absolute mt-2 z-50 w-full max-h-60 overflow-y-auto rounded-xl bg-white shadow-xl space-y-0.5 p-1 border border-gray-200"
        >
        <template x-for="(section, index) in exam.sections" :key="section.name">
          <div
            @click="selectSection(index), openSectionDropdown = false"
            class="px-4 py-2 text-sm rounded-lg"
            :class="{
              'cursor-pointer text-gray-800 hover:bg-gray-100': isActive(index),
              'cursor-not-allowed opacity-50 text-gray-400': !isActive(index),
              'bg-gray-100': currentSectionIndex === index
            }"
            x-text="section.name"
          ></div>
        </template>
        </div>
      </div>
      
    </div>
    <div class="hidden sm:block w-full">
      <div class="">
      
        <nav class="-mb-px flex space-x-6 border-b border-gray-200" aria-label="Tabs">
          <!-- Current: "border-indigo-500 text-indigo-600", Default: "border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700" -->
    
            <template x-for="(section, index) in exam.sections" :key="index">
              <button 
              @click="selectSection(index)"
              :disabled="!isActive(index)"
              class="whitespace-nowrap truncate border-b-2 py-2 text-sm mr-4
              disabled:text-gray-400 disabled:cursor-not-allowed
               disabled:border-transparent"
              :class="{
                'border-emerald-500 text-emerald-600': currentSectionIndex === index,
                'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700': currentSectionIndex !== index,
                'text-gray-400 cursor-not-allowed': !isActive(index)
              }"
              x-text="section.name"
              ></button>
            </template>
          </nav>
        </nav>
      </div>
    </div>
  </div>
</div>


    <div  class="border-b border-gray-200 w-full">
  <div class="flex flex-wrap justify-between basis-full items-center w-full py-1 sm:px-6 px-4">
    <p class="hidden sm:inline text-wrap font-medium text-xs sm:text-sm text-gray-800 dark:text-neutral-200">
      <span class="">Section: </span><span x-text="currentSection.name"></span>
    </p>
    <button
    type="button"
    class="sm:hidden text-xs font-medium text-emerald-500 underline disabled:opacity-50 disabled:cursor-not-allowed"
    disabled
  >
    End Section
  </button>
    </p>
    <div>
      <span class="inline-flex items-center gap-x-1.5 text-xs font-medium bg-white text-stone-800">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 size-3"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
        <span x-text="formattedTime"></span>
      </span>
    </div>
  </div>
</div>
    <div class="border-b border-gray-200 w-full">
      <div class="flex flex-wrap justify-between basis-full items-center w-full py-1 sm:px-6 px-4">
  <div class="flex">
  <p class="text-wrap font-medium text-xs sm:text-sm text-gray-800 dark:text-neutral-200">
    <span class="hidden sm:inline">Question No. </span>
    <span class="inline sm:hidden">Q No. </span>
    <span x-text="currentQuestion.q_no"></span>
    <span class="ml-2 inline-flex items-center rounded-full bg-emerald-100 px-1.5 py-0.5 text-xs font-medium text-emerald-700" 
    x-text="currentQuestion.type.toUpperCase()"></span>
  </p>
  <span class="sm:hidden cursor-pointer inline-flex items-center ml-1">
    <svg x-cloak x-show="!(responses[currentSection.name]?.[currentQuestion.q_no]?.markedForReview)"
    @click="
    markForReview();
    if (currentQuestionIndex < currentSection.questions.length - 1) {
      goToQuestion(currentQuestionIndex + 1);
    }
  "
    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 text-purple-600">
      <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"></path>
    </svg>
    <svg 
    x-cloak   x-show="responses[currentSection.name]?.[currentQuestion.q_no]?.markedForReview"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 text-purple-600">
      <path fill-rule="evenodd" d="M6.32 2.577a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 0 1-1.085.67L12 18.089l-7.165 3.583A.75.75 0 0 1 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93Z" clip-rule="evenodd" />
    </svg>
    <span class="text-xs ml-1">mark for later</span>
  </span>
</div>
  <div>
    <span class="inline-flex items-center rounded-full bg-emerald-100 px-1.5 py-0.5 text-xs font-medium text-emerald-700" x-text="'+ '+ currentQuestion.mark"></span>
    <span class="inline-flex items-center rounded-full bg-red-100 px-1.5 py-0.5 text-xs font-medium text-red-700" x-text="'- '+ currentQuestion.negative"></span>
  </div>
</div>

    </div>
    <div class="bg-white px-4 py-4 sm:px-6 min-w-full">
      <article x-cloak x-show="currentQuestion.type=='mcq'">
        <div>
  <h2  class="text-base font-medium text-gray-900" x-text="currentQuestion.text"></h2>
</div>
<div class="mt-4 space-y-4 text-sm text-gray-500">
    <fieldset aria-label="Options" >
        <template x-for="(option, idx) in currentQuestion.options" :key="idx">
        <div class="relative flex items-start mb-4">
          <div class="flex h-6 items-center">
            <input :id="'option-' + idx"  name="question-options"
            x-model="selectedOption"
            :checked="responses[currentSection.name]?.[currentQuestion.q_no]?.selected === idx" :value="idx" type="radio" class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-green-600 hover:text-green-600 focus:text-green-600  focus:ring-green-600 checked:bg-green-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden">
          </div>
          <div class="ml-3 text-sm/6">
            <label :for="'option-' + idx" x-text="option"></label>
          </div>
        </div>
      </template>
    </fieldset>
</div>
      </article>
      <article x-cloak x-show="currentQuestion.type=='essay'">
        <div>
  <h2  class="text-base font-medium text-gray-900" x-text="currentQuestion.text"></h2>
</div>
<div class="mt-4 space-y-4 text-sm text-gray-500">
    <fieldset aria-label="Options" >
      <div class="space-y-2">
        <textarea  x-model="essayDraft" class="py-2 px-3 block w-full border-gray-200 rounded-lg text-sm placeholder:text-gray-400 focus:border-emerald-500 focus:ring-emerald-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-transparent dark:border-neutral-700 dark:text-neutral-300 dark:placeholder:text-white/60 dark:focus:ring-neutral-600" rows="3" placeholder="Type your answer here..."></textarea>
      </div>
    </fieldset>
</div>
      </article>
    </div>    
</div>
</div>

  <div class="hidden md:block w-full md:w-1/5  bg-white border-l border-gray-200 flex flex-wrap">
  <div class="p-5 flex flex-wrap justify-center items-center text-center border-b border-gray-200 dark:border-neutral-800">
  <img class="shrink-0 size-16 rounded-full" src="https://images.unsplash.com/photo-1624224971170-2f84fed5eb5e?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=facearea&amp;facepad=2&amp;w=900&amp;h=900&amp;q=80" alt="Avatar">
  <div class="mt-2 w-full">
    <h2 class="text-lg font-semibold text-gray-800 dark:text-neutral-200">
        Tommy Lowry
    </h2>
    <p class="mb-2 text-[13px] text-gray-500 dark:text-neutral-500">
      Tommy@gmail.com
    </p>
  </div>
</div>
  <div class="flex flex-wrap gap-4 text-xs text-gray-500 border-b border-gray-200 p-3">

  <div class="flex items-center gap-1">
    <span class="w-6 h-6 flex items-center justify-center rounded-full bg-emerald-400 text-white text-xs font-semibold" x-text="currentSectionStats.answered"></span>
    Answered
  </div>
  <div class="flex items-center gap-1">
    <span class="w-6 h-6 flex items-center justify-center rounded-full bg-red-400 text-white text-xs font-semibold" x-text="currentSectionStats.visited"></span>
    Unanswered
  </div>
  <div class="flex items-center gap-1">
    <span class="w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-800 text-xs font-semibold" x-text="currentSectionStats.notVisited"></span>
    Not Visited
  </div>
  <div class="flex items-center gap-1">
    <span class="w-6 h-6 flex items-center justify-center rounded-full bg-purple-400 text-white text-xs font-semibold" x-text="currentSectionStats.review"></span>
    Marked
  </div>
</div>
  <div class="p-3">
  <p class="text-wrap font-medium text-xs sm:text-sm text-gray-800 dark:text-neutral-200">
    Choose a Question
  </p>
  <div class="flex flex-wrap flex-grow gap-3 overflow-y-auto max-h-56 mt-4">
    <template x-for="(q, index) in currentSection.questions" :key="q.q_no">
      <button
        @click="goToQuestion(index)"
        class="w-8 h-8 rounded-full text-sm font-semibold"
        :class="{
          'bg-emerald-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'answered',
          'bg-red-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'visited',
          'bg-purple-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'review',
          'bg-gray-200 text-gray-800': getQuestionStatus(currentSection.name, q.q_no) === 'not_visited'
        }"
        x-text="q.q_no"
      ></button>
    </template>
  </div>
</div>

</div>

</div>
<footer class="bg-white border-t border-gray-200 px-4 sm:px-6 py-3 z-40">
  
  <div class="hidden sm:flex flex-1  justify-between items-center gap-2">
    <div class="space-x-2">
    <button type="button"
    @click="
    markForReview();
    if (currentQuestionIndex < currentSection.questions.length - 1) {
      goToQuestion(currentQuestionIndex + 1);
    }
  "
    class="py-2 px-3 text-nowrap inline-flex justify-center items-center text-start whitespace-nowrap bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 disabled:opacity-50  dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
      Mark for Review & Next
    </button>
    <button type="button"
    @click="clearResponse()"
    class="py-2 px-3 text-nowrap inline-flex justify-center items-center text-start whitespace-nowrap bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 disabled:opacity-50  dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
      Clear Response
    </button>
  </div>
  <div class="space-x-2">
    <button type="button"  @click="
    if (currentQuestion.type === 'mcq') {
      saveAnswer(selectedOption);
    } else if (currentQuestion.type === 'essay') {
      saveEssayAnswer();
    }
  
    if (currentQuestionIndex < currentSection.questions.length - 1) {
      goToQuestion(currentQuestionIndex + 1);
    }
  "class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-emerald-600 border border-emerald-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-emerald-300 dark:focus:ring-emerald-500" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
      Save & Next
    </button>
    <button disabled type="button" class="cursor-not-allowed py-2 px-3 text-nowrap inline-flex justify-center items-center text-start whitespace-nowrap bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 disabled:opacity-50  dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
      Submit Section
    </button>
  </div>
  </div>
  <div class="flex sm:hidden justify-between">
    <div>
      <button type="button" 
      :disabled="currentQuestionIndex === 0"
       @click="
      if (currentQuestionIndex > 0) {
        goToQuestion(currentQuestionIndex - 1);
      }
    " class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-emerald-600 border border-emerald-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-emerald-300 dark:focus:ring-emerald-500" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
        Prev
      </button>
    </div>
    <div>
      <button type="button"
      @click="
  if (currentQuestion.type === 'mcq') {
    saveAnswer(selectedOption);
  } else if (currentQuestion.type === 'essay') {
    saveEssayAnswer();
  }

  if (currentQuestionIndex < currentSection.questions.length - 1) {
    goToQuestion(currentQuestionIndex + 1);
  }
" class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-emerald-600 border border-emerald-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-emerald-300 dark:focus:ring-emerald-500" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
    <span x-text="currentQuestionIndex < currentSection.questions.length - 1 ? 'Save & Next' : 'Save'"></span>
      </button>
    </div>
  </div>
</footer>

<div class="relative z-50" aria-labelledby="modal-title" role="dialog" aria-modal="true" x-cloak x-show="show_exam_ended_modal">
  <div class="fixed inset-0 bg-gray-500/75 transition-opacity" aria-hidden="true"
  x-transition:enter="ease-out duration-300"
  x-transition:enter-start="opacity-0"
  x-transition:enter-end="opacity-100"
  x-transition:leave="ease-in duration-200"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"></div>

  <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
    <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
      <div x-transition:enter="ease-out duration-300"
      x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
      x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200"
      x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
      x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
      class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
        <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
          <div class="sm:flex sm:items-start">
            <div class="mt-3 text-center sm:mt-0 sm:text-left">
              <h3 class="text-base font-semibold text-gray-900" id="modal-title">Exam Over</h3>
              <div class="mt-2">
                <p class="text-sm text-gray-500">You've successfully completed the exam. You can review the results.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
          <a href="/exam_review/" class="inline-flex w-full justify-center rounded-md bg-emerald-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-500 sm:ml-3 sm:w-auto">Review Results</a>
        </div>
      </div>
    </div>
  </div>
</div>

</div>

    </div>

     
<script>
  function examComponent() {
    return {
      exam: {
        name: "Real CAT 2025 - Take Home Mock Test 01",
        sections: [
          {
            name: "Quantitative Aptitude",
            duration: 10,
            questions: [
              {
                q_no: 1,
                type: "mcq",
                mark: "1.00",
                negative: "0.25",
                text: "If the cost price of 15 items is equal to the selling price of 12 items, what is the profit percentage?",
                options: ["20%", "25%", "30%", "15%"]
              },
              {
                q_no: 2,
                type: "mcq",
                mark: "1.00",
                negative: "0.25",
                text: "A train 240 m long passes a pole in 24 seconds. What is the speed of the train in km/hr?",
                options: ["36", "54", "72", "90"]
              },
              {
              q_no: 3,
              type: "essay",
              mark: "5.00",
              negative: "0.00",
              text: "Explain the impact of globalization on rural economies in India."
            }
            ]
          },
          {
            name: "Verbal Ability & Reading Comprehension",
            duration: 10,
            questions: [
              {
                q_no: 1,
                type: "mcq",
                mark: "1.00",
                negative: "0.25",
                text: "Choose the most appropriate word to fill in the blank: Despite the odds, she remained ___ throughout the ordeal.",
                options: ["placid", "desperate", "resilient", "apathetic"]
              },
              {
                q_no: 2,
                type: "mcq",
                mark: "1.00",
                negative: "0.25",
                text: "Identify the grammatically correct sentence.",
                options: [
                  "Each of the players have a unique skill.",
                  "Neither the manager nor his assistants was available.",
                  "He don’t like going to the gym.",
                  "There is many reasons for this conclusion."
                ]
              }
            ]
          },
          {
            name: "Data Interpretation & Logical Reasoning",
            duration: 10,
            questions: [
                {
                  q_no: 1,
                  type: "mcq",
                  mark: "1.00",
                  negative: "0.25",
                  text: "Five friends—A, B, C, D, and E—are sitting in a row. A is to the immediate right of B but not next to E. Who is sitting in the middle if C is at one end?",
                  options: ["A", "B", "D", "E"]
                },
                {
                  q_no: 2,
                  type: "mcq",
                  mark: "1.00",
                  negative: "0.25",
                  text: "In a certain code, if BOOK is coded as 43 and PEN as 35, then what is the code for COPY?",
                  options: ["56", "62", "59", "65"]
                }
              ]
          },
        ],
      },

      currentSectionIndex: 0,
      currentQuestionIndex: 0,
      totalSeconds: 0,
      interval: null,
      isLocked: false,
      selectedOption: null,
      essayDraft: '',
      show_exam_ended_modal :false,
      responses: {},

      get currentSection() {
        return this.exam.sections[this.currentSectionIndex];
      },

      get currentQuestion() {
        return this.currentSection.questions[this.currentQuestionIndex];
      },

      get formattedTime() {
        const mins = Math.floor(this.totalSeconds / 60).toString().padStart(2, '0');
        const secs = (this.totalSeconds % 60).toString().padStart(2, '0');
        return `${mins}:${secs}`;
      },

      startTimer() {
        this.totalSeconds = this.currentSection.duration * 60;
        this.isLocked = true;

        if (this.interval) clearInterval(this.interval);
        this.interval = setInterval(() => {
          if (this.totalSeconds > 0) {
            this.totalSeconds--;
          } else {
            clearInterval(this.interval);
            this.moveToNextSection();
          }
        }, 1000);
      },

      selectSection(index) {
        if (index !== this.currentSectionIndex && this.isLocked) return;
        this.currentSectionIndex = index;
        this.currentQuestionIndex = 0;
        this.startTimer();
        this.goToQuestion(0);
      },

      isActive(index) {
        return this.currentSectionIndex === index;
      },

      goToQuestion(index) {
        this.currentQuestionIndex = index;
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};
        if (!this.responses[sectionKey][questionKey]) {
          this.responses[sectionKey][questionKey] = { selected: null, visited: true, markedForReview: false };
        } else {
          this.responses[sectionKey][questionKey].visited = true;
        }
        if (this.currentQuestion.type === 'mcq') {
          const saved = this.responses[sectionKey][questionKey]?.selected;
          this.selectedOption = saved ?? null;
        }

        if (this.currentQuestion.type === 'essay') {
          const saved = this.responses[sectionKey][questionKey]?.text;
          this.essayDraft = saved ?? '';
        }
      },

      saveAnswer(optionIndex) {
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};

        this.responses[sectionKey][questionKey] = {
          selected: optionIndex,
          markedForReview: false,
          visited: true
        };
      },

      saveEssayAnswer() {
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};
        this.responses[sectionKey][questionKey] = {
          text: this.essayDraft,
          markedForReview: false,
          visited: true
        };
      },


      markForReview() {
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};
        if (!this.responses[sectionKey][questionKey]) {
          this.responses[sectionKey][questionKey] = { selected: null, visited: true };
        }
        this.responses[sectionKey][questionKey].markedForReview = true;
      },

      getQuestionStatus(sectionName, q_no) {
        const resp = this.responses[sectionName]?.[q_no];
        if (!resp) return 'not_visited';
        if (resp.markedForReview) return 'review';
        if (resp.selected != null || resp.text != null) return 'answered';
        return 'visited';
      },

      get currentSectionStats() {
        const sectionKey = this.currentSection.name;
        const total = this.currentSection.questions.length;
        let answered = 0, visited = 0, notVisited = 0, review = 0;

        for (let q of this.currentSection.questions) {
          const status = this.getQuestionStatus(sectionKey, q.q_no);
          if (status === 'answered') answered++;
          else if (status === 'review') review++;
          else if (status === 'visited') visited++;
          else if (status === 'not_visited') notVisited++;
        }

        return { total, answered, visited, notVisited, review };
      },

      moveToNextSection() {
        if (this.currentSectionIndex < this.exam.sections.length - 1) {
          this.currentSectionIndex++;
          this.currentQuestionIndex = 0;
          this.startTimer();
          this.goToQuestion(0);
        } else {
          this.isLocked = false;
          this.show_exam_ended_modal = true;
        }
      },

      clearResponse() {
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (this.responses[sectionKey]?.[questionKey]) {
          this.responses[sectionKey][questionKey].selected = null;
          this.responses[sectionKey][questionKey].text = null;
          this.essayDraft = null;
          this.selectedOption = null;
        }
      }

    }
  }
</script>


  </body>


</html>
