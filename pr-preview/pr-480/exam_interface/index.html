<!doctype html>
<html class=" ">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Eleventy v3.0.0">
  <title>Exam Interface</title>
  <link rel="stylesheet" href="/pr-preview/pr-480/css/tailwind.css" />
  
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
  <script>
    sans = [
        'ui-sans-serif',
        'system-ui',
        '-apple-system',
        'BlinkMacSystemFont',
        '"Segoe UI"',
        'Roboto',
        '"Helvetica Neue"',
        'Arial',
        '"Noto Sans"',
        'sans-serif',
        '"Apple Color Emoji"',
        '"Segoe UI Emoji"',
        '"Segoe UI Symbol"',
        '"Noto Color Emoji"',
    ]
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter var', ...sans],
          },
        }
      }
    }
  </script>
   

  <script defer src="https://unpkg.com/alpinejs@3.4.2/dist/cdn.min.js"></script>
  <script src="/node_modules/preline/dist/preline.js"></script>

   <style>
    [x-cloak] {
      display: none !important;
    }
  </style>
</head>

 
  <body class="antialiased h-full  ">
    <div class="min-h-full">
      
<div class="h-screen flex flex-col" x-data="examComponent()", x-init="selectSection(0),initUploadFile()">
<!-- ========== HEADER ========== -->
<header class="sticky top-0 z-50 flex justify-between  md:flex-nowrap z-50 w-full bg-white border-b border-gray-200 py-2 px-4 sm:px-6">
  <nav>
    <span class="flex-none font-semibold text-sm sm:text-lg text-black focus:outline-hidden focus:opacity-80" x-text="exam.name"></span>
  </nav>
  <div class="md:hidden flex justify-end items-center gap-x-2">
    <div class="hs-dropdown  [--placement:bottom-left] relative inline-flex">
      <div class="hs-tooltip [--placement:bottom] inline-block">
        <button id="choose_question" aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="shrink-0 size-3.5">
            <path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
      <div class="hs-dropdown-menu hs-dropdown-open:opacity-100 w-full sm:w-96 transition-[opacity,margin] duration opacity-0 hidden z-10 bg-white border border-gray-200  sm:rounded-lg shadow-md sm:shadow-xl dark:bg-neutral-900 dark:border-neutral-700" role="menu" aria-orientation="vertical" aria-labelledby="choose_question">

        <div  role="tabpanel" aria-labelledby="hs-pro-tabs-dnn-item-all">
        <div>
          <div class="p-3">
  <p class="text-wrap font-medium text-xs sm:text-sm text-gray-800 dark:text-neutral-200">
    Choose a Question
  </p>
  <div class="flex flex-wrap flex-grow gap-3 overflow-y-auto max-h-56 mt-4">
    <template x-for="(q, index) in currentSection.questions" :key="q.q_no">
      <button
        @click="goToQuestion(index)"
        class="w-8 h-8 rounded-full text-sm font-semibold"
        :class="{
          'bg-emerald-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'answered',
          'bg-red-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'visited',
          'bg-purple-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'review',
          'bg-gray-200 text-gray-800': getQuestionStatus(currentSection.name, q.q_no) === 'not_visited'
        }"
        x-text="q.q_no"
      ></button>
    </template>
  </div>
</div>

          <div class="p-3 flex flex-wrap items-center gap-4 text-sm text-gray-500">
            <div class="flex items-center gap-1">
              <span class="w-3 h-3 inline-block rounded-full bg-emerald-400"></span>
              Answered
            </div>
            <div class="flex items-center gap-1">
              <span class="w-3 h-3 inline-block rounded-full bg-red-400"></span>
              Unanswered
            </div>
            <div class="flex items-center gap-1">
              <span class="w-3 h-3 inline-block rounded-full bg-gray-200"></span>
              Not Visited
            </div>
            <div class="flex items-center gap-1">
              <span class="w-3 h-3 inline-block rounded-full bg-purple-400"></span>
              Marked for review
            </div>
          </div>
        </div>
        </div>
      </div>
      
    </div>

  </div>
</header>
<div class="flex flex-grow">
    <div class="w-full md:w-4/5 flex flex-col h-full min-h-0">
    <div class="w-full">
  <div class="flex flex-wrap justify-between basis-full items-center w-full">
    <div class="grid grid-cols-1 sm:hidden border-b border-gray-200 w-full px-4 sm:px-6">
      <!-- Use an "onChange" listener to redirect the user to the selected tab URL. -->
      <div x-data="{openSectionDropdown:false}" @click.outside="openSectionDropdown = false" class="relative w-full">
        <!-- Trigger Button -->
        <button
          @click="openSectionDropdown = !openSectionDropdown"
          class="w-full text-left py-2 bg-white text-sm text-gray-800 flex items-center justify-between"
        >
          <span x-text="currentSection.name"></span>
          <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
      
        <!-- Dropdown List -->
        <div
          x-show="openSectionDropdown"
          x-transition
          class="absolute mt-2 z-50 w-full max-h-60 overflow-y-auto rounded-xl bg-white shadow-xl space-y-0.5 p-1 border border-gray-200"
        >
        <template x-for="(section, index) in exam.sections" :key="section.name">
          <div
            @click="selectSection(index), openSectionDropdown = false"
            class="px-4 py-2 text-sm rounded-lg"
            :class="{
              'cursor-pointer text-gray-800 hover:bg-gray-100': isActive(index),
              'cursor-not-allowed opacity-50 text-gray-400': !isActive(index),
              'bg-gray-100': currentSectionIndex === index
            }"
            x-text="section.name"
          ></div>
        </template>
        </div>
      </div>
      
    </div>
    <div class="hidden sm:block w-full">
      <div class="">
      
        <nav class="-mb-px flex space-x-6 border-b border-gray-200" aria-label="Tabs">
          <!-- Current: "border-indigo-500 text-indigo-600", Default: "border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700" -->
    
            <template x-for="(section, index) in exam.sections" :key="index">
              <button 
              @click="selectSection(index)"
              :disabled="!isActive(index)"
              class="whitespace-nowrap truncate border-b-2 py-2 text-sm mr-4
              disabled:text-gray-400 disabled:cursor-not-allowed
               disabled:border-transparent"
              :class="{
                'border-emerald-500 text-emerald-600': currentSectionIndex === index,
                'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700': currentSectionIndex !== index,
                'text-gray-400 cursor-not-allowed': !isActive(index)
              }"
              x-text="section.name"
              ></button>
            </template>
          </nav>
        </nav>
      </div>
    </div>
  </div>
</div>


    <div  class="border-b border-gray-200 w-full">
  <div class="flex flex-wrap justify-between basis-full items-center w-full py-2 sm:px-6 px-4">
    <p class="hidden sm:inline text-wrap font-medium text-xs sm:text-sm text-gray-800 dark:text-neutral-200">
      <span class="">Section: </span><span x-text="currentSection.name"></span>
    </p>
    <button
    type="button"
    class="sm:hidden text-sm font-medium text-emerald-500 underline disabled:opacity-60 disabled:cursor-not-allowed"
    disabled
  >
    End Section
  </button>
    </p>
    <div>
      <span class="inline-flex items-center gap-x-1.5 text-xs font-medium bg-white text-stone-800">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 size-3"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
        <span x-text="formattedTime"></span>
      </span>
    </div>
  </div>
</div>
    <div class="flex flex-wrap w-full h-full">

    <div :class="currentQuestion.passage ? 'w-full md:w-1/2' : 'w-full'" x-cloak x-show="currentQuestion.passage">
      <div class="bg-white p-4 sm:px-6 ">
      <div>
  <p x-text="currentQuestion.passage"></p>
</div>
      </div>
      </div> 
    <div :class="currentQuestion.passage ? 'w-full md:w-1/2 border-l border-gray-200' : 'w-full'">
    <div class="border-b border-gray-200">
      <div class="flex flex-wrap justify-between basis-full items-center w-full py-2 sm:px-6 px-4">
  <div class="flex">
  <p class="text-wrap font-medium text-xs sm:text-sm text-gray-800 dark:text-neutral-200">
    <span class="hidden sm:inline">Question No. </span>
    <span class="inline sm:hidden">Q No. </span>
    <span x-text="currentQuestion.q_no"></span>
    <span class="ml-2 inline-flex items-center rounded-full bg-emerald-100 px-1.5 py-0.5 text-xs font-medium text-emerald-700" 
    x-text="currentQuestion.type === 'gap_fill' ? 'Gap Fill' :
               currentQuestion.type === 'mcq' ? 'MCQ' :
               currentQuestion.type === 'essay' ? 'Essay' :
               currentQuestion.type === 'match' ? 'Match' :
               currentQuestion.type === 'file' ? 'File Upload' :
               currentQuestion.type.toUpperCase()"></span>
  </p>
  <span class="sm:hidden cursor-pointer inline-flex items-center ml-1">
    <svg x-cloak x-show="!(responses[currentSection.name]?.[currentQuestion.q_no]?.markedForReview)"
    @click="
    markForReview();
    if (currentQuestionIndex < currentSection.questions.length - 1) {
      goToQuestion(currentQuestionIndex + 1);
    }
  "
    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 text-purple-600">
      <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"></path>
    </svg>
    <svg 
    x-cloak   x-show="responses[currentSection.name]?.[currentQuestion.q_no]?.markedForReview"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 text-purple-600">
      <path fill-rule="evenodd" d="M6.32 2.577a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 0 1-1.085.67L12 18.089l-7.165 3.583A.75.75 0 0 1 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93Z" clip-rule="evenodd" />
    </svg>
    <span class="text-xs ml-1">mark for review</span>
  </span>
</div>
  <div>
    <span class="inline-flex items-center rounded-full bg-emerald-100 px-1.5 py-0.5 text-xs font-medium text-emerald-700" x-text="'+ '+ currentQuestion.mark"></span>
    <span class="inline-flex items-center rounded-full bg-red-100 px-1.5 py-0.5 text-xs font-medium text-red-700" x-text="'- '+ currentQuestion.negative"></span>
  </div>
</div>

    </div>
    <div class="bg-white p-4 sm:px-6">
      <div x-cloak x-show="currentQuestion.type=='mcq'">
        <div>
  <p x-text="currentQuestion.text"></p>
</div>
<div class="mt-4 space-y-4 text-sm">
    <fieldset aria-label="Options" >
        <template x-for="(option, idx) in currentQuestion.options" :key="idx">
        <div class="relative flex items-start mb-4">
          <template x-if="!currentQuestion.is_multi_choice">
          <div class="flex h-6 items-center">
            <input :id="'option-' + idx"  name="question-options"
            x-model="selectedOption"
            :checked="responses[currentSection.name]?.[currentQuestion.q_no]?.selected === idx" :value="idx" type="radio" class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 hover:text-emerald-600 focus:text-emerald-600  focus:ring-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden">
          </div>
        </template>
        <template x-if="currentQuestion.is_multi_choice">
          <div class="flex h-6 shrink-0 items-center">
            <div class="group grid size-4 grid-cols-1">
              <input :id="'option-' + idx"  x-model="selectedOption[idx]" aria-describedby="offers-description" name="question-options" type="checkbox" class="col-start-1 row-start-1 appearance-none rounded-sm text-emerald-600 focus:ring-emerald-600 border border-gray-300 bg-white checked:border-emerald-600 checked:bg-emerald-600 indeterminate:border-emerald-600 indeterminate:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto">
              <svg class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25" viewBox="0 0 14 14" fill="none">
                <path class="opacity-0 group-has-checked:opacity-100" d="M3 8L6 11L11 3.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                <path class="opacity-0 group-has-indeterminate:opacity-100" d="M3 7H11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </div>
          </div>
          </template>
          <div class="ml-3 text-sm/6">
            <label :for="'option-' + idx" x-text="option"></label>
          </div>
        </div>
      </template>
    </fieldset>
</div>
      </div>
      <div x-cloak x-show="currentQuestion.type=='essay'">
        <div>
  <p  x-text="currentQuestion.text"></p>
</div>
<div class="mt-4 space-y-4 text-sm">
    <fieldset aria-label="Options" >
      <div class="space-y-2">
        <textarea  x-model="essayDraft" class="py-2 px-3 block w-full border-gray-200 rounded-lg text-sm placeholder:text-gray-400 focus:border-emerald-500 focus:ring-emerald-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-transparent dark:border-neutral-700 dark:text-neutral-300 dark:placeholder:text-white/60 dark:focus:ring-neutral-600" rows="3" placeholder="Type your answer here..."></textarea>
      </div>
    </fieldset>
</div>
      </div>
      <div x-cloak x-show="currentQuestion.type=='gap_fill'">
        <div>
  <p class="leading-8" x-html="getGapFillHTML()"></p>
</div>



      </div>
      <div x-cloak x-show="currentQuestion.type=='match'">
        <div>
  <p x-text="currentQuestion.text"></p>
</div>
<div class="mt-4 space-y-4 text-sm">
    <fieldset aria-label="Options" >
        <template x-for="(question, qidx) in currentQuestion.questions" :key="qidx">
        <div class="relative flex items-start mb-4 gap-4">
          <div class="text-sm/6 min-w-24">
            <span class="mr-2" x-text="String.fromCharCode(65 + qidx) + '.'"></span>
            <label :for="'question-' + qidx" x-text="question"></label>
          </div>
          <div class="w-1/2">
            <select
              class="appearance-none min-w-32 text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"
              x-model="matchAnswers[qidx]"
            >
              <option value="" x-text="matchAnswers[qidx] || 'Select'"></option>
              <template x-for="(opt, idx) in currentQuestion.answers" :key="idx">
                <option :value="opt" x-text="opt"></option>
              </template>
            </select>
          </div>
        </div>
      </template>
    </fieldset>
</div>
      </div>
      <div x-cloak x-show="currentQuestion.type=='file'">
        <div>
  <p  x-text="currentQuestion.text"></p>
</div>
<div class="mt-4 space-y-4 text-sm">
<!-- Drag 'n Drop -->
<div class="space-y-2">
  <div id="file-upload" data-hs-file-upload='{
    "url": "/upload",
    "maxFilesize": 1000,
    "extensions": {
      "default": {
        "class": "shrink-0 size-5"
      },
      "xls": {
        "class": "shrink-0 size-5"
      },
      "zip": {
        "class": "shrink-0 size-5"
      },
      "csv": {
        "icon": "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4\"/><path d=\"M14 2v4a2 2 0 0 0 2 2h4\"/><path d=\"m5 12-3 3 3 3\"/><path d=\"m9 18 3-3-3-3\"/></svg>",
        "class": "shrink-0 size-5"
      }
    }
  }'>
    <template data-hs-file-upload-preview="">
      <div class="p-3 bg-white border border-solid border-gray-300 rounded-xl dark:bg-neutral-800 dark:border-neutral-600">
        <div class="mb-1 flex justify-between items-center">
          <div class="flex items-center gap-x-3">
            <span class="size-10 flex justify-center items-center border border-gray-200 text-gray-500 rounded-lg dark:border-neutral-700 dark:text-neutral-500" data-hs-file-upload-file-icon="">
              <img class="rounded-lg hidden" data-dz-thumbnail="">
            </span>
            <div>
              <p class="text-sm font-medium text-gray-800 dark:text-white">
                <span class="truncate inline-block max-w-[300px] align-bottom" data-hs-file-upload-file-name=""></span>.<span data-hs-file-upload-file-ext=""></span>
              </p>
              <p class="text-xs text-gray-500 dark:text-neutral-500" data-hs-file-upload-file-size="" data-hs-file-upload-file-success=""></p>
              <p class="text-xs text-red-500" style="display: none;" data-hs-file-upload-file-error="">File exceeds size limit.</p>
            </div>
          </div>
          <div class="flex items-center gap-x-2">
            <span class="hs-tooltip [--placement:top] inline-block" style="display: none;" data-hs-file-upload-file-error="">
              <span class="hs-tooltip-toggle text-red-500 hover:text-red-800 focus:outline-none focus:text-red-800 dark:text-red-500 dark:hover:text-red-200 dark:focus:text-red-200">
                <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="12" x2="12" y1="8" y2="12"></line>
                  <line x1="12" x2="12.01" y1="16" y2="16"></line>
                </svg>
                <span class="hs-tooltip-content max-w-[100px] hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded shadow-sm dark:bg-neutral-700" role="tooltip">
                  Please try to upload a file smaller than 100MB.
                </span>
              </span>
            </span>
            <button type="button" class="text-gray-500 hover:text-gray-800 focus:outline-none focus:text-gray-800 dark:text-neutral-500 dark:hover:text-neutral-200 dark:focus:text-neutral-200" data-hs-file-upload-reload="">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path>
                <path d="M21 3v5h-5"></path>
              </svg>
            </button>
            <button type="button" class="text-gray-500 hover:text-gray-800 focus:outline-none focus:text-gray-800 dark:text-neutral-500 dark:hover:text-neutral-200 dark:focus:text-neutral-200" data-hs-file-upload-remove="">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 6h18"></path>
                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                <line x1="10" x2="10" y1="11" y2="17"></line>
                <line x1="14" x2="14" y1="11" y2="17"></line>
              </svg>
            </button>
          </div>
        </div>
  
        <div class="flex items-center gap-x-3 whitespace-nowrap">
          <div class="flex w-full h-2 bg-gray-200 rounded-full overflow-hidden" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" data-hs-file-upload-progress-bar="">
            <div class="flex flex-col justify-center rounded-full overflow-hidden bg-emerald-600 text-xs text-white text-center whitespace-nowrap transition-all duration-500 hs-file-upload-complete:bg-emerald-500" style="width: 0" data-hs-file-upload-progress-bar-pane=""></div>
          </div>
          <div class="w-10 text-end">
            <span class="text-sm text-gray-800">
              <span data-hs-file-upload-progress-bar-value="">0</span>%
            </span>
          </div>
        </div>
      </div>
    </template>
    <div class="cursor-pointer p-12 flex justify-center bg-white border  border-gray-200 rounded-xl dark:bg-neutral-800 dark:border-neutral-600"  data-hs-file-upload-trigger="">
      <div class="text-center">
        <svg class="w-16 text-gray-400 mx-auto" width="70" height="46" viewBox="0 0 70 46" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6.05172 9.36853L17.2131 7.5083V41.3608L12.3018 42.3947C9.01306 43.0871 5.79705 40.9434 5.17081 37.6414L1.14319 16.4049C0.515988 13.0978 2.73148 9.92191 6.05172 9.36853Z" fill="currentColor" stroke="currentColor" stroke-width="2" class="fill-white stroke-gray-400"/>
          <path d="M63.9483 9.36853L52.7869 7.5083V41.3608L57.6982 42.3947C60.9869 43.0871 64.203 40.9434 64.8292 37.6414L68.8568 16.4049C69.484 13.0978 67.2685 9.92191 63.9483 9.36853Z" fill="currentColor" stroke="currentColor" stroke-width="2" class="fill-white stroke-gray-400"/>
          <rect x="17.0656" y="1.62305" width="35.8689" height="42.7541" rx="5" fill="currentColor" stroke="currentColor" stroke-width="2" class="fill-white stroke-gray-400"/>
          <path d="M47.9344 44.3772H22.0655C19.3041 44.3772 17.0656 42.1386 17.0656 39.3772L17.0656 35.9161L29.4724 22.7682L38.9825 33.7121C39.7832 34.6335 41.2154 34.629 42.0102 33.7025L47.2456 27.5996L52.9344 33.7209V39.3772C52.9344 42.1386 50.6958 44.3772 47.9344 44.3772Z" stroke="currentColor" stroke-width="2" class="stroke-gray-400"/>
          <circle cx="39.5902" cy="14.9672" r="4.16393" stroke="currentColor" stroke-width="2" class="stroke-gray-400 dark:stroke-neutral-500"/>
        </svg>

        <div class="mt-4 flex flex-wrap justify-center text-sm leading-6 text-gray-600">
          <span class="pe-1 font-medium text-gray-800">
            Drop your files here or
          </span>
          <label for="@@browseID" class="relative cursor-pointer bg-white font-semibold text-emerald-600 hover:text-emerald-700 rounded-lg decoration-2 hover:underline focus-within:outline-none focus-within:ring-2 focus-within:ring-emerald-600 focus-within:ring-offset-2">
            <span>browse</span>
            <input id="@@browseID" type="file" class="sr-only">
          </label>
        </div>

        <p class="mt-1 text-xs text-gray-400 dark:text-neutral-400">
          CSV, XLS, DOCX
        </p>
      </div>
    </div>      
    <div class="mt-4 space-y-2 empty:mt-0" data-hs-file-upload-previews=""></div>
  </div>
</div>
<!-- End Drag 'n Drop -->
</div>
      </div>
    </div>
    </div> 
   </div>
</div>

  <div class="hidden md:block w-full md:w-1/5  bg-white border-l border-gray-200 flex flex-wrap">
  <div class="p-5 flex flex-wrap justify-center items-center text-center border-b border-gray-200 dark:border-neutral-800">
  <img class="shrink-0 size-16 rounded-full" src="https://images.unsplash.com/photo-1624224971170-2f84fed5eb5e?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=facearea&amp;facepad=2&amp;w=900&amp;h=900&amp;q=80" alt="Avatar">
  <div class="mt-2 w-full">
    <h2 class="text-lg font-semibold text-gray-800 dark:text-neutral-200">
        Tommy Lowry
    </h2>
    <p class="mb-2 text-[13px] text-gray-500 dark:text-neutral-500">
      Tommy@gmail.com
    </p>
  </div>
</div>
  <div class="flex flex-wrap gap-4 text-xs text-gray-500 border-b border-gray-200 p-3">

  <div class="flex items-center gap-1">
    <span class="w-6 h-6 flex items-center justify-center rounded-full bg-emerald-400 text-white text-xs font-semibold" x-text="currentSectionStats.answered"></span>
    Answered
  </div>
  <div class="flex items-center gap-1">
    <span class="w-6 h-6 flex items-center justify-center rounded-full bg-red-400 text-white text-xs font-semibold" x-text="currentSectionStats.visited"></span>
    Unanswered
  </div>
  <div class="flex items-center gap-1">
    <span class="w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-800 text-xs font-semibold" x-text="currentSectionStats.notVisited"></span>
    Not Visited
  </div>
  <div class="flex items-center gap-1">
    <span class="w-6 h-6 flex items-center justify-center rounded-full bg-purple-400 text-white text-xs font-semibold" x-text="currentSectionStats.review"></span>
    Marked
  </div>
</div>
  <div class="p-3">
  <p class="text-wrap font-medium text-xs sm:text-sm text-gray-800 dark:text-neutral-200">
    Choose a Question
  </p>
  <div class="flex flex-wrap flex-grow gap-3 overflow-y-auto max-h-56 mt-4">
    <template x-for="(q, index) in currentSection.questions" :key="q.q_no">
      <button
        @click="goToQuestion(index)"
        class="w-8 h-8 rounded-full text-sm font-semibold"
        :class="{
          'bg-emerald-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'answered',
          'bg-red-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'visited',
          'bg-purple-400 text-white': getQuestionStatus(currentSection.name, q.q_no) === 'review',
          'bg-gray-200 text-gray-800': getQuestionStatus(currentSection.name, q.q_no) === 'not_visited'
        }"
        x-text="q.q_no"
      ></button>
    </template>
  </div>
</div>

</div>

</div>
<footer class=" sticky bottom-0 z-40 bg-white border-t border-gray-200 px-4 sm:px-6 py-3 z-40">
  
  <div class="hidden sm:flex flex-1  justify-between items-center gap-2">
    <div class="space-x-2">
    <button type="button"
    @click="
    markForReview();
    if (currentQuestionIndex < currentSection.questions.length - 1) {
      goToQuestion(currentQuestionIndex + 1);
    }
  "
    class="py-2 px-3 text-nowrap inline-flex justify-center items-center text-start whitespace-nowrap bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 disabled:opacity-50  dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
      Mark for Review & Next
    </button>
    <button type="button"
    @click="clearResponse()"
    class="py-2 px-3 text-nowrap inline-flex justify-center items-center text-start whitespace-nowrap bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 disabled:opacity-50  dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
      Clear Response
    </button>
  </div>
  <div class="space-x-2">
    <button type="button"  @click="saveCurrentAnswer();
  
    if (currentQuestionIndex < currentSection.questions.length - 1) {
      goToQuestion(currentQuestionIndex + 1);
    }
  "class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-emerald-600 border border-emerald-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-emerald-300 dark:focus:ring-emerald-500" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
  <span x-text="currentQuestionIndex < currentSection.questions.length - 1 ? 'Save & Next' : 'Save'"></span>
    </button>
    <button disabled type="button" class="cursor-not-allowed py-2 px-3 text-nowrap inline-flex justify-center items-center text-start whitespace-nowrap bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 disabled:opacity-50  dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
      Submit Section
    </button>
  </div>
  </div>
  <div class="flex sm:hidden justify-between">
    <div>
      <button type="button" 
      :disabled="currentQuestionIndex === 0"
       @click="
      if (currentQuestionIndex > 0) {
        goToQuestion(currentQuestionIndex - 1);
      }
    " class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-emerald-600 border border-emerald-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-emerald-300 dark:focus:ring-emerald-500" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
        Prev
      </button>
    </div>
    <div>
      <button type="button"
      @click="saveCurrentAnswer();

  if (currentQuestionIndex < currentSection.questions.length - 1) {
    goToQuestion(currentQuestionIndex + 1);
  }
" class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-emerald-600 border border-emerald-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-emerald-300 dark:focus:ring-emerald-500" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
    <span x-text="currentQuestionIndex < currentSection.questions.length - 1 ? 'Save & Next' : 'Save'"></span>
      </button>
    </div>
  </div>
</footer>

<div class="relative z-50" aria-labelledby="modal-title" role="dialog" aria-modal="true" x-cloak x-show="show_exam_ended_modal">
  <div class="fixed inset-0 bg-gray-500/75 transition-opacity" aria-hidden="true"
  x-transition:enter="ease-out duration-300"
  x-transition:enter-start="opacity-0"
  x-transition:enter-end="opacity-100"
  x-transition:leave="ease-in duration-200"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"></div>

  <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
    <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
      <div x-transition:enter="ease-out duration-300"
      x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
      x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200"
      x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
      x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
      class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
        <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
          <div class="sm:flex sm:items-start">
            <div class="mt-3 text-center sm:mt-0 sm:text-left">
              <h3 class="text-base font-semibold text-gray-900" id="modal-title">Exam Over</h3>
              <div class="mt-2">
                <p class="text-sm text-gray-500">You've successfully completed the exam. You can review the results.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
          <a href="/exam_review/dashboard/" class="inline-flex w-full justify-center rounded-md bg-emerald-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-500 sm:ml-3 sm:w-auto">Review Results</a>
        </div>
      </div>
    </div>
  </div>
</div>

</div>


    </div>

     
<script>
  function examComponent() {
    return {
      exam: {
        name: "Real CAT 2025 - Take Home Mock Test 01",
        sections: [
          {
            name: "Quantitative Aptitude",
            duration: 2,
            questions: [
              {
                q_no: 1,
                type: "mcq",
                is_multi_choice:false,
                mark: "1.00",
                negative: "0.25",
                text: "If the cost price of 15 items is equal to the selling price of 12 items, what is the profit percentage?",
                options: ["20%", "25%", "30%", "15%"]
              },
              {
                q_no: 2,
                type: "mcq",
                is_multi_choice:true,
                mark: "1.00",
                negative: "0.25",
                text: "A train 240 m long passes a pole in 24 seconds. What is the speed of the train in km/hr?",
                options: ["36", "54", "72", "90"]
              },
              {
              q_no: 3,
              type: "essay",
              mark: "5.00",
              negative: "0.00",
              text: "Explain the impact of globalization on rural economies in India."
            },
            {
              q_no: 4,
              type: "gap_fill",
              mark: "5.00",
              negative: "0.00",
              text_with_blanks: `
            The [BLANK_1] Revolution was a turning point. It began in [BLANK_2] and changed [BLANK_3]. People moved to [BLANK_4] areas, and innovations like the steam engine revolutionized [BLANK_5].
            `
            },
            {
              q_no: 5,
              type: "match",
              mark: "2.00",
              negative: "0.05",
              text: "Match the countries with their capitals:",
              questions: ["France", "Japan", "India", "Germany"],
              answers: ["Berlin", "Tokyo", "Paris", "New Delhi"] // already in correct order
            },
            {
              q_no: 6,
              type: "file",
              mark: "1.00",
              negative: "0.00",
              text: "Describe the impact of social media on modern communication. Include both positive and negative aspects in your response"
            },
            {
              q_no: 7,
              type: "mcq",
              is_multi_choice: false,
              mark: "1.00",
              negative: "0.25",
              passage: "A train traveling at a speed of 90 km/h takes 2 hours to reach its destination. If the train had traveled at 60 km/h, it would have taken 3 hours. The difference in time is due to the variation in speed.",
              text: "Based on the passage, what is the distance between the starting point and the destination?",
              options: ["120 km", "150 km", "180 km", "210 km"]
            },
            ]
          },
          {
            name: "Verbal Ability & Reading Comprehension",
            duration: 1,
            questions: [
              {
                q_no: 1,
                type: "mcq",
                mark: "1.00",
                negative: "0.25",
                text: "Choose the most appropriate word to fill in the blank: Despite the odds, she remained ___ throughout the ordeal.",
                options: ["placid", "desperate", "resilient", "apathetic"]
              },
              {
                q_no: 2,
                type: "mcq",
                mark: "1.00",
                negative: "0.25",
                text: "Identify the grammatically correct sentence.",
                options: [
                  "Each of the players have a unique skill.",
                  "Neither the manager nor his assistants was available.",
                  "He don’t like going to the gym.",
                  "There is many reasons for this conclusion."
                ]
              }
            ]
          },
          {
            name: "Data Interpretation & Logical Reasoning",
            duration: 1,
            questions: [
                {
                  q_no: 1,
                  type: "mcq",
                  mark: "1.00",
                  negative: "0.25",
                  text: "Five friends—A, B, C, D, and E—are sitting in a row. A is to the immediate right of B but not next to E. Who is sitting in the middle if C is at one end?",
                  options: ["A", "B", "D", "E"]
                },
                {
                  q_no: 2,
                  type: "mcq",
                  mark: "1.00",
                  negative: "0.25",
                  text: "In a certain code, if BOOK is coded as 43 and PEN as 35, then what is the code for COPY?",
                  options: ["56", "62", "59", "65"]
                }
              ]
          },
        ],
      },

      currentSectionIndex: 0,
      currentQuestionIndex: 0,
      totalSeconds: 0,
      interval: null,
      isLocked: false,
      selectedOption: [],
      essayDraft: '',
      show_exam_ended_modal :false,
      responses: {},
      gapFillAnswers: [],
      matchAnswers: [],
      uploaded_files: [],

      get currentSection() {
        return this.exam.sections[this.currentSectionIndex];
      },

      get currentQuestion() {
        return this.currentSection.questions[this.currentQuestionIndex];
      },

      get formattedTime() {
        const mins = Math.floor(this.totalSeconds / 60).toString().padStart(2, '0');
        const secs = (this.totalSeconds % 60).toString().padStart(2, '0');
        return `${mins}:${secs}`;
      },

      startTimer() {
        this.totalSeconds = this.currentSection.duration * 60;
        this.isLocked = true;

        if (this.interval) clearInterval(this.interval);
        this.interval = setInterval(() => {
          if (this.totalSeconds > 0) {
            this.totalSeconds--;
          } else {
            clearInterval(this.interval);
            this.moveToNextSection();
          }
        }, 1000);
      },

      selectSection(index) {
        if (index !== this.currentSectionIndex && this.isLocked) return;
        this.currentSectionIndex = index;
        this.currentQuestionIndex = 0;
        this.startTimer();
        this.goToQuestion(0);
      },

      isActive(index) {
        return this.currentSectionIndex === index;
      },

      initUploadFile() {
      window.addEventListener('load', () => {
        const instance = HSFileUpload.getInstance('#file-upload', true);
        if (!instance) return;

        const { element } = instance;
        const { dropzone } = element;

        dropzone.on('complete', () => {
          this.uploaded_files = ['mock-upload'];
        });
      });
     },



      goToQuestion(index) {
        this.currentQuestionIndex = index;
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};
        if (!this.responses[sectionKey][questionKey]) {
          this.responses[sectionKey][questionKey] = { selected: null, visited: true, markedForReview: false };
        } else {
          this.responses[sectionKey][questionKey].visited = true;
        }
        if (this.currentQuestion.type === 'mcq') {
          const saved = this.responses[sectionKey][questionKey]?.selected;
          this.selectedOption = saved ?? [];
        }

        if (this.currentQuestion.type === 'essay') {
          const saved = this.responses[sectionKey][questionKey]?.text;
          this.essayDraft = saved ?? '';
        }
        if (this.currentQuestion.type === 'gap_fill') {
          const sectionKey = this.currentSection.name;
          const questionKey = this.currentQuestion.q_no;

          const blankCount = (this.currentQuestion.text_with_blanks.match(/\[BLANK_\d+\]/g) || []).length;

          const saved = this.responses[sectionKey]?.[questionKey]?.answers;
          this.gapFillAnswers = saved ? [...saved] : Array(blankCount).fill('');
        }
        if (this.currentQuestion.type === 'match') {
          const blanks = this.currentQuestion.questions.length;
          this.matchAnswers = Array(blanks).fill('');

          const saved = this.responses[this.currentSection.name]?.[this.currentQuestion.q_no]?.matches;
          if (saved) this.matchAnswers = [...saved];
       }

      },
      

      saveMCQAnswer() {
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};

        this.responses[sectionKey][questionKey] = {
          selected: this.selectedOption,
          markedForReview: false,
          visited: true
        };
      },

      saveEssayAnswer() {
        if(this.essayDraft == ''){
          this.essayDraft =  null;
        }
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};
        this.responses[sectionKey][questionKey] = {
          text: this.essayDraft,
          markedForReview: false,
          visited: true
        };
      },

      saveGapFillAnswer() {
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};
        this.responses[sectionKey][questionKey] = {
          answers: [...this.gapFillAnswers],
          visited: true
        };
      },

      saveMatchAnswer() {
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};

        this.responses[sectionKey][questionKey] = {
          matches: this.matchAnswers.slice(),
          markedForReview: false,
          visited: true
        };
       },

       saveFileAnswer() {
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};

        this.responses[sectionKey][questionKey] = {
          uploaded_files: this.uploaded_files,
          markedForReview: false,
          visited: true
        };
       },


       saveCurrentAnswer() {
        const type = this.currentQuestion.type;

        if (type === 'mcq') this.saveMCQAnswer();
        else if (type === 'essay') this.saveEssayAnswer();
        else if (type === 'gap_fill') this.saveGapFillAnswer();
        else if (type === 'match') this.saveMatchAnswer();
        else if (type === 'file') this.saveFileAnswer();
       },

      getGapFillHTML() {
      if (this.currentQuestion.type !== 'gap_fill') return '';

      const text = this.currentQuestion.text_with_blanks;
      const blanks = (text.match(/\[BLANK_\d+\]/g) || []).length;

      // Ensure gapFillAnswers array is initialized
      if (this.gapFillAnswers.length !== blanks) {
        this.gapFillAnswers = Array(blanks).fill('');
      }

      const parts = text.split(/\[BLANK_\d+\]/g);

      // Build HTML string using Alpine-compatible bindings
      return parts.map((part, index) => {
        const input = index < blanks
          ? `<input x-model='gapFillAnswers[${index}]' type='text' class='inline-block h-6 min-w-36 align-middle w-20 px-2 py-1 text-sm border border-gray-300 rounded-md placeholder:text-gray-400 focus:border-emerald-500 focus:ring-emerald-500' placeholder='answer here' />`
          : '';
        return `${part}${input}`;
      }).join('');
    },

      markForReview() {
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (!this.responses[sectionKey]) this.responses[sectionKey] = {};
        if (!this.responses[sectionKey][questionKey]) {
          this.responses[sectionKey][questionKey] = { selected: null, visited: true };
        }
        this.responses[sectionKey][questionKey].markedForReview = true;
      },

      getQuestionStatus(sectionName, q_no) {
        const resp = this.responses[sectionName]?.[q_no];
        if (!resp) return 'not_visited';
        if (resp.markedForReview) return 'review';
        if (
          (resp.selected && resp.selected.length > 0) ||
          resp.text != null ||
          (resp.answers && resp.answers.some(ans => ans.trim() !== "")) ||
          (resp.matches && resp.matches.some(match => match.trim() !== "")) ||
          (resp.uploaded_files && resp.uploaded_files.length > 0)
        )
          return 'answered';

        return 'visited';
      },

      get currentSectionStats() {
        const sectionKey = this.currentSection.name;
        const total = this.currentSection.questions.length;
        let answered = 0, visited = 0, notVisited = 0, review = 0;

        for (let q of this.currentSection.questions) {
          const status = this.getQuestionStatus(sectionKey, q.q_no);
          if (status === 'answered') answered++;
          else if (status === 'review') review++;
          else if (status === 'visited') visited++;
          else if (status === 'not_visited') notVisited++;
        }

        return { total, answered, visited, notVisited, review };
      },

      moveToNextSection() {
        if (this.currentSectionIndex < this.exam.sections.length - 1) {
          this.currentSectionIndex++;
          this.currentQuestionIndex = 0;
          this.startTimer();
          this.goToQuestion(0);
        } else {
          this.isLocked = false;
          this.show_exam_ended_modal = true;
        }
      },

      clearResponse() {
        const sectionKey = this.currentSection.name;
        const questionKey = this.currentQuestion.q_no;

        if (this.responses[sectionKey]?.[questionKey]) {
          delete this.responses[sectionKey][questionKey];
        }

        this.responses[sectionKey][questionKey] = {
          visited: true,
          markedForReview: false
        };

        // Reset local UI state
        this.selectedOption = [];
        this.essayDraft = '';
        this.gapFillAnswers = [];
        this.matchAnswers = [];
      },
    }
  }
</script>
<script src="/node_modules/lodash/lodash.min.js"></script>
<script src="/node_modules/dropzone/dist/dropzone-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@preline/file-upload@3.0.0/index.min.js"></script>

  </body>


</html>
