<div class="w-full md:w-4/5">
  <div class="flex flex-wrap">
    <div class="w-full">
  <div class="flex flex-wrap justify-between basis-full items-center w-full">
    <div class="grid grid-cols-1 sm:hidden border-b border-gray-200 w-full px-4 sm:px-6">
      <!-- Use an "onChange" listener to redirect the user to the selected tab URL. -->
      <div x-data="{openSectionDropdown:false}" @click.outside="openSectionDropdown = false" class="relative w-full">
        <!-- Trigger Button -->
        <button
          @click="openSectionDropdown = !openSectionDropdown"
          class="w-full text-left py-2 bg-white text-xs text-gray-800 flex items-center justify-between"
        >
          <span x-text="currentSection.name"></span>
          <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
      
        <!-- Dropdown List -->
        <div
          x-show="openSectionDropdown"
          x-transition
          class="absolute mt-2 z-50 w-full max-h-60 border border-gray-200 rounded-xl bg-white shadow-xl space-y-0.5 p-1"
        >
        <template x-for="(section, index) in exam.sections" :key="section.name">
          <div
            @click="selectSection(index), openSectionDropdown = false"
            class="px-4 py-2 text-sm rounded-lg"
            :class="{
              'cursor-pointer text-gray-800 hover:bg-gray-100': isActive(index),
              'cursor-not-allowed opacity-50 text-gray-400': !isActive(index),
              'bg-gray-100': currentSectionIndex === index
            }"
            x-text="section.name"
          ></div>
        </template>
        
        </div>
      </div>
      
    </div>
    <nav  class="hidden sm:block px-4 sm:px-6 w-full  flex gap-1 relative border-b border-gray-200 aria-label="Tabs" role="tablist" aria-orientation="horizontal">
      <template x-for="(section, index) in exam.sections" :key="index">
        <button 
        @click="selectSection(index)"
        :disabled="!isActive(index)"
        class="whitespace-nowrap truncate border-b-2 py-2 text-sm mr-4
        disabled:text-gray-400 disabled:cursor-not-allowed
         disabled:border-transparent"
        :class="{
          'border-emerald-500 text-emerald-600': currentSectionIndex === index,
          'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700': currentSectionIndex !== index,
          'text-gray-400 cursor-not-allowed': !isActive(index)
        }"
        x-text="section.name"
        ></button>
      </template>
    </nav>
  </div>
</div>

<!-- End Add Discount Modal -->
    <div  class="border-b border-gray-200 w-full">
  <div class="flex flex-wrap justify-between basis-full items-center w-full py-1 sm:px-6 px-4">
    <p class="hidden sm:inline text-wrap font-medium text-xs sm:text-sm text-gray-800 dark:text-neutral-200">
      <span class="">Section: </span><span x-text="currentSection.name"></span>
    </p>
    <button
    type="button"
    class="sm:hidden text-xs font-medium text-emerald-500 underline disabled:opacity-50 disabled:cursor-not-allowed"
    disabled
  >
    End Section
  </button>
    </p>
    <div>
      <span class="inline-flex items-center gap-x-1.5 text-xs font-medium bg-white text-stone-800">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 size-3"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
        <span x-text="formattedTime"></span>
      </span>
    </div>
  </div>
</div>
    <div class="border-b border-gray-200 w-full">
      <div class="flex flex-wrap justify-between basis-full items-center w-full py-1 sm:px-6 px-4">
  <div class="flex">
  <p class="text-wrap font-medium text-xs sm:text-sm text-gray-800 dark:text-neutral-200">
    <span class="hidden sm:inline">Question No. </span>
    <span class="inline sm:hidden">Q No. </span>
    <span x-text="currentQuestion.q_no"></span>
    <span class="ml-2 inline-flex items-center rounded-full bg-emerald-100 px-1.5 py-0.5 text-xs font-medium text-emerald-700" 
    x-text="currentQuestion.type.toUpperCase()"></span>
  </p>
  <span class="sm:hidden cursor-pointer inline-flex items-center ml-1">
    <svg x-cloak x-show="!(responses[currentSection.name]?.[currentQuestion.q_no]?.markedForReview)"
    @click="
    markForReview();
    if (currentQuestionIndex < currentSection.questions.length - 1) {
      goToQuestion(currentQuestionIndex + 1);
    }
  "
    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 text-purple-600">
      <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"></path>
    </svg>
    <svg 
    x-cloak   x-show="responses[currentSection.name]?.[currentQuestion.q_no]?.markedForReview"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 text-purple-600">
      <path fill-rule="evenodd" d="M6.32 2.577a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 0 1-1.085.67L12 18.089l-7.165 3.583A.75.75 0 0 1 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93Z" clip-rule="evenodd" />
    </svg>
    <span class="text-xs ml-1">mark for later</span>
  </span>
</div>
  <div>
    <span class="inline-flex items-center rounded-full bg-emerald-100 px-1.5 py-0.5 text-xs font-medium text-emerald-700" x-text="'+ '+ currentQuestion.mark"></span>
    <span class="inline-flex items-center rounded-full bg-red-100 px-1.5 py-0.5 text-xs font-medium text-red-700" x-text="'- '+ currentQuestion.negative"></span>
  </div>
</div>

    </div>
    <div class="bg-white px-4 py-4 sm:px-6">
      <article x-cloak x-show="currentQuestion.type=='mcq'">
        <div>
  <h2  class="text-base font-medium text-gray-900" x-text="currentQuestion.text"></h2>
</div>
<div class="mt-4 space-y-4 text-sm text-gray-500">
    <fieldset aria-label="Options" >
        <template x-for="(option, idx) in currentQuestion.options" :key="idx">
        <div class="relative flex items-start mb-4">
          <div class="flex h-6 items-center">
            <input :id="'option-' + idx"  name="question-options"
            x-model="selectedOption"
            :checked="responses[currentSection.name]?.[currentQuestion.q_no]?.selected === idx" :value="idx" type="radio" class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-green-600 hover:text-green-600 focus:text-green-600  focus:ring-green-600 checked:bg-green-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden">
          </div>
          <div class="ml-3 text-sm/6">
            <label :for="'option-' + idx" x-text="option"></label>
          </div>
        </div>
      </template>
    </fieldset>
</div>
      </article>
      <article x-cloak x-show="currentQuestion.type=='essay'">
        <div>
  <h2  class="text-base font-medium text-gray-900" x-text="currentQuestion.text"></h2>
</div>
<div class="mt-4 space-y-4 text-sm text-gray-500">
    <fieldset aria-label="Options" >
      <div class="space-y-2">
        <textarea id="dactmd" class="py-2 px-3 block w-full border-gray-200 rounded-lg text-sm placeholder:text-gray-400 focus:border-emerald-500 focus:ring-emerald-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-transparent dark:border-neutral-700 dark:text-neutral-300 dark:placeholder:text-white/60 dark:focus:ring-neutral-600" rows="3" placeholder="What is the movie about?..."></textarea>
      </div>
    </fieldset>
</div>
      </article>
    </div>    
</div>
</div>
