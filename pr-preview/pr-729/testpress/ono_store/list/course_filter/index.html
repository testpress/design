<div class=""
  x-data="useCourseFilter()">
  <div class="flex flex-col space-y-4">
    <div>
      <nav class="flex items-center overflow-x-auto hide-scrollbar gap-2">
        <div class="flex gap-2">
          <template x-for="(category, index) in categories" :key="category.id">
            <label x-show="index < visibleCount" :for="`category-${category.id}`" class="py-2 px-2.5  flex justify-center items-center text-center text-[13px] cursor-pointer rounded-xl transition-all duration-200
      border ring-1 ring-inset
      text-gray-800 border-gray-200 ring-transparent
      dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700" :class="isSelected(category.id) 
      ? 'bg-emerald-100 border-emerald-200 ring-emerald-200 text-emerald-800 dark:bg-emerald-800/30 dark:border-emerald-800/50 dark:ring-emerald-800/50 dark:text-emerald-500' 
      : 'hover:border-emerald-600 hover:ring-emerald-600 dark:hover:ring-neutral-600' ">

              <input type="checkbox" :id="`category-${category.id}`" class="hidden" :checked="isSelected(category.id)"
                @change="toggleCategory(category.id)">

              <span class="flex shrink-0 justify-center items-center rounded-full transition-all duration-200" :class="isSelected(category.id) 
        ? 'size-4 me-1.5 bg-emerald-500 text-white' 
        : 'size-0 bg-emerald-500 text-transparent'">
                <svg class="shrink-0 size-2.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"
                  stroke-linejoin="round">
                  <path d="M20 6 9 17l-5-5" />
                </svg>
              </span>

              <span class="block max-w-56 truncate" x-text="category.name"></span>
            </label>
          </template>
        </div>

        <!-- Filter Dropdown -->
        <div class="hs-dropdown [--auto-close:inside] [--placement:bottom-left] relative inline-flex shrink-0">
          <div class="hs-tooltip [--placement:bottom] inline-block">
            <button id="hs-pro-dnnd" aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown"
              class="py-2 px-2.5  flex justify-center items-center text-center text-[13px] cursor-pointer rounded-xl transition-all duration-200
      border ring-1 ring-inset
      bg-white text-gray-800 border-gray-200 ring-transparent
      dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700 hover:border-emerald-600 hover:ring-emerald-600 dark:hover:ring-neutral-600">
              <span class="block">View All</span>
            </button>
          </div>
          <!-- End Notifications Button Icon -->

          <!-- Notifications Dropdown -->
          <div
            class="hs-dropdown-menu hs-dropdown-open:opacity-100 w-full sm:w-96 transition-[opacity,margin] duration opacity-0 hidden z-10 bg-white border border-gray-200  sm:rounded-lg shadow-md sm:shadow-xl dark:bg-neutral-900 dark:border-neutral-700"
            role="menu" aria-orientation="vertical" aria-labelledby="hs-pro-dnnd">
            <!-- Header -->


            <!-- Tab Content -->
            <div id="hs-pro-filter" role="tabpanel" aria-labelledby="hs-pro-tabs-dnn-item-all">
              <div class="p-4 space-y-5">
                <div>
                  <label for="hs-pro-dalpn" class="block mb-2 text-sm font-medium text-gray-800 dark:text-white">
                    Filter by Category
                  </label>

                  <div class="relative w-full" x-data x-init="
                document.addEventListener('click', (e) => {
                  if (e.target.closest('[data-remove]')) {
                    e.stopPropagation();
                  }
                });
              ">
                    <select multiple data-hs-select='{
                    "placeholder": "Select category",
                    "wrapperClasses": "hs-select-active:ring-1 hs-select-active:ring-emerald-500 pe-9 rounded-lg flex items-center flex-wrap text-nowrap w-full text-start text-sm border border-gray-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 hs-select-active:dark:outline-none hs-select-active:dark:ring-1 hs-select-active:dark:ring-gray-600",
                    "toggleTag": "<button type=\"button\" aria-expanded=\"false\"></button>",
                    "toggleClasses": "hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50 relative flex text-nowrap w-full cursor-pointer bg-white border border-gray-200 rounded-lg text-start text-sm focus:bg-gray-100 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400",
                    "dropdownClasses": "mt-2 z-50 w-full max-h-48 p-1 space-y-0.5 bg-white rounded-lg overflow-hidden overflow-y-auto shadow-[0_10px_40px_10px_rgba(0,0,0,0.08)] dark:bg-neutral-900",
                    "optionClasses": "hs-selected:bg-gray-100 dark:hs-selected:bg-neutral-800 py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-lg focus:outline-none focus:bg-gray-100 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200 dark:focus:bg-neutral-800",
                    "mode": "tags",
                    "tagsClasses": "relative ps-0.5 pe-9 min-h-[38px] flex items-center flex-wrap text-nowrap w-full border border-gray-200 rounded-lg text-start text-sm focus:border-emerald-500 focus:ring-emerald-500 dark:bg-neutral-900 dark:text-neutral-400",
                    "tagsItemTemplate": "<div class=\"flex flex-nowrap items-center relative z-10 bg-white border border-gray-200 rounded-full p-[3px] m-0.5 dark:bg-neutral-900 dark:border-neutral-700\"><div class=\"size-6 me-1\" data-icon></div><div class=\"whitespace-nowrap ms-1\" data-title></div><div class=\"inline-flex shrink-0 justify-center items-center size-5 ms-2 rounded-full text-gray-800 bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-neutral-400 text-sm dark:bg-neutral-700 dark:hover:bg-neutral-700 dark:text-neutral-400 cursor-pointer\" data-remove><svg class=\"shrink-0 size-3\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18 6 6 18\"/><path d=\"m6 6 12 12\"/></svg></div></div>",
                    "tagsInputClasses": "py-[9px] px-4 grow order-1 text-sm bg-transparent rounded-lg focus-visible:outline-none dark:bg-neutral-800 dark:bg-neutral-700 dark:text-neutral-400 dark:placeholder:text-neutral-400 focus:outline-none focus:ring-0 border-0",
                    "optionTemplate": "<div class=\"flex items-center\"><div class=\"size-8 me-2\" data-icon></div><div><div class=\"text-sm font-semibold text-gray-800 dark:text-neutral-200\" data-title></div><div class=\"text-xs text-gray-500 dark:text-neutral-500\" data-description></div></div><div class=\"ms-auto\"><span class=\"hidden hs-selected:block\"><svg class=\"shrink-0 size-4\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\"/></svg></span></div></div>"
                    }' class="hidden">
                      <option value="">Choose</option>
                      <option value="airside_safety">Airside Safety & Operations</option>
                      <option value="terminal_operations">Terminal Operations & Passenger Experience</option>
                      <option value="avsec_awareness">Aviation Security (AVSEC) Awareness</option>
                      <option value="emergency_response">Emergency Response & Crisis Management</option>
                      <option value="fire_rescue">Airport Fire & Rescue Operations</option>
                      <option value="ramp_safety">Ramp Safety & Aircraft Marshalling</option>
                      <option value="dgr_basics">Dangerous Goods Regulations (DGR) Basics</option>
                      <option value="sms_airports">Safety Management Systems (SMS) for Airports</option>
                      <option value="passenger_service">Passenger Handling & Customer Service</option>
                      <option value="cargo_security">Air Cargo Operations & Security</option>
                    </select>

                    <div class="absolute top-1/2 end-2.5 -translate-y-1/2">
                      <svg class="shrink-0 size-3.5 text-gray-500 dark:text-neutral-500"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m7 15 5 5 5-5" />
                        <path d="m7 9 5-5 5 5" />
                      </svg>
                    </div>
                  </div>

                </div>

                <div class="flex-1 flex justify-end items-center gap-2">
                  <button type="button"
                    class="hs-dropdown-close py-2 px-3 text-nowrap inline-flex justify-center items-center text-start whitespace-nowrap bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
                    Clear All
                  </button>

                  <button type="button"
                    class="hs-dropdown-close py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-emerald-600 border border-emerald-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-emerald-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-emerald-300 dark:focus:ring-emerald-500">
                    Apply Filter
                  </button>
                </div>

              </div>
            </div>
          </div>

        </div>
        <!-- End Filter Dropdown -->
      </nav>
    </div>
  </div>
</div>


  <script>
    function useCourseFilter() {
      return {
        selectedCategories: [],
        showAll: false,
        visibleCount: 0,
        searchQuery: '',
        categories: [
          { "id": 1, "name": "Airside Safety & Operations" },
          { "id": 2, "name": "Terminal Operations & Passenger Experience" },
          { "id": 3, "name": "Aviation Security (AVSEC) Awareness" },
          { "id": 4, "name": "AVSEC Level 1 – Ground Staff" },
          { "id": 5, "name": "Emergency Response & Crisis Management" },
          { "id": 6, "name": "Airport Fire & Rescue Operations" },
          { "id": 7, "name": "Ramp Safety & Aircraft Marshalling" },
          { "id": 8, "name": "Dangerous Goods Regulations (DGR) Basics" },
          { "id": 9, "name": "Runway Incursion Prevention" },
          { "id": 10, "name": "Safety Management Systems (SMS) for Airports" },
          { "id": 11, "name": "Safety Audit & Inspection Techniques" },
          { "id": 12, "name": "Airport Wildlife Hazard Management" },
          { "id": 13, "name": "Apron Management & Control" },
          { "id": 14, "name": "Airport Ground Handling Excellence" },
          { "id": 15, "name": "Baggage Handling Systems Operations" },
          { "id": 16, "name": "Passenger Handling & Customer Service" },
          { "id": 17, "name": "Airport Retail & Commercial Management" },
          { "id": 18, "name": "Airport Finance & Revenue Management" },
          { "id": 19, "name": "Airport HR & Leadership Essentials" },
          { "id": 20, "name": "Air Cargo Operations & Security" },
          { "id": 21, "name": "Load Control & Aircraft Weight & Balance" },
          { "id": 22, "name": "Aerodrome Certification & Compliance" },
          { "id": 23, "name": "Airport Engineering & Maintenance" },
          { "id": 24, "name": "Pavement Management & Runway Inspection" },
          { "id": 25, "name": "CNS/ATM Systems Overview" },
          { "id": 26, "name": "Airport IT & Digital Systems" },
          { "id": 27, "name": "Cybersecurity for Airports" },
          { "id": 28, "name": "Airport Data Analytics & Reporting" },
          { "id": 29, "name": "Airport Project Management" },
          { "id": 30, "name": "Business Continuity Planning for Airports" },
          { "id": 31, "name": "Airport Accessibility & PRM Handling" },
          { "id": 32, "name": "Conflict Management & Service Recovery" },
          { "id": 33, "name": "Aviation English for Ground Staff" },
          { "id": 34, "name": "De-icing & Adverse Weather Operations" },
          { "id": 35, "name": "Fuel Farm Safety & Operations" },
          { "id": 36, "name": "Bird Strike Prevention & Reporting" },
          { "id": 37, "name": "Helipad & Heliport Operations" },
          { "id": 38, "name": "Offshore Helicopter Operations Awareness" },
          { "id": 39, "name": "Airport Contract & Vendor Management" },
          { "id": 40, "name": "Procurement & Inventory for Airports" },
          { "id": 41, "name": "Quality Management Systems in Airports" },
          { "id": 42, "name": "Lean Six Sigma for Airport Operations" },
          { "id": 43, "name": "Leadership Development for Airport Managers" },
          { "id": 44, "name": "Induction Program – New Airport Staff" },
          { "id": 45, "name": "Training for Airside Supervisors" },
          { "id": 46, "name": "Training for Terminal Supervisors" },
          { "id": 47, "name": "Training for Security Supervisors" },
          { "id": 48, "name": "Training for Operations Control Center" },
          { "id": 49, "name": "Airport Sustainability & Green Initiatives" },
          { "id": 50, "name": "Airport Risk Assessment & Mitigation" }
        ],

        init() {
          this.setVisibleCount();
          window.addEventListener('resize', () => this.setVisibleCount());
        },

        setVisibleCount() {
          if (window.innerWidth < 640) this.visibleCount = 1;
          else if (window.innerWidth < 768) this.visibleCount = 2;
          else if (window.innerWidth < 1300) this.visibleCount = 3;
          else if (window.innerWidth < 1500) this.visibleCount = 4;
          else this.visibleCount = 4;
        },

        toggleCategory(id) {
          if (this.selectedCategories.includes(id)) {
            this.selectedCategories = this.selectedCategories.filter(catId => catId !== id);
          } else {
            this.selectedCategories.push(id);
          }
        },

        isSelected(id) {
          return this.selectedCategories.includes(id);
        },

        filteredCategories() {
          const query = this.searchQuery.trim().toLowerCase();
          if (!query) return this.categories;
          return this.categories.filter(c => c.name.toLowerCase().includes(query));
        }
      };
    }
  </script>