<div x-cloak 
     x-show="current_state =='System Readiness Check'"
     class="max-w-6xl mx-auto p-5 space-y-4 flex flex-col bg-white border border-gray-200 shadow-2xs rounded-xl dark:bg-neutral-800 dark:border-neutral-700">

  <!-- Heading -->
  <div class="text-center max-w-2xl mx-auto">
    <h1 class="font-semibold text-2xl text-gray-800 dark:text-neutral-200">
      System Readiness Check
    </h1>
    <div class="mt-2">
      <p class="text-gray-600 dark:text-neutral-400 text-sm">
        We’ll verify that your camera, microphone, and browser permissions are enabled.
        If any required access is blocked, you’ll be prompted to allow it before continuing.
      </p>
    </div>
  </div>

  <!-- Steps -->
  <ul class="space-y-4">
    <template x-for="step in steps" :key="step.key">
      <!-- Container -->
      <li class="p-3 rounded-md flex flex-col gap-1 border"
          :class="{
            'bg-gray-50 border-gray-200 dark:bg-neutral-700 dark:border-neutral-700': step.status === 'checking' || step.status === 'pending',
            'bg-emerald-50 border-emerald-500 dark:bg-emerald-800/30 dark:border-emerald-700': step.status === 'success',
            'bg-red-50 border-red-500 dark:bg-red-800/30 dark:border-red-700': step.status === 'error'
          }">

        <!-- Header row -->
        <div class="flex justify-between items-center">
          <span class="font-medium text-gray-800 dark:text-neutral-200" x-text="step.name"></span>

          <!-- Status -->
          <span class="flex items-center gap-2 text-sm"
                :class="{
                  'text-gray-500 dark:text-neutral-300': step.status === 'checking' || step.status === 'pending',
                  'text-emerald-600 font-semibold': step.status === 'success',
                  'text-red-600 font-semibold': step.status === 'error'
                }">

            <!-- Checking -->
            <template x-if="step.status === 'checking'">
              <span class="flex items-center gap-2">
                <div class="animate-spin inline-block size-4 border-2 border-current border-t-transparent text-blue-600 rounded-full dark:text-blue-400"></div>
                Checking…
              </span>
            </template>

            <!-- Passed -->
            <template x-if="step.status === 'success'">
              <span class="flex items-center gap-1">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-4"><path d="M20 6 9 17l-5-5"/></svg>
                Passed
              </span>
            </template>

            <!-- Failed -->
            <template x-if="step.status === 'error'">
              <span class="flex items-center gap-1">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-4"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                Failed
              </span>
            </template>
          </span>
        </div>

        <!-- Description -->
        <p class="text-sm text-gray-600 dark:text-neutral-400" x-text="step.description"></p>
        <p class="text-sm text-red-500" x-show="step.error" x-text="step.error"></p>

        <!-- Action -->
        <div class="flex gap-x-3 mt-4" x-show="step.status === 'error'">
          <button type="button"
                  class="inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent text-red-600 hover:text-red-800 focus:outline-hidden dark:text-red-500 dark:hover:text-red-400"
                    @click="handleAction(step)"
                  x-text="step.key === 'network' ? 'Retry' : 'Allow Permission'">
          </button>
        </div>
      </li>
    </template>
  </ul>

  <!-- Final message -->
  <div class="pt-6">
  <div class="flex justify-end gap-x-2"  x-show="allPassed">
      <div class="flex-1 flex justify-end items-center gap-2">

        <button @click="current_state='Identity Verification'"
type="button" class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-primary-600 border border-primary-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-primary-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-primary-300 dark:focus:ring-primary-500" data-hs-overlay="#hs-pro-daem" aria-expanded="true">
          Verify Your Identity  
        </button>
      </div>
    </div>
  </div>
</div>


