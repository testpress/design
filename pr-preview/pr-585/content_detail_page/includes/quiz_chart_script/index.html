<!-- ApexCharts Scripts for Quiz Component -->
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/preline@2.0.3/dist/hs-apexcharts-helpers.js"></script>

<script>
  function renderQuizDonutChart() {
    // Clear existing chart if any
    const chartContainer = document.querySelector("#quiz-pie-chart");
    if (chartContainer) {
      chartContainer.innerHTML = '';
    }
    
    const seriesData = [1, 1, 1]; // Correct, Incorrect, Unanswered
    const seriesLabels = ['Correct', 'Incorrect', 'Unanswered'];
    
    const options = {
      chart: {
        height: 230,
        width: 230,
        type: 'donut',
        zoom: { enabled: false },
        animations: {
          enabled: false // Disable animations to prevent jerky behavior
        }
      },
      plotOptions: {
        pie: {
          donut: {
            size: '76%'
          }
        }
      },
      series: seriesData,
      labels: seriesLabels,
      legend: { show: false },
      dataLabels: { enabled: false },
      stroke: { width: 5 },
      colors: ['#22c55e', '#ef4444', '#f97316'],
      stroke: {
        colors: ['#ffffff']
      },
      states: {
        hover: {
          filter: { type: 'none', value: 0 }
        },
        active: {
          allowMultipleDataPointsSelection: false,
        }
      },
      tooltip: {
        enabled: true,
        custom: ({ seriesIndex, w }) => {
          const label = seriesLabels[seriesIndex];
          const value = seriesData[seriesIndex];
          const total = seriesData.reduce((a, b) => a + b, 0);
          const percentage = ((value / total) * 100).toFixed(1);
          const color = w.globals.colors[seriesIndex];
  
          return `
            <div class="border border-gray-300 bg-white w-36 text-gray-900 shadow-xl">
              <div class="px-2 py-1.5 font-semibold text-[13px] flex items-center">
                <span>${label}</span>
                <span class="ms-auto">${percentage}%</span>
              </div>
              <div class="border-t border-gray-200"></div>
              <div class="space-y-1.5 p-2">
                <div class="flex items-center gap-x-2 text-xs text-gray-600">
                  <span class="w-3 h-3 rounded-sm inline-block" style="background:${color}"></span>
                  <span>Questions</span>
                  <span class="ms-auto">${value}</span>
                </div>
              </div>
            </div>
          `;
        }
      }
    };
  
    const chart = new ApexCharts(chartContainer, options);
    chart.render();
  }
</script> 