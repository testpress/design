<aside 
x-data="{ 
  sidebarOpen: false,
  accordionOpen: {
    candidates: false,
    account: false
  },
  dropdownOpen: null,
  searchOpen: false,
  notificationsOpen: false,
  activityOpen: false,
  profileOpen: false,
  toggleDropdown(dropdown) {
    this.dropdownOpen = this.dropdownOpen === dropdown ? null : dropdown;
  },
  getAvatarStyle(name) {
    if (!name) return {};
    
    // Generate a consistent color based on the name
    const colors = [
      '#3B82F6', // Blue
      '#EF4444', // Red
      '#10B981', // Green
      '#F59E0B', // Yellow
      '#8B5CF6', // Purple
      '#EC4899', // Pink
      '#06B6D4', // Cyan
      '#84CC16', // Lime
      '#F97316', // Orange
      '#6366F1', // Indigo
      '#14B8A6', // Teal
      '#DC2626', // Rose
    ];
    
    // Create a simple hash from the name
    let hash = 0;
    for (let i = 0; i < name.length; i++) {
      hash = name.charCodeAt(i) + ((hash << 5) - hash);
    }
    
    // Get color index
    const colorIndex = Math.abs(hash) % colors.length;
    const backgroundColor = colors[colorIndex];
    
    // Convert hex to RGB for lighter text color
    const hex = backgroundColor.replace('#', '');
    const r = parseInt(hex.substr(0, 2), 16);
    const g = parseInt(hex.substr(2, 2), 16);
    const b = parseInt(hex.substr(4, 2), 16);
    
    // Create a lighter tint for text (mix with white)
    const textR = Math.round(r + (255 - r) * 0.7);
    const textG = Math.round(g + (255 - g) * 0.7);
    const textB = Math.round(b + (255 - b) * 0.7);
    
    const textColor = `rgb(${textR}, ${textG}, ${textB})`;
    
    return {
      backgroundColor: backgroundColor,
      color: textColor
    };
  }
}"
id="sidebar" :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'" class="transition-all duration-300 transform
  w-[16.25rem] h-full
  lg:translate-x-0 lg:end-auto lg:bottom-0
  fixed inset-y-0 start-0 z-60
  bg-white border-e border-gray-200
  dark:bg-neutral-800 dark:border-neutral-700" tabindex="-1" aria-label="Sidebar">
  <div class="relative flex flex-col h-full pt-3">
    <!-- Sidebar Header -->
    <header class="h-11 ps-5 pe-2 lg:ps-8 flex items-center gap-x-1">
      <a class="flex-none rounded-md text-xl inline-block font-semibold focus:outline-hidden text-gray-800 dark:text-neutral-300"
        href="/" aria-label="Sentinel">Sentinel</a>
      <div class="lg:hidden ms-auto">
        <button type="button"
          class="w-6 h-7 inline-flex justify-center items-center text-sm rounded-md cursor-pointer border border-gray-200 bg-white text-gray-500 hover:bg-gray-50 focus:outline-hidden dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300"
          x-on:click="sidebarOpen = false" aria-label="Close sidebar">
          <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
            stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <polyline points="7 8 3 12 7 16" />
            <line x1="21" x2="11" y1="12" y2="12" />
            <line x1="21" x2="11" y1="6" y2="6" />
            <line x1="21" x2="11" y1="18" y2="18" />
          </svg>
        </button>
      </div>
    </header>

    <!-- Sidebar Navigation -->
    <div
      class="mt-1.5 h-full overflow-y-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500">
      <nav class="pb-3 w-full flex flex-col">
        <ul class="flex flex-col gap-y-1 px-2 lg:px-5">
          <!-- Main Links -->
          <li>
            <a class="flex gap-x-3 py-2 px-3 text-sm text-gray-800 rounded-lg hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700 bg-gray-100 dark:bg-neutral-700"
              href="#">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
              </svg>
              Dashboard
            </a>
          </li>
          <li>
            <a class="flex gap-x-3 py-2 px-3 text-sm text-gray-800 rounded-lg hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700"
              href="#">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z" />
              </svg>
              Workspaces
            </a>
          </li>
          <li>
            <a class="flex gap-x-3 py-2 px-3 text-sm text-gray-800 rounded-lg hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700"
              href="#">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
              </svg>
              Reports
            </a>
          </li>
          <li>
            <a class="flex gap-x-3 py-2 px-3 text-sm text-gray-800 rounded-lg hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700"
              href="#">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z" />
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z" />
              </svg>
              Evidence
            </a>
          </li>
          <!-- Accordion Candidates -->
          <li>
            <button type="button"
              class="w-full text-start flex gap-x-3 py-2 px-3 text-sm text-gray-800 rounded-lg cursor-pointer hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700"
              x-on:click="accordionOpen['candidates'] = !accordionOpen['candidates']"
              x-bind:aria-expanded="accordionOpen['candidates'].toString()">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
              </svg>
              Candidates
              <svg class="shrink-0 ms-auto transition-transform size-4" xmlns="http://www.w3.org/2000/svg" width="24"
                height="24" viewBox="0 0 24 24" x-bind:class="accordionOpen['candidates'] ? '-rotate-180' : ''">
                <path d="m6 9 6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </button>
            <div x-show="accordionOpen['candidates']" x-cloak x-transition class="ps-7 mt-1 flex flex-col gap-y-1">
              <a class="py-2 px-3 text-sm text-gray-800 rounded-lg hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700"
                href="#">Overview</a>
              <a class="py-2 px-3 text-sm text-gray-800 rounded-lg hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700"
                href="#">Add Candidate</a>
            </div>
          </li>
          <!-- Accordion Account -->
          <li>
            <button type="button"
              class="w-full text-start flex gap-x-3 py-2 px-3 text-sm text-gray-800 rounded-lg cursor-pointer hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700"
              x-on:click="accordionOpen['account'] = !accordionOpen['account']"
              x-bind:aria-expanded="accordionOpen['account'].toString()">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
              </svg>
              Account
              <svg class="shrink-0 ms-auto transition-transform size-4" xmlns="http://www.w3.org/2000/svg" width="24"
                height="24" viewBox="0 0 24 24" x-bind:class="accordionOpen['account'] ? '-rotate-180' : ''">
                <path d="m6 9 6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </button>
            <div x-show="accordionOpen['account']" x-cloak x-transition class="ps-7 mt-1 flex flex-col gap-y-1">
              <a class="py-2 px-3 text-sm text-gray-800 rounded-lg hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700"
                href="#">Profile</a>
              <a class="py-2 px-3 text-sm text-gray-800 rounded-lg hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700"
                href="#">Notifications</a>
            </div>
          </li>
          <!-- Settings Link -->
          <li>
            <a class="flex gap-x-3 py-2 px-3 text-sm text-gray-800 rounded-lg hover:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-700"
              href="#">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
              </svg>
              Settings
            </a>
          </li>
        </ul>
      </nav>
    </div>
    <!-- Sidebar Footer -->
    <footer
      class="sticky bottom-0 left-0 right-0 py-2 px-5 border-t border-gray-200 dark:border-gray-700 dark:border-neutral-700">
      <div class="flex justify-center items-center gap-x-2 bg-white dark:bg-neutral-800">
        <!-- Theme Dropdown -->
<div class="relative" x-data="{ 
  currentTheme: localStorage.getItem('theme') || 'system',
  init() {
    // Apply theme on initialization
    this.applyTheme();
    
    // Listen for system theme changes
    if (window.matchMedia) {
      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
      mediaQuery.addEventListener('change', (e) =&gt; {
        if (this.currentTheme === 'system') {
          this.applyTheme();
        }
      });
    }
  },
  getCurrentTheme() {
    return this.currentTheme;
  },
  applyTheme() {
    const effectiveTheme = this.currentTheme === 'system' ? 
      (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : 
      this.currentTheme;
    
    if (effectiveTheme === 'dark') {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  },
  setTheme(theme) {
    this.currentTheme = theme;
    localStorage.setItem('theme', theme);
    this.applyTheme();
  }
}">
  <button type="button" class="inline-flex items-center justify-center rounded-full p-2 text-gray-600 cursor-pointer hover:bg-gray-100 dark:text-gray-300 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" x-on:click="($event).stopPropagation(); toggleDropdown('theme')" aria-haspopup="menu">
    <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="4"></circle>
      <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path>
    </svg>
  </button>
  <div x-show="dropdownOpen === 'theme'" x-transition="" x-on:click="$event.stopPropagation()" class="absolute bottom-full mb-2 left-0 w-48 bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-2 z-50" style="display: none;">
    <button @click="setTheme('system'); dropdownOpen = null" :class="getCurrentTheme() === 'system' ? 'bg-gray-100 dark:bg-neutral-700' : ''" class="w-full text-left py-2 px-3 text-sm text-gray-800 cursor-pointer dark:text-gray-100 hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 rounded-lg flex items-center justify-between">
      <span>Auto (system)</span>
      <svg x-show="getCurrentTheme() === 'system'" class="w-4 h-4 text-gray-800 dark:text-gray-100" fill="currentColor" viewBox="0 0 20 20" style="display: none;">
        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
      </svg>
    </button>
    <button @click="setTheme('light'); dropdownOpen = null" :class="getCurrentTheme() === 'light' ? 'bg-gray-100 dark:bg-neutral-700' : ''" class="w-full text-left py-2 px-3 text-sm text-gray-800 cursor-pointer dark:text-gray-100 hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 rounded-lg flex items-center justify-between bg-gray-100 dark:bg-neutral-700">
      <span>Light</span>
      <svg x-show="getCurrentTheme() === 'light'" class="w-4 h-4 text-gray-800 dark:text-gray-100" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
      </svg>
    </button>
    <button @click="setTheme('dark'); dropdownOpen = null" :class="getCurrentTheme() === 'dark' ? 'bg-gray-100 dark:bg-neutral-700' : ''" class="w-full text-left py-2 px-3 text-sm text-gray-800 cursor-pointer dark:text-gray-100 hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 rounded-lg flex items-center justify-between">
      <span>Dark</span>
      <svg x-show="getCurrentTheme() === 'dark'" class="w-4 h-4 text-gray-800 dark:text-gray-100" fill="currentColor" viewBox="0 0 20 20" style="display: none;">
        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
      </svg>
    </button>
  </div>
</div>
        <!-- Language Dropdown -->
        <div class="relative">
          <button type="button" aria-expanded="false"
            class="relative flex w-full cursor-pointer items-center gap-x-2 rounded-full border border-gray-200 bg-white px-3 py-2 text-start text-sm text-nowrap text-gray-800 hover:bg-gray-100 focus:bg-gray-100 focus:outline-hidden dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-200 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700"
            x-on:click="($event).stopPropagation(); toggleDropdown('lang')" aria-haspopup="menu">
            <span class="truncate">English</span>
          </button>
          <div x-show="dropdownOpen === 'lang'" x-cloak x-transition x-on:click="$event.stopPropagation()"
            class="absolute bottom-full mb-2 left-0 w-48 bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-2 z-50">
            <button type="button"
              class="w-full flex text-left py-2 px-3 text-sm text-gray-800 cursor-pointer hover:bg-gray-100 dark:text-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 rounded-lg">
              <span class="mr-2">🇺🇸</span>
              English
              <svg class="w-4 h-4 ml-auto" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                  clip-rule="evenodd" />
              </svg>
            </button>
            <button type="button"
              class="w-full flex text-left py-2 px-3 text-sm text-gray-800 cursor-pointer hover:bg-gray-100 dark:text-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 rounded-lg">
              <span class="mr-2">🇮🇳</span>
              Hindi
            </button>
            <button type="button"
              class="w-full flex text-left py-2 px-3 text-sm text-gray-800 cursor-pointer hover:bg-gray-100 dark:text-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 rounded-lg">
              <span class="mr-2">🇮🇳</span>
              Tamil
            </button>
          </div>
        </div>
      </div>
    </footer>
  </div>
</aside>