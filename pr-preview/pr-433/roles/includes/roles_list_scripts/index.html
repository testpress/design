<script>
  function rolesListData() {
    return {
      "showDeleteModal": false,
      "selectedRoleToDelete": null,
      "showCreateRoleModal": false,
      "confirmedRoleName": null,
      "hasDeleteError": false,
      "canDeleteRole": false,
      "selectedRoleToRename": null,
      "showRenameRoleModal": false,
      "renamedName": null,

      selectRoleToDelete(id, name) {
        this.selectedRoleToDelete = {"name": name, "id": id};
        this.confirmedRoleName = null;
        this.hasDeleteError = false;
        this.canDeleteRole = false;
        this.showDeleteModal = true;
      },

      validateConfirmedRoleName() {
        if (!this.confirmedRoleName) {
          this.hasDeleteError = false;
          return;
        }

        if (this.confirmedRoleName == this.selectedRoleToDelete.name) {
          this.hasDeleteError = false;
          this.canDeleteRole = true;
        }
        else {
          this.hasDeleteError = true;
          this.canDeleteRole = false;
        }
      },

      deleteRole() {
        if (this.canDeleteRole) {
          this.showDeleteModal = false;
        }
      },

      selectRoleToRename(id, name) {
        this.selectedRoleToRename = {"name": name, "id": id};
        this.renamedName = name;
        this.showRenameRoleModal = true;
        setTimeout(() => this.$refs.roleRenameInput.select(), 50);
      },

      submitToRenameRole(name) {
        this.selectedRoleToRename = null;
        this.showRenameRoleModal = false;
      }
    }
  }
</script>
