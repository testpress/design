<main class="lg:col-span-8">
  <div class="">
    <h1 class="sr-only">Recent questions</h1>
    <ul role="list" class="space-y-4" x-cloak x-show="filteredQuestions.length > 0 && view_preference=='one' ">
      <li class="bg-white px-4 py-6  rounded-lg sm:p-6">
        <article aria-labelledby="question-title-81614">
          <div>
            <h2 id="question-title-81614" class="text-base font-medium text-gray-900"  x-text="`Q${currentQuestion.q_no}. ${currentQuestion.question}`"></h2>
          </div>
          <div class="mt-2 space-y-4 text-sm text-gray-700">
            <template x-for="(option, index) in currentQuestion.options" :key="index">
              <div class="flex items-center">
                <div
                  class="flex-shrink-0 w-6 h-6 rounded-full border flex items-center justify-center text-sm"
                  :class="{
                    'bg-green-400 text-white': currentQuestion.selectedIndex === index && index === currentQuestion.correctIndex,
                    'bg-red-400 text-white': currentQuestion.selectedIndex === index && index !== currentQuestion.correctIndex,
                    'bg-white text-gray-900 border-gray-300': currentQuestion.selectedIndex !== index
                  }"
                  x-text="String.fromCharCode(97 + index)">
                </div>
                <span class="ml-3" x-text="option"></span>
              </div>
            </template>
          </div>
          <div class="mt-6">
            <dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-4">
              <div class="sm:col-span-1">
                  <dt class="text-sm font-medium text-gray-500">Total Marks</dt>
                  <dd class="mt-1 text-sm text-gray-900" x-text="currentQuestion.total"></dd>
                </div>
              <div class="sm:col-span-1">
                  <dt class="text-sm font-medium text-gray-500">Negative Marks</dt>
                  <dd class="mt-1 text-sm text-gray-900" x-text="currentQuestion.negative"></dd>
                </div>
              <div class="sm:col-span-1">
                  <dt class="text-sm font-medium text-gray-500">Subject</dt>
                  <dd class="mt-1 text-sm text-gray-900" x-text="currentQuestion.subject"></dd>
                </div>
              <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Difficulty Level</dt>
                <dd class="mt-1 text-sm text-gray-900">Easy</dd>
              </div>
              <div class="sm:col-span-1" x-cloak x-show="currentQuestion.show_answer">
                <dt class="text-sm font-medium text-gray-500">Correct Answer</dt>
              <dd class="mt-2 text-sm text-gray-900 flex items-center gap-2">
                <div class="w-6 h-6 flex items-center justify-center rounded-full bg-green-400 text-white text-sm font-semibold">
                  <span x-text="String.fromCharCode(97 + currentQuestion.correctIndex)"></span>
                </div>
              </dd>
            </div>
            <div class="sm:col-span-1" x-cloak x-show="currentQuestion.show_answer">
              <dt class="text-sm font-medium text-gray-500">Marks Awarded</dt>
              <dd class="mt-1 text-sm text-gray-900" x-text="currentQuestion.total"></dd>
            </div>
            <div class="sm:col-span-1" x-cloak x-show="currentQuestion.show_answer">
              <dt class="text-sm font-medium text-gray-500">Time Taken</dt>
              <dd class="mt-1 text-sm text-gray-900" x-text="currentQuestion.time_taken"></dd>
            </div>
              <div class="sm:col-span-1" x-cloak x-show="currentQuestion.show_answer">
                  <dt class="text-sm font-medium text-gray-500">% of Students Correct</dt>
                  <dd class="mt-1 text-sm text-gray-900" x-text="`${currentQuestion.trivia}%`"></dd>
                </div>
              <div class="sm:col-span-2"x-cloak x-show="currentQuestion.show_answer" >
                <dt class="text-sm font-medium text-gray-500">Explanation</dt>
                <dd class="mt-1 max-w-prose space-y-5 text-sm text-gray-900">
               <span x-text="currentQuestion.explanation"></span>
              </dd>
            </div>
            </dl>
          </div>
          <div x-show="!currentQuestion.show_answer" x-cloak class="mt-6">
            <button
              @click="currentQuestion.show_answer = true"
              class="text-sm font-medium text-gray-500 underline"
              type="button"
            >
              Show Answer
            </button>            
        </div>
        </article>
      </li>
    </ul>
    <ul role="list" x-cloak x-show="filteredQuestions.length > 0 && view_preference=='all' ">
      <template x-for="(question, index) in filteredQuestions" :key="index">
      <li :id="`q_${currentSection.id}_${index}`" class="bg-white px-4 py-6  rounded-lg sm:p-6 mb-4">
        <article aria-labelledby="question-title-81614">
          <div>
            <h2 id="question-title-81614" class="text-base font-medium text-gray-900"  x-text="`Q${question.q_no}. ${question.question}`"></h2>
          </div>
          <div class="mt-2 space-y-4 text-sm text-gray-700">
            <template x-for="(option, index) in question.options" :key="index">
              <div class="flex items-center">
                <div
                  class="flex-shrink-0 w-6 h-6 rounded-full border flex items-center justify-center text-sm"
                  :class="{
                    'bg-green-400 text-white': question.selectedIndex === index && index === question.correctIndex,
                    'bg-red-400 text-white': question.selectedIndex === index && index !== question.correctIndex,
                    'bg-white text-gray-900 border-gray-300': question.selectedIndex !== index
                  }"
                  x-text="String.fromCharCode(97 + index)">
                </div>
                <span class="ml-3" x-text="option"></span>
              </div>
            </template>
          </div>
          <div class="mt-6">
            <dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-4">
              <div class="sm:col-span-1">
                  <dt class="text-sm font-medium text-gray-500">Total Marks</dt>
                  <dd class="mt-1 text-sm text-gray-900" x-text="question.total"></dd>
                </div>
              <div class="sm:col-span-1">
                  <dt class="text-sm font-medium text-gray-500">Negative Marks</dt>
                  <dd class="mt-1 text-sm text-gray-900" x-text="question.negative"></dd>
                </div>
              <div class="sm:col-span-1">
                  <dt class="text-sm font-medium text-gray-500">Subject</dt>
                  <dd class="mt-1 text-sm text-gray-900" x-text="question.subject"></dd>
                </div>
              <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Difficulty Level</dt>
                <dd class="mt-1 text-sm text-gray-900">Easy</dd>
              </div>
              <div class="sm:col-span-1" x-cloak x-show="question.show_answer">
                <dt class="text-sm font-medium text-gray-500">Correct Answer</dt>
              <dd class="mt-2 text-sm text-gray-900 flex items-center gap-2">
                <div class="w-6 h-6 flex items-center justify-center rounded-full bg-green-400 text-white text-sm font-semibold">
                  <span x-text="String.fromCharCode(97 + question.correctIndex)"></span>
                </div>
              </dd>
            </div>
            <div class="sm:col-span-1" x-cloak x-show="question.show_answer">
              <dt class="text-sm font-medium text-gray-500">Marks Awarded</dt>
              <dd class="mt-1 text-sm text-gray-900" x-text="question.total"></dd>
            </div>
            <div class="sm:col-span-1" x-cloak x-show="question.show_answer">
              <dt class="text-sm font-medium text-gray-500">Time Taken</dt>
              <dd class="mt-1 text-sm text-gray-900" x-text="question.time_taken"></dd>
            </div>
              <div class="sm:col-span-1" x-cloak x-show="question.show_answer">
                  <dt class="text-sm font-medium text-gray-500">% of Students Correct</dt>
                  <dd class="mt-1 text-sm text-gray-900" x-text="`${question.trivia}%`"></dd>
                </div>
              <div class="sm:col-span-2"x-cloak x-show="question.show_answer" >
                <dt class="text-sm font-medium text-gray-500">Explanation</dt>
                <dd class="mt-1 max-w-prose space-y-5 text-sm text-gray-900">
               <span x-text="question.explanation"></span>
              </dd>
            </div>
            </dl>
          </div>
          <div x-show="!question.show_answer" x-cloak class="mt-6">
            <button
              @click="question.show_answer = true"
              class="text-sm font-medium text-gray-500 underline"
              type="button"
            >
              Show Answer
            </button>            
        </div>
        </article>
      </li>
    </template>
    </ul>
    <div class="p-5 space-y-4 bg-white  sm:rounded-lg"  x-cloak x-show="filteredQuestions.length == 0">
      <!-- Empty State -->
<div class="p-5 min-h-96 flex flex-col justify-center items-center text-center">
  <svg class="w-48 mx-auto mb-4" width="178" height="90" viewBox="0 0 178 90" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="27" y="50.5" width="124" height="39" rx="7.5" fill="currentColor" class="fill-white"/>
    <rect x="27" y="50.5" width="124" height="39" rx="7.5" stroke="currentColor" class="stroke-gray-50"/>
    <rect x="34.5" y="58" width="24" height="24" rx="4" fill="currentColor" class="fill-gray-50"/>
    <rect x="66.5" y="61" width="60" height="6" rx="3" fill="currentColor" class="fill-gray-50"/>
    <rect x="66.5" y="73" width="77" height="6" rx="3" fill="currentColor" class="fill-gray-50"/>
    <rect x="19.5" y="28.5" width="139" height="39" rx="7.5" fill="currentColor" class="fill-white"/>
    <rect x="19.5" y="28.5" width="139" height="39" rx="7.5" stroke="currentColor" class="stroke-gray-100"/>
    <rect x="27" y="36" width="24" height="24" rx="4" fill="currentColor" class="fill-gray-100"/>
    <rect x="59" y="39" width="60" height="6" rx="3" fill="currentColor" class="fill-gray-100"/>
    <rect x="59" y="51" width="92" height="6" rx="3" fill="currentColor" class="fill-gray-100"/>
    <g filter="url(#filter19)">
    <rect x="12" y="6" width="154" height="40" rx="8" fill="currentColor" class="fill-white" shape-rendering="crispEdges"/>
    <rect x="12.5" y="6.5" width="153" height="39" rx="7.5" stroke="currentColor" class="stroke-gray-100" shape-rendering="crispEdges"/>
    <rect x="20" y="14" width="24" height="24" rx="4" fill="currentColor" class="fill-gray-200 "/>
    <rect x="52" y="17" width="60" height="6" rx="3" fill="currentColor" class="fill-gray-200"/>
    <rect x="52" y="29" width="106" height="6" rx="3" fill="currentColor" class="fill-gray-200"/>
    </g>
    <defs>
    <filter id="filter19" x="0" y="0" width="178" height="64" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
    <feOffset dy="6"/>
    <feGaussianBlur stdDeviation="6"/>
    <feComposite in2="hardAlpha" operator="out"/>
    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.03 0"/>
    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1187_14810"/>
    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1187_14810" result="shape"/>
    </filter>
    </defs>
  </svg>

  <div class="max-w-sm mx-auto">
    <p class="mt-2 font-medium text-gray-800">
      No questions found
    </p>
    <p class="mb-5 text-sm text-gray-500">
      Looks like there are no 
      <span class="" x-text="filter.toLowerCase()"></span> 
      questions in 
      <span class="" x-text="currentSection.name"></span>.
    </p>
  </div>
</div>
<!-- End Empty State -->
    </div>
    
    <nav class="flex items-center justify-between border-t border-gray-200 p-5" x-cloak x-show="filteredQuestions.length > 0 && view_preference=='one' ">
      <div class="-mt-px flex w-0 flex-1">
        <button
          @click="previousQuestion"
          :disabled="!hasPrevious()"
          class="inline-flex items-center border-t-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 disabled:text-gray-300"
        >
          <svg class="mr-3 size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M18 10a.75.75 0 0 1-.75.75H4.66l2.1 1.95a.75.75 0 1 1-1.02 1.1l-3.5-3.25a.75.75 0 0 1 0-1.1l3.5-3.25a.75.75 0 1 1 1.02 1.1l-2.1 1.95h12.59A.75.75 0 0 1 18 10Z" clip-rule="evenodd" />
          </svg>
          Previous
        </button>
      </div>
      
      <div class="-mt-px flex w-0 flex-1 justify-end">
        <button
          @click="nextQuestion"
          :disabled="!hasNext()"
          class="inline-flex items-center border-t-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 disabled:text-gray-300"
        >
          Next
          <svg class="ml-3 size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M2 10a.75.75 0 0 1 .75-.75h12.59l-2.1-1.95a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.1-1.95H2.75A.75.75 0 0 1 2 10Z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
      
    </nav>
  </div>
</main>
