<div
  x-cloak
  x-show="showPostReflectionGuide"
  @mouseenter="isHoveringPostReflectionGuideToast = true"
  @mouseleave="isHoveringPostReflectionGuideToast = false"
  x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2"
  x-transition:enter-end="translate-y-0 opacity-100 sm:translate-x-0"
  x-transition:leave="transition ease-in duration-100"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"
  class="fixed bottom-20 left-4 z-[60] max-w-sm w-full bg-white border border-gray-200 shadow-2xl rounded-xl dark:bg-neutral-800 dark:border-neutral-700 pointer-events-auto overflow-hidden"
>
  <div class="absolute top-0 left-0 w-full h-1 bg-gray-100 dark:bg-neutral-700 z-10">
    <div 
      class="h-full bg-emerald-500 transition-all duration-75 ease-linear" 
      :style="'width: ' + progressValue + '%'">
    </div>
  </div>

  <div class="p-4">
    <div class="flex gap-x-4">
      <div class="shrink-0">
        <template x-if="unreflectedCount > 0">
          <span class="inline-flex justify-center items-center size-10 rounded-full border-4 border-emerald-50 bg-emerald-100 text-emerald-600 dark:border-emerald-900 dark:bg-emerald-800 dark:text-emerald-400">
            <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>
          </span>
        </template>
        <template x-if="unreflectedCount === 0">
          <span class="inline-flex justify-center items-center size-10 rounded-full border-4 border-purple-50 bg-purple-100 text-purple-600 dark:border-purple-900 dark:bg-purple-800 dark:text-purple-400">
            <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="8" height="4" x="8" y="2" rx="1" ry="1"/>
              <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
              <path d="m9 14 2 2 4-4"/>
            </svg>
          </span>
        </template>
      </div>
      <div class="grow">
        <h3
          class="font-semibold text-gray-800 dark:text-neutral-200"
          x-text="unreflectedCount === 0 ? 'Well done! You did all questions.' : 'Great! Reflection saved.'"
        >
        </h3>
        <div class="mt-1 text-sm text-gray-600 dark:text-neutral-400">
          <template x-if="unreflectedCount > 0">
            <span>
              You have
              <strong class="text-gray-900 dark:text-white" x-text="unreflectedCount"></strong>
              more questions to reflect. We suggest you complete them to build a more accurate analysis report.
            </span>
          </template>
          <template x-if="unreflectedCount === 0">
            <span>
              You've reflected on everything here. Would you like to head over to your Mindset Insights report to see what your reflections reveal?
            </span>
          </template>
        </div>
        <div class="mt-4 flex items-center gap-3">
          <a
            x-show="unreflectedCount > 0"
            href="/exam_review/mindset_insights/"
            class="text-sm font-medium shrink-0 text-gray-500 hover:text-gray-800 dark:text-neutral-400 dark:hover:text-neutral-200"
          >
            Check report now
          </a>
          <button
            x-show="unreflectedCount === 0"
            type="button"
            @click="showPostReflectionGuide = false"
            class="text-sm font-medium shrink-0 text-gray-500 hover:text-gray-800 dark:text-neutral-400 dark:hover:text-neutral-200"
          >
            Stay here
          </button>
          
          <button
            x-show="unreflectedCount > 0"
            type="button"
            @click="showPostReflectionGuide = false"
            class="inline-flex shrink-0 w-auto justify-center items-center gap-x-1 text-sm font-semibold rounded-lg border border-transparent text-emerald-600 hover:text-emerald-800 dark:text-emerald-500 dark:hover:text-emerald-400"
          >
            Continue reflecting
            <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
          </button>
          <a
            x-show="unreflectedCount === 0"
            href="/exam_review/mindset_insights/"
            class="inline-flex shrink-0 w-auto justify-center items-center gap-x-1 text-sm font-semibold rounded-lg border border-transparent text-emerald-600 hover:text-emerald-800 dark:text-emerald-500 dark:hover:text-emerald-400"
          >
            Yes, see my analysis
            <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
          </a>
        </div> 
      </div>
      <div class="shrink-0">
        <button
          type="button"
          @click="showPostReflectionGuide = false"
          class="inline-flex items-center justify-center size-6 text-gray-400 hover:text-gray-500 rounded-lg focus:outline-none focus:bg-gray-100 dark:hover:text-neutral-300 dark:focus:bg-neutral-700"
        >
          <span class="sr-only">Close</span>
          <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
    </div>
  </div>
</div>