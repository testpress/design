<div>
  <!-- Question -->
  <div class="font-medium text-gray-800 dark:text-neutral-200 prose prose-sm max-w-none flex">
    {{item.user_selected_answer.question.id}}. {{ item.user_selected_answer.question.question_html|safe }}
  </div>

  <!-- Match Pairs - User Answers -->
  <div class="mt-4">
    <fieldset aria-label="Match Options" class="space-y-4 max-w-2xl">
      {% if item.user_selected_answer.question.questions and item.user_selected_answer.question.answers %} 
      {% set letters ="ABCDEFGHIJKLMNOPQRSTUVWXYZ" %} 
      {% for question in item.user_selected_answer.question.questions %} 
      {% set qidx = loop.index0 %} 
      {% set user_answer = item.user_selected_answer.user_answer[qidx] if item.user_selected_answer.user_answer else null %} 
      {% set correct_answer = item.user_selected_answer.question.answers[qidx] if item.user_selected_answer.question.answers else null %} 
      {% set is_correct = user_answer == correct_answer %}
      <div class="grid grid-cols-12 gap-x-4 items-center text-gray-600 dark:text-neutral-400">
        <!-- Left: Question label with circled letter -->
        <div class="col-span-5 flex items-center gap-2">
          <div class="flex shrink-0 justify-center items-center size-7 border rounded-full uppercase {% if user_answer and is_correct %}bg-emerald-400 text-white border-emerald-400 {% elif user_answer and not is_correct %}bg-red-400 text-white border-red-400 {% else %}bg-gray-100 border-gray-300 dark:bg-neutral-700 dark:border-neutral-600{% endif %}">
            {{ letters[qidx] }}
          </div>
          <span>{{ question }}</span>
        </div>

        <!-- Middle: Arrow icon -->
        <div class="col-span-1 flex justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-move-right text-gray-400">
            <path d="M18 8L22 12L18 16" />
            <path d="M2 12H22" />
          </svg>
        </div>

        <!-- Right: User-selected answer -->
        <div class="col-span-6">
          {% if user_answer %}
          <span>{{ user_answer }}</span>
          {% else %}
          <span class="text-gray-400 italic">-</span>
          {% endif %}
        </div>
      </div>
      {% endfor %} {% endif %}
    </fieldset>
  </div>
</div>
