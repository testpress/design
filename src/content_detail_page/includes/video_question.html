<div id="hs-pro-daem" class="fixed hidden flex justify-between items-center hs-overlay inset-0 bg-black/30 backdrop-blur-xs size-full fixed top-0 start-0 z-[99] overflow-x-hidden overflow-y-auto [--close-when-click-inside:true] video-question-modal" role="dialog" tabindex="-1" aria-labelledby="hs-pro-daem-label">
  <div class="hs-overlay flex justify-between items-center mt-0 ease-out transition-all max-w-xl w-full p-5 mx-auto h-[calc(100%-56px)] min-h-[calc(100%-56px)] flex items-center">
    <div class="w-full flex justify-between items-center max-h-full flex flex-col text-black-700 bg-white rounded-xl pointer-events-auto shadow-xl dark:bg-neutral-800">
     <!-- Quiz Card -->
      <div class="w-full bg-white dark:bg-neutral-900 shadow-sm overflow-auto rounded-xl">
        <div class="py-3 px-4 flex justify-between items-center border-b border-stone-200 dark:border-neutral-700">
        <h3 id="video_quiz" class="font-semibold text-stone-800 dark:text-neutral-200">
          Quiz
        </h3>
        <button onclick="resumeVideo()" type="button" class="size-8 inline-flex justify-center items-center gap-x-2 rounded-full border border-transparent bg-stone-100 text-stone-800 hover:bg-stone-200 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-stone-200 dark:bg-neutral-700 dark:hover:bg-neutral-600 dark:text-neutral-400 dark:focus:bg-neutral-600" aria-label="Close" data-hs-overlay="#reserve_zoom_license_1">
          <span class="sr-only">Close</span>
          <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
        </button>
      </div>
        {% for question in video_questions.data.questions %}
          <div class="p-6 video-question-position-{{ question.position }}" >
            <!-- Question -->
            {% if question.type == "GAPFILL" %}
              <div class="mt-2">
                {% set parts = question.question_text.split('___') %}
                <form id="gapfill-form-{{ question.question_index }}">
                  {% for part in parts %}
                    <span>{{ part }}</span>
                    {% if not loop.last %}
                      <input type="text" name="gap-{{ loop.index0 }}"
                        class="inline-block w-24 border border-gray-300 dark:border-neutral-600 rounded-md p-1 focus:border-none focus:outline-none focus:ring-2 focus:ring-emerald-500"
                        data-question="{{ question.question_index }}"
                        data-correct="{{ question.correct_option }}">
                    {% endif %}
                  {% endfor %}
                </form>
                <div class="gapfill-incorrect text-sm text-red-500 mt-1 hidden" id="gapfill-error-{{ question.question_index }}">
                  Correct answer is {{ question.correct_option }}.
                </div>
                <div class="gapfill-correct text-sm text-emerald-500 mt-1 hidden" id="gapfill-success-{{ question.question_index }}">
                  Correct! Well done.
                </div>
              </div>
            {% else %}
              <div class="mb-4">
                <p>{{question.question_text}}</p>
              </div>
            {% endif %}

            <!-- Options -->
            <div class="grid grid-cols-1 gap-3" x-data="{ options: {{ question.options|safe }},">
              {% if question.type == "MULTIPLE_CHOICE"%}
              {% for option in question.options %}
              <div
                class="option-item flex items-center justify-between p-2 rounded-lg border transition-colors cursor-pointer"
                data-question="{{ question.question_index }}"
                data-option="{{ option }}"
                data-correct="{{ question.correct_option }}"
                onclick="selectOptions(this)"
              >
                <div class="flex items-start flex-1 min-w-0">
                  <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
                    {% if loop.index0 == 0 %}A.{% elif loop.index0 == 1 %}B.{% elif loop.index0 == 2 %}C.{% else %}D.{%
                    endif %}
                  </span>
                  <div
                    class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden"
                    title="{{ option }}">{{ option }}</div>
                </div>
                <div class="checkmark-icon hidden">
                  <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
                  </svg>
                </div>
                <div class="wrong-icon hidden">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="w-5 h-5 text-red-500" aria-hidden="true">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="m15 9-6 6"></path>
                    <path d="m9 9 6 6"></path>
                  </svg>
                </div>
              </div>
              {% endfor %}
              {% endif %}
              {% if question.type == "MULTIPLE_SELECT"%}
              {% for option in question.options %}
              <div
                class="option-item flex items-start justify-between p-2 rounded-lg border transition-colors cursor-pointer"
                data-question="{{ question.question_index }}"
                data-option="{{ option }}"
                data-correct="{{ question.correct_option | safe }}"
                onclick="selectMultipleOption(this)"
              >
                <div class="flex items-center flex-1 min-w-0">
                  <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3 flex-shrink-0 mt-0.5">
                    {% if loop.index0 == 0 %}A.{% elif loop.index0 == 1 %}B.{% elif loop.index0 == 2 %}C.{% else %}D.{%
                    endif %}
                  </span>
                  <div
                    class="text-gray-700 dark:text-neutral-300 break-words leading-relaxed line-clamp-2 overflow-hidden"
                    title="{{ option }}">{{ option }}</div>
                </div>
                <div class="checkmark-icon hidden">
                  <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
                  </svg>
                </div>
                <div class="wrong-icon hidden">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="w-5 h-5 text-red-500" aria-hidden="true">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="m15 9-6 6"></path>
                    <path d="m9 9 6 6"></path>
                  </svg>
                </div>
              </div>
              {% endfor %}
              {% endif %}
              
            </div>

            <!-- Hint Section -->
            <div class="mt-4">
              <!-- Hint Button -->
              <button type="button"
                class="hint-btn text-xs text-gray-600 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 flex items-center"
                onclick="toggleHint('{{question.question_index}}')">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                  stroke="currentColor" class="w-3 h-3 mr-1">
                  <path stroke-linecap="round" stroke-linejoin="round"
                    d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
                </svg>
                <span class="hint-text">Show Hint</span>
              </button>
              

              <!-- Hint Container -->
              <div class="hint-container hidden mt-3">
                <div
                  class="text-xs text-gray-600 dark:text-neutral-400 bg-gray-50 dark:bg-neutral-800 px-3 py-2 rounded-md border border-gray-200 dark:border-neutral-600">
                  <span>{{ question.hint }}</span>
                </div>
              </div>
            </div>

            <!-- Explanation Section -->
            <div class="explanation-container hidden mt-4">
              <div
                class="explanation-card bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-600 rounded-lg p-4">
                <!-- Explanation Header -->
                <div class="flex items-center mb-3">
                  <svg class="w-4 h-4 mr-2 text-gray-600 dark:text-neutral-400" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                  <h5 class="text-sm font-medium text-gray-800 dark:text-neutral-200">Explanation</h5>
                </div>

                <!-- Explanation Text -->
                <p class="text-sm text-gray-700 dark:text-neutral-300 mb-3">{{ question.explanation }}</p>

              </div>
            </div>
            <div class="mt-4 flex justify-end">
                <!-- Check Bu]tton -->
                {% if question.type == "MULTIPLE_CHOICE"%}
                <button type="button" class="check-btn px-4 py-2 bg-emerald-500 text-white rounded-lg disabled:opacity-50" onclick="checkAnswer(this)">
                  Check
                </button>
                {% endif %}
                {% if question.type == "MULTIPLE_SELECT"%}
                <button type="button" class="check-btn px-4 py-2 bg-emerald-500 text-white rounded-lg disabled:opacity-50" onclick="checkMultipleAnswer(this)">
                  Check
                </button>
                {% endif %}
                {% if question.type == "GAPFILL"%}
                <button type="button" class="check-btn px-4 py-2 bg-emerald-500 text-white rounded-lg disabled:opacity-50" onclick="checkGapFillAnswer(this)">
                  Check
                </button>
                {% endif %}
                <!-- Continue Button -->
                <button type="button"
                 class="continue-btn px-4 py-2 bg-emerald-500 text-white rounded-lg hidden"
                 >
                  Continue
                </button>
            </div>
          </div>
          {% endfor %}

        </div>
      </div>
  </div>
</div>
{% include './quiz_script.html' %}
{% include './video_question_script.html' %}
