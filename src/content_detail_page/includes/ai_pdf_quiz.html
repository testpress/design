<div class="w-full max-w-4xl mx-auto">
  <p class="text-sm text-gray-800 dark:text-neutral-200 mb-4">{{ ai_pdf_quiz.quiz_data.content }}</p>
  
  <!-- Quiz Card -->
  <div class="bg-white dark:bg-neutral-900 rounded-lg shadow-sm border border-gray-200 dark:border-neutral-700">
    {% for question in ai_pdf_quiz.quiz_data.questions %}
    <div class="p-6">
      <!-- Question -->
      <div class="mb-6">
        <h4 class="text-sm font-medium text-gray-800 dark:text-neutral-200 mb-2">
          {{question.question_index + 1}}. {{question.question_text}}
        </h4>
      </div>
      
      <!-- Options -->
      <div class="space-y-3">
        {% for option in question.options %}
        <div class="option-item flex items-center justify-between p-3 rounded-lg border transition-colors cursor-pointer"
             data-question="{{ question.question_index }}"
             data-option="{{ option }}"
             data-correct="{{ question.correct_option }}"
             onclick="selectOption(this)">
          <div class="flex items-center">
            <span class="text-sm font-medium text-gray-700 dark:text-neutral-300 mr-3">
              {% if loop.index0 == 0 %}A.{% elif loop.index0 == 1 %}B.{% elif loop.index0 == 2 %}C.{% else %}D.{% endif %}
            </span>
            <span class="text-gray-700 dark:text-neutral-300">{{ option }}</span>
          </div>
          <div class="checkmark-icon hidden">
            <svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12 2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
          </div>
          <div class="wrong-icon hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-500" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="m15 9-6 6"></path>
              <path d="m9 9 6 6"></path>
            </svg>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<script>
function selectOption(element) {
  const questionIndex = element.getAttribute('data-question');
  const selectedOption = element.getAttribute('data-option');
  const correctOption = element.getAttribute('data-correct');
  
  // Reset all options in this question to default state
  const questionOptions = document.querySelectorAll(`[data-question="${questionIndex}"]`);
  questionOptions.forEach(option => {
    option.classList.remove('border-emerald-500', 'bg-emerald-50', 'dark:bg-emerald-900/20', 'border-red-500', 'bg-red-50', 'dark:bg-red-900/20');
    option.classList.add('border-gray-200', 'dark:border-neutral-600');
    // Hide all checkmarks and wrong icons
    const checkmark = option.querySelector('.checkmark-icon');
    const wrongIcon = option.querySelector('.wrong-icon');
    if (checkmark) checkmark.classList.add('hidden');
    if (wrongIcon) wrongIcon.classList.add('hidden');
  });
  
  // Apply styling based on selection
  if (selectedOption === correctOption) {
    // Correct answer selected - full emerald styling
    element.classList.remove('border-gray-200', 'dark:border-neutral-600', 'border-dashed');
    element.classList.add('border-emerald-500', 'bg-emerald-50', 'dark:bg-emerald-900/20');
    // Show checkmark
    const checkmark = element.querySelector('.checkmark-icon');
    if (checkmark) checkmark.classList.remove('hidden');
  } else {
    // Incorrect answer selected
    element.classList.remove('border-gray-200', 'dark:border-neutral-600');
    element.classList.add('border-red-500', 'bg-red-50', 'dark:bg-red-900/20');
    
    // Show wrong icon
    const wrongIcon = element.querySelector('.wrong-icon');
    if (wrongIcon) wrongIcon.classList.remove('hidden');
    
    // Also highlight the correct answer with subtle dotted border
    const correctElement = document.querySelector(`[data-question="${questionIndex}"][data-option="${correctOption}"]`);
    if (correctElement) {
      correctElement.classList.remove('border-gray-200', 'dark:border-neutral-600', 'bg-emerald-50', 'dark:bg-emerald-900/20');
      correctElement.classList.add('border-emerald-500', 'border-dashed');
    }
  }
}
</script>
  