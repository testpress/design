
<div class="lg:px-8 relative" x-data="{...videoQuiz(), toggleSVG:true, isBookmarked:false, is_renderable:false}" x-init="init()">
  {% include "./content_heading.html" %}
  <div class="mt-6">
    <div style="padding-top:56.25%;position:relative;" class="video-container">
      <iframe src="https://lmsdemo.testpress.in/embed/iFTEoF7PzJe/?access_token=ea3de778-37e2-41af-b8a2-e96dda33f662" style="border:0;max-width:100%;position:absolute;top:0;left:0;height:100%;width:100%;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope picture-in-picture" allowfullscreen="" frameborder="0"></iframe>
    </div>
    {% include "./video_question.html" %}
  </div>
  </div>
  <div class="px-4 lg:px-0">
  {% include "./doubt_button.html" %}
  <div class="mt-6 text-sm text-gray-900 description" x-data="{ showFullDescription: false }">
    <div x-cloak x-show="!showFullDescription">
        <span id="desc-chaptercontent-id" class="short-description">
          Discover the secrets of digital marketing in this comprehensive guide! From SEO strategies to social media growth, we cover everything you need to boost your brand online. Learn expert tips, proven techniques, and the latest trends to stay ahead of the competition. Watch now and start growing!...
        </span>
        <span @click="showFullDescription = true" class="text-emerald-600 text-bold cursor-pointer">Show More</span>
    </div>
    <div x-cloak x-show="showFullDescription">
        <span id="full-desc-chaptercontent-id" class="full-description">
          Discover the secrets of digital marketing in this comprehensive guide! From SEO strategies to social media growth, we cover everything you need to boost your brand online. Learn expert tips, proven techniques, and the latest trends to stay ahead of the competition. Watch now and start growing! Learn how to optimize your website for search engines, create engaging content, and drive organic traffic that converts. We explore the importance of keyword research, backlink building, and on-page SEO to ensure your content ranks higher on Google.
        </span>
        <span @click="showFullDescription = false" class="text-emerald-600 text-bold cursor-pointer">Show Less</span>
    </div>
  </div>
</div>

<script>
function videoQuiz() {
  return {
    quizEnabled: false,
    video_container: null,
    video_iframe: null,
    isPausedForQuiz: false,
    video_questions_positions: [10,50,90], // checkpoints in seconds
    currentPositionIndex: 0,

    init() {
      const params = new URLSearchParams(window.location.search);
      this.quizEnabled = params.get("video_quiz_enabled") === "true";

      this.video_container = document.querySelector(".video-container");
      this.video_iframe = this.video_container.querySelector("iframe");

      if (this.quizEnabled){
        this.schedulePause();
      }
    },

    schedulePause() {
      this.video_questions_positions.forEach((position, index) => {
        const delay = position * 1000;
        setTimeout(() => {
          this.currentPositionIndex = index;
          this.pauseVideo();
        }, delay);
      });
    },

    pauseVideo() {
      video_question_modal = document.querySelector(".video-question-modal");
      video_question_modal.classList.remove("hidden");
      const currentVideoQuestion = document.querySelector(`.video-question-position-${this.video_questions_positions[this.currentPositionIndex]}`);
      if (currentVideoQuestion) {
        currentVideoQuestion.style.display = "block";
      }
    },
  }
}
</script>
