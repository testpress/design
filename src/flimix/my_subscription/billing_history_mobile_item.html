<div class="bg-[#141414] border border-[#2a2a2a] rounded-lg p-4">
  <div class="flex items-start justify-between mb-3">
    <div>
      {% if history.item_type == 'movie' %}
      <div class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-film w-4 h-4 text-indigo-400" aria-hidden="true">
          <rect width="18" height="18" x="3" y="3" rx="2"></rect>
          <path d="M7 3v18"></path>
          <path d="M3 7.5h4"></path>
          <path d="M3 12h18"></path>
          <path d="M3 16.5h4"></path>
          <path d="M17 3v18"></path>
          <path d="M17 7.5h4"></path>
          <path d="M17 16.5h4"></path>
        </svg>
        <p class="text-white">{{ history.item }}</p>
      </div>
      <p class="text-slate-400 text-sm font-mono mt-1">{{ history.order_id }}</p>
      {% if history.movie_details %}
      <div class="mt-2 text-xs space-y-1 bg-[#0f0f0f] border border-[#2a2a2a] rounded p-2">
        <p class="text-slate-400">{{ history.movie_details.description }}</p>
        <div class="flex items-center gap-2 pt-1">
          {% if history.movie_details.rental_type == 'Owned' %}
          <span class="text-emerald-400">Owned</span>
          {% else %}
          <span class="text-yellow-400">{{ history.movie_details.rental_type }}</span>
          {% if history.movie_details.duration %}
          <span class="text-slate-600">â€¢</span>
          <span class="text-slate-400">{{ history.movie_details.duration }}</span>
          {% endif %}
          {% endif %}
        </div>
      </div>
      {% endif %}
      {% else %}
      <p class="text-white">{{ history.item }}</p>
      <p class="text-slate-400 text-sm font-mono mt-1">{{ history.order_id }}</p>
      {% endif %}
    </div>
    {% if history.status == 'paid' %}
    <span data-slot="badge"
      class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden [a&]:hover:bg-accent [a&]:hover:text-accent-foreground bg-emerald-500/20 text-emerald-400 border-emerald-500/30">Paid</span>
    {% elif history.status == 'refunded' %}
    <span data-slot="badge"
      class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden [a&]:hover:bg-accent [a&]:hover:text-accent-foreground bg-indigo-500/20 text-indigo-400 border-indigo-500/30">Refunded</span>
    {% elif history.status == 'pending' %}
    <span data-slot="badge"
      class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden [a&]:hover:bg-accent [a&]:hover:text-accent-foreground bg-yellow-500/20 text-yellow-400 border-yellow-500/30">Pending</span>
    {% elif history.status == 'failed' %}
    <span data-slot="badge"
      class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden [a&]:hover:bg-accent [a&]:hover:text-accent-foreground bg-red-500/20 text-red-400 border-red-500/30">Failed</span>
    {% endif %}
  </div>
  <div class="space-y-2 text-sm">
    <div class="flex justify-between">
      <span class="text-slate-400">Date</span>
      <span class="text-slate-300">{{ history.date }}</span>
    </div>
    <div class="flex justify-between">
      <span class="text-slate-400">Amount</span>
      <span class="text-white">{{ history.amount | replace("INR", "Rs.") }}</span>
    </div>
    <div class="flex justify-between">
      <span class="text-slate-400">Payment</span>
      <div class="flex items-center gap-2">
        {% if history.payment_method == 'card' %}
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-credit-card w-4 h-4 text-slate-400" aria-hidden="true">
          <rect width="20" height="14" x="2" y="5" rx="2"></rect>
          <line x1="2" x2="22" y1="10" y2="10"></line>
        </svg>
        {% else %}
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-smartphone w-4 h-4 text-slate-400" aria-hidden="true">
          <rect width="14" height="20" x="5" y="2" rx="2" ry="2"></rect>
          <path d="M12 18h.01"></path>
        </svg>
        {% endif %}
        <span class="text-slate-300 capitalize">{{ history.payment_method }}</span>
      </div>
    </div>
  </div>
  <div class="mt-3 pt-3 border-t border-[#2a2a2a] flex items-center justify-between">
    <span class="text-slate-400 text-sm">Receipt</span>
    <div class="flex items-center gap-2">
      <a href="/flimix/my_subscription/receipt/" class="text-slate-400 hover:text-white transition-colors text-sm">
        View
      </a>
      <span class="text-slate-600">|</span>
      <button class="flex items-center gap-1.5 text-slate-400 hover:text-white transition-colors text-sm">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-download w-4 h-4" aria-hidden="true">
          <path d="M12 15V3"></path>
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <path d="m7 10 5 5 5-5"></path>
        </svg>
        <span>Download</span>
      </button>
    </div>
  </div>
</div>