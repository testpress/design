<tr data-slot="table-row"
  class="data-[state=selected]:bg-muted border-b border-[#2a2a2a] hover:bg-[#141414] transition-colors">
  <td data-slot="table-cell"
    class="p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] text-slate-300">
    {{ history.date }}</td>
  <td data-slot="table-cell"
    class="p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] text-slate-300 font-mono text-sm">
    {{ history.order_id }}</td>
  <td data-slot="table-cell"
    class="p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] text-slate-300">
    {% if history.item_type == 'movie' %}
    <div class="flex items-center gap-2 cursor-help" data-state="closed" data-slot="tooltip-trigger">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-film w-4 h-4 text-indigo-400" aria-hidden="true">
        <rect width="18" height="18" x="3" y="3" rx="2"></rect>
        <path d="M7 3v18"></path>
        <path d="M3 7.5h4"></path>
        <path d="M3 12h18"></path>
        <path d="M3 16.5h4"></path>
        <path d="M17 3v18"></path>
        <path d="M17 7.5h4"></path>
        <path d="M17 16.5h4"></path>
      </svg>
      <span class="underline decoration-dotted underline-offset-4 decoration-slate-600">{{ history.item }}</span>
    </div>
    {% else %}
    {{ history.item }}
    {% endif %}
  </td>
  <td data-slot="table-cell"
    class="p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] text-slate-400 text-sm">
    {{ history.type }}</td>
  <td data-slot="table-cell"
    class="p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] text-white">
    {{ history.amount }}</td>
  <td data-slot="table-cell"
    class="p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">
    <div class="flex items-center gap-2">
      {% if history.payment_method == 'card' %}
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-credit-card w-4 h-4 text-slate-400" aria-hidden="true">
        <rect width="20" height="14" x="2" y="5" rx="2"></rect>
        <line x1="2" x2="22" y1="10" y2="10"></line>
      </svg>
      {% else %}
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-smartphone w-4 h-4 text-slate-400" aria-hidden="true">
        <rect width="14" height="20" x="5" y="2" rx="2" ry="2"></rect>
        <path d="M12 18h.01"></path>
      </svg>
      {% endif %}
      <span class="text-slate-400 text-sm capitalize">{{ history.payment_method }}</span>
    </div>
  </td>
  <td data-slot="table-cell"
    class="p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]">
    {% if history.status == 'paid' %}
    <span data-slot="badge"
      class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden [a&]:hover:bg-accent [a&]:hover:text-accent-foreground bg-emerald-500/20 text-emerald-400 border-emerald-500/30">Paid</span>
    {% elif history.status == 'refunded' %}
    <span data-slot="badge"
      class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden [a&]:hover:bg-accent [a&]:hover:text-accent-foreground bg-indigo-500/20 text-indigo-400 border-indigo-500/30">Refunded</span>
    {% elif history.status == 'pending' %}
    <span data-slot="badge"
      class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden [a&]:hover:bg-accent [a&]:hover:text-accent-foreground bg-yellow-500/20 text-yellow-400 border-yellow-500/30">Pending</span>
    {% elif history.status == 'failed' %}
    <span data-slot="badge"
      class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden [a&]:hover:bg-accent [a&]:hover:text-accent-foreground bg-red-500/20 text-red-400 border-red-500/30">Failed</span>
    {% endif %}
  </td>
  <td data-slot="table-cell"
    class="p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] text-right">
    <div class="flex items-center justify-end gap-2">
      <!-- View Button -->
      <a href="/flimix/my_subscription/receipt/" data-slot="button"
        class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 text-slate-400 hover:text-white hover:bg-[#2a2a2a]">
        View
      </a>
      <!-- Download Button -->
      <button data-slot="button"
        class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-slate-400 hover:text-white hover:bg-[#2a2a2a]"
        title="Download Receipt">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-download w-4 h-4" aria-hidden="true">
          <path d="M12 15V3"></path>
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <path d="m7 10 5 5 5-5"></path>
        </svg>
      </button>
    </div>
  </td>
</tr>