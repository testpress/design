{% for album in albums %}
<tr x-data="{ showMore: false }">
  <td class="size-px whitespace-nowrap ps-3 py-4">
    <input type="checkbox"
      class="shrink-0 border-stone-300 rounded text-green-600 focus:ring-green-600 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-600 dark:checked:bg-green-500 dark:checked:border-green-500 dark:focus:ring-offset-neutral-800">
  </td>
  <td class="size-px whitespace-nowrap px-4 py-3">
    <div class="w-full flex items-center gap-x-3">
      <img class="shrink-0 size-12 rounded-md"
        src="{{ album.thumbnail_img }}"
        alt="Product Image">
      <div class="grow">
        <button class="text-sm font-medium text-stone-800 hover:text-green-600 decoration-2 hover:underline focus:outline-none focus:underline focus:text-green-600 dark:text-neutral-200 dark:hover:text-green-500 dark:focus:text-green-500"
        aria-haspopup="dialog" aria-expanded="false" aria-controls="album_detail_{{ album.id }}" data-hs-overlay="#album_detail_{{ album.id }}">
          {{ album.title }}
      </button>
      </div>
    </div>
  </td>
  <td class="size-px whitespace-nowrap px-4 py-3" >
    <div class="flex gap-1 hs-tooltip [--trigger:hover] sm:[--placement:right]">
      {% for genre in album.genres.slice(0, 2) %}
        <span class="p-2 bg-stone-100 text-stone-800 text-xs rounded-md dark:bg-neutral-700 dark:text-neutral-200 truncate max-w-52">
          {{ genre }}
        </span>
      {% endfor %}
      {% if album.genres.length > 2 %}
        <div class="relative inline-block text-left mt-1">
          <span @mouseenter="showMore = true" @mouseleave="showMore = false" @click="showMore=!showMore" @click.away="showMore=false" class="cursor-pointer font-medium p-2 text-stone-800 text-xs rounded-md dark:text-neutral-200">
            +{{ album.genres.length - 2 }} more
          </span>
          <div x-show="showMore" class="absolute top-1/2 left-full z-10 transform -translate-y-1/2 ml-2 w-auto min-w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"
          x-transition:enter="transition ease-out duration-100"
        x-transition:enter-start="transform opacity-0 scale-95"
        x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75"
        x-transition:leave-start="transform opacity-100 scale-100"
        x-transition:leave-end="transform opacity-0 scale-95">
            <ul class="py-3 px-4 space-y-1 list-disc list-inside text-sm text-gray-800 dark:text-neutral-200">
              {% for genre in album.genres.slice(2) %}
              <li>
                {{ genre }}
              </li>
              {% endfor %}  
            </ul>
        </div>
        {% endif %}
    </div>
    </td>
  <td class="size-px whitespace-nowrap px-4 py-3">
    <span class="text-sm text-stone-600 dark:text-neutral-400 pl-10">
      {{album.total_episodes }}
     </span>
  </td>
  <td class="size-px whitespace-nowrap px-4 py-1">
    <span class="py-1.5 px-2 inline-flex items-center gap-x-1.5 text-xs font-medium
    {% if album.status == 'Draft' %}
       bg-indigo-100 text-indigo-800 rounded-full dark:bg-indigo-500/10 dark:text-indigo-500
    {% elif album.status == 'Published' %}
      bg-green-100 text-green-800 rounded-full dark:bg-green-500/10 dark:text-green-500
    {% endif %}"> 
    {% if album.status == "Draft" %}
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="shrink-0 size-3.5">
      <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75" />
    </svg>    
    {% elif album.status == "Published" %}
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="shrink-0 size-3.5">
      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
    </svg>       
    {% endif %}
    {{ album.status }}
    </span>
  <td class="size-px whitespace-nowrap px-4 py-1 text-end">
    <div class="hs-dropdown [--auto-close:inside] [--placement:bottom-right] relative inline-flex">
      <button id="hs-pro-{{ album.id }}" type="button" class="size-7 inline-flex justify-center items-center gap-x-2 rounded-lg border border-stone-200 bg-white text-stone-800 shadow-sm hover:bg-stone-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-stone-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown">
        <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>
      </button>

      <div class="hs-dropdown-menu hs-dropdown-open:opacity-100 w-28 transition-[opacity,margin] duration opacity-0 hidden z-10 bg-white rounded-xl shadow-[0_10px_40px_10px_rgba(0,0,0,0.08)] dark:shadow-[0_10px_40px_10px_rgba(0,0,0,0.2)] dark:bg-neutral-900" role="menu" aria-orientation="vertical" aria-labelledby="hs-pro-{{ album.id }}">
        <div class="p-1">
          <button type="button" class="w-full flex items-center gap-x-3 py-1.5 px-2 rounded-lg text-[13px] text-stone-800 hover:bg-stone-100 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-stone-100 dark:text-neutral-300 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800">
            Edit
          </button>
          <button type="button" class="w-full flex items-center gap-x-3 py-1.5 px-2 rounded-lg text-[13px] text-stone-800 hover:bg-stone-100 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-stone-100 dark:text-neutral-300 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800">
            Delete
          </button>
          </div>
    </div>
  </td>
</tr>
{% endfor %}
