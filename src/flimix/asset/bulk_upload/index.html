
{% extends "src/flimix/layouts/sidebar_layout.html" %}
{% block main_class %}bg-stone-50 min-h-[92vh]{% endblock %}

{% block main_content %}
<div class="space-y-5" x-data="bulkUploadComponent()">
    {% include "./header.html" %}
    <div class="rounded-md bg-green-50 p-4" x-cloak x-show="isUploaded">
      <div class="flex">
        <div class="shrink-0">
          <svg class="size-5 text-green-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
            <path fill-rule="evenodd" d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm font-medium text-green-800">All files have been successfully uploaded and queued for transcoding.</p>
        </div>
      </div>
    </div>
    
    <div x-cloak  x-show="invalidFiles.length && !isUploading" class="rounded-md bg-red-50 p-4">
      <div class="flex">
        <div class="shrink-0">
          <svg class="size-5 text-red-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
            <path fill-rule="evenodd" d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-red-800">The following files cannot be uploaded as they are not video, audio, or e-book files.</h3>
          <div class="mt-2 text-sm text-red-700">
            <template x-for="file in invalidFiles" :key="file">
              <li x-text="file"></li>
            </template>
          </div>
        </div>
        <div class="ml-auto pl-3">
          <div class="-mx-1.5 -my-1.5">
            <button type="button" @click="clearInvalidFiles"
            class="inline-flex rounded-md bg-red-50 p-1.5 text-red-500 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-600 focus:ring-offset-2 focus:ring-offset-red-50">
              <span class="sr-only">Dismiss</span>
              <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
      
    {% include "./upload_form.html" %}
    {% include "./uploading_files.html" %}
    {% include "./selected_files_table.html" %}
    <!-- Media Card -->
    <div class="p-4 flex justify-end gap-x-2" x-cloak x-show="!isUploading">
        <div class="flex-1 flex justify-end items-center gap-2">
          <a href="/flimix/asset/all/" class="py-2 px-3 text-nowrap inline-flex justify-center items-center text-start bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-sm align-middle hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-overlay="#hs-pro-daem">
            Cancel
          </a>
    
          <button type="button"  :disabled="isUploadDisabled" @click="startUpload()" class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start bg-blue-600 border border-blue-600 text-white text-sm font-medium rounded-lg shadow-sm align-middle hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:ring-1 focus:ring-blue-300 dark:focus:ring-blue-500" data-hs-overlay="#hs-pro-daem">
            Start Upload
          </button>
        </div>
    </div>

  <!-- End Media Card -->

 </div>

{% endblock main_content %}

{% block script %} 
    {% include "./bulk_upload_script.html" %}
{% endblock script %}


