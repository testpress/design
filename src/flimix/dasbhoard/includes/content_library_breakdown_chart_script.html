<script>
  window.addEventListener('load', () => {
    // Apex Content Library Breakdown Horizontal Bar Chart
    (function () {
      buildChart('#hs-content-library-breakdown-chart', (mode) => ({
        chart: {
          height: 300,
          type: 'bar',
          toolbar: {
            show: false
          },
          zoom: {
            enabled: false
          }
        },
        series: [
          {
            name: 'Content Count',
            data: [470, 230, 180, 130, 90, 60, 35] // Movies, Series, Podcasts, Albums, Books, Live Streams, Zoom
          }
        ],
        plotOptions: {
          bar: {
            horizontal: true,
            barHeight: '70%',
            borderRadius: 4,
            distributed: true, // Each bar gets a different color
          }
        },
        dataLabels: {
          enabled: false
        },
        legend: {
          show: false
        },
        xaxis: {
          categories: ['Movies', 'Series', 'Podcasts', 'Albums', 'Books', 'Live', 'Zoom'],
          axisBorder: {
            show: false
          },
          axisTicks: {
            show: false
          },
          labels: {
            show: false // Hide category labels from bottom
          }
        },
        yaxis: {
          labels: {
            align: 'left',
            minWidth: 0,
            maxWidth: 140,
            offsetX: -15, // Negative value moves labels away from chart (to the left)
            style: {
              colors: '#a8a29e',
              fontSize: '12px',
              fontFamily: 'Inter, ui-sans-serif',
              fontWeight: 400
            },
            formatter: (value) => {
              if (value >= 1000) return `${(value / 1000).toFixed(1)}k`;
              return value;
            }
          }
        },
        grid: {
          strokeDashArray: 2,
          borderColor: '#e5e7eb',
          xaxis: {
            lines: {
              show: true
            }
          },
          yaxis: {
            lines: {
              show: false
            }
          },
          padding: {
            left: 30, // Increase left padding to create more space for labels
            right: 0
          }
        },
        tooltip: {
          y: {
            formatter: (value) => value
          },
          custom: function (props) {
            const { dataPointIndex, w } = props;
            // Get category from xaxis categories
            const categories = ['Movies', 'Series', 'Podcasts', 'Albums', 'Books', 'Live', 'Zoom'];
            const category = categories[dataPointIndex] || w.globals.categoryLabels?.[dataPointIndex] || 'Unknown';
            const value = w.globals.series[0][dataPointIndex];
            // Get color from the colors array based on index
            const colors = ['#f97316', '#3b82f6', '#22c55e', '#9333ea', '#ef4444', '#14b8a6', '#6b7280'];
            const color = colors[dataPointIndex] || w.globals.colors?.[dataPointIndex] || '#6b7280';

            return `
              <div class="ms-0.5 mb-2 bg-white border border-gray-200 text-gray-800 rounded-lg shadow-md dark:bg-neutral-800 dark:border-neutral-700 min-w-28">
                <div class="apexcharts-tooltip-title flex justify-between font-semibold !text-sm !bg-white !border-gray-200 text-gray-800 rounded-t-lg dark:!bg-neutral-800 dark:!border-neutral-700 dark:text-neutral-200 p-2">
                  <span>${category}</span>
                </div>
                <div class="p-2 space-y-1">
                  <div class="flex justify-between items-center gap-x-4">
                    <span class="flex items-center">
                      <span class="size-2.5 inline-block rounded-sm me-2" style="background:${color}"></span>
                      <span class="text-xs text-gray-600 dark:text-neutral-400">Count</span>
                    </span>
                    <span class="text-xs font-medium text-gray-800 dark:text-neutral-200">${value}</span>
                  </div>
                </div>
              </div>
            `;
          }
        },
        states: {
          hover: {
            filter: {
              type: 'darken',
              value: 0.9
            }
          }
        },
        responsive: [{
          breakpoint: 568,
          options: {
            chart: {
              height: 300
            },
            yaxis: {
              labels: {
                offsetX: -15, // Negative value moves labels away from chart (to the left)
                style: {
                  colors: '#a8a29e',
                  fontSize: '11px',
                  fontFamily: 'Inter, ui-sans-serif',
                  fontWeight: 400
                }
              }
            },
            grid: {
              padding: {
                left: 30, // Increase left padding to create more space for labels
                right: 0
              }
            },
            xaxis: {
              labels: {
                style: {
                  colors: '#a8a29e',
                  fontSize: '11px',
                  fontFamily: 'Inter, ui-sans-serif',
                  fontWeight: 400
                }
              }
            }
          }
        }]
      }), {
        colors: ['#f97316', '#3b82f6', '#22c55e', '#9333ea', '#ef4444', '#14b8a6', '#6b7280'], // Orange, Blue, Green, Purple, Red, Teal, Grey
        grid: {
          borderColor: '#e5e7eb'
        },
        xaxis: {
          labels: {
            style: {
              colors: '#a8a29e'
            }
          }
        },
        yaxis: {
          labels: {
            style: {
              colors: '#a8a29e'
            }
          }
        }
      }, {
        colors: ['#fb923c', '#60a5fa', '#4ade80', '#a855f7', '#f87171', '#2dd4bf', '#9ca3af'], // Lighter colors for dark mode
        grid: {
          borderColor: '#44403c'
        },
        xaxis: {
          labels: {
            style: {
              colors: '#a3a3a3'
            }
          }
        },
        yaxis: {
          labels: {
            style: {
              colors: '#a3a3a3'
            }
          }
        }
      })
    })();
  });
</script>