<div x-data>
  <div
    x-cloak
    x-show="$store.destination.openAddModal"
    class="fixed inset-0 z-[80] flex items-center justify-center bg-black/40"
  >
    <div
      @click.outside="$store.destination.openAddModal = false"
      class="w-full max-w-xl mx-3 bg-white rounded-xl shadow-xl dark:bg-neutral-800"
    >
      <div class="py-2.5 px-4 flex justify-between items-center border-b dark:border-neutral-700">
        <h3 class="font-medium text-gray-800 dark:text-neutral-200">Add Destination</h3>
        <button @click="$store.destination.openAddModal = false">âœ•</button>
      </div>

      <div class="p-4 space-y-5">

        <div class="space-y-2">
          <label class="block text-sm text-gray-800 dark:text-neutral-200">
            Course
          </label>
          <select
            x-model="selectedCourseIndex"
            @change="loadChapters"
            class="w-full py-2 px-3 border rounded-lg text-sm dark:bg-neutral-900"
          >
            <option value="">Select course</option>
            <template x-for="(course, index) in courses" :key="course.id">
              <option :value="index" x-text="course.course"></option>
            </template>
          </select>
        </div>

        <div class="space-y-2">
          <label class="block text-sm text-gray-800 dark:text-neutral-200">
            Chapters
          </label>
          <div class="space-y-2 max-h-40 overflow-y-auto border rounded-lg p-2">
            <template x-for="chapter in chapters" :key="chapter">
              <label class="flex items-center gap-2 text-sm">
                <input type="checkbox" :value="chapter" x-model="selectedChapters">
                <span x-text="chapter"></span>
              </label>
            </template>

            <p x-show="chapters.length === 0" class="text-xs text-gray-400">
              Select a course first
            </p>
          </div>
        </div>

      </div>

      <div class="p-4 flex justify-end gap-2 border-t dark:border-neutral-700">
        <button
          @click="$store.destination.openAddModal = false"
          type="button"
          class="py-2 px-3 text-sm border rounded-lg"
        >
          Cancel
        </button>

        <button
          @click="saveDestination"
          type="button"
          class="py-2 px-3 text-sm bg-emerald-600 text-white rounded-lg"
        >
          Add
        </button>
      </div>

    </div>
  </div>

</div>
