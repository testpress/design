<header class="px-3 lg:px-0">
  <div class="flex justify-between items-center">
    <h1 class="text-xl font-semibold text-gray-900" >
      Reported Questions
    </h1>
    <div>
      <button x-show="!search_value" @click="showFilterReport=!showFilterReport" type="button" class=" hidden md:flex md:space-x-6 group flex items-center font-medium text-gray-700" aria-controls="disclosure-1" aria-expanded="false">
        <svg class="mr-2 h-5 w-5 flex-none text-gray-400 group-hover:text-gray-500" aria-hidden="true" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M2.628 1.601C5.028 1.206 7.49 1 10 1s4.973.206 7.372.601a.75.75 0 01.628.74v2.288a2.25 2.25 0 01-.659 1.59l-4.682 4.683a2.25 2.25 0 00-.659 1.59v3.037c0 .684-.31 1.33-.844 1.757l-1.937 1.55A.75.75 0 018 18.25v-5.757a2.25 2.25 0 00-.659-1.591L2.659 6.22A2.25 2.25 0 012 4.629V2.34a.75.75 0 01.628-.74z" clip-rule="evenodd" />
        </svg>
        Filter 
      </button>
      <button x-show="search_value" type="button" class=" hidden md:flex group flex items-center font-medium text-gray-700" aria-controls="disclosure-1" aria-expanded="false">
        <a href="/questions/reports/list/">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2 text-gray-400 group-hover:text-gray-700" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
      </a>        
        <span x-text="'Filtered by ' + search_value"></span>
      </button>
      <div class="relative inline-block text-left md:hidden" x-data="{mobileDropDown:false}">
        <div>
          <button @click="mobileDropDown=!mobileDropDown" @click.away="mobileDropDown=false" type="button" class="-mx-2 flex items-center rounded-full border border-transparent p-2 text-gray-400 hover:text-gray-500" id="menu-0-button" aria-expanded="false" aria-haspopup="true">
            <span class="sr-only">Open menu</span>
            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path d="M3 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM15.5 8.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z" />
            </svg>
          </button>
        </div>
      
        <!--
          Dropdown menu, show/hide based on menu state.
      
          Entering: "transition ease-out duration-100"
            From: "transform opacity-0 scale-95"
            To: "transform opacity-100 scale-100"
          Leaving: "transition ease-in duration-75"
            From: "transform opacity-100 scale-100"
            To: "transform opacity-0 scale-95"
        -->
        <div x-show="mobileDropDown" class="absolute right-0 z-10 mt-2 w-32 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1">
          <div class="py-1" role="none">
            <!-- Active: "bg-gray-100 text-gray-900", Not Active: "text-gray-700" -->
            <button x-show ="!search_value" @click="showFilterReport=!showFilterReport" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-0">Filter Report</button>
            <a href="/questions/reports/list/">
            <button x-show="search_value" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-0">Remove filter</button>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
<section x-show="showFilterReport" aria-labelledby="filter-heading" class="grid items-center border-b border-t border-gray-200 mt-5 bg-white sm:rounded-lg" x-data="{showExamFilter:false,showChapterFilter:false,showSubjectFilter:false}">
  <h2 id="filter-heading" class="sr-only">Filters</h2>
  <div class="relative col-start-1 row-start-1 py-4">
    <div class="mx-auto flex max-w-7xl space-x-6 divide-x divide-gray-200 px-4 text-sm sm:px-6 lg:px-8">
      <div class="">
        <div class="mx-auto max-w-7xl sm:flex sm:items-center">
          <h3 class="text-sm font-medium text-gray-500">
            Filters
            <span class="sr-only">, active</span>
          </h3>
    
          <div aria-hidden="true" class="hidden h-5 w-px bg-gray-300 sm:ml-4 sm:block"></div>
    
          <div class="mt-2 sm:ml-4 sm:mt-0">
            <div class="-m-1 flex flex-wrap items-center gap-1">
              <template hidden x-for="filter in selected_filters">
              <span class="inline-flex items-center py-0.5 pl-2 pr-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700">
                <span x-text="filter.name || filter.title"></span>
                <button @click="removeSelectedFilter(filter)" type="button" class="flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-green-400 hover:bg-green-200 hover:text-green-500 focus:outline-none focus:bg-green-500 focus:text-white">
                    <span class="sr-only">Remove small option</span>
                    <svg class="h-2 w-2" stroke="currentColor" fill="none" viewBox="0 0 8 8">
                        <path stroke-linecap="round" stroke-width="1.5" d="M1 1l6 6m0-6L1 7"></path>
                    </svg>
                </button>
              </span>
            </template>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="border-t border-gray-200 py-5" id="disclosure-1">
    <div class="mx-auto grid max-w-7xl grid-cols-1 gap-x-4 px-4 text-sm sm:px-6 md:gap-x-6 lg:px-8">
      <div class="grid auto-rows-min grid-cols-1 gap-y-10 lg:grid-cols-3 md:grid-cols-2 md:gap-x-6">
        <fieldset>
          <div class="col-span-1 sm:col-span-2 relative">
            <input @click="showExamFilter=true,showChapterFilter=false,showSubjectFilter=false" @click.away="showExamFilter=false" placeholder="Search for exam"
              
              class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
              maxlength="30" name="app_name" type="text" value="">
            <div class="mt-1 text-sm text-red-500"></div>
            <ul x-show="showExamFilter"
              class="absolute z-10 shadow-md rounded-lg ring-1 ring-black ring-opacity-5 bg-white w-full max-h-52 overflow-auto text-sm"
              tabindex="-1" role="listbox" aria-labelledby="listbox-label" aria-activedescendant="listbox-option-3"
              >
              <template hidden x-for="exam in exams">
              <li @click='addToSelectedFilter(exam,"exam")'
                class="rounded cursor-pointer hover:bg-gray-100 text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9"
                id="listbox-option-0" role="option">
                <div class="flex items-center">
                  <span class="ml-3 block truncate" x-text="exam.name"></span>
                </div>
              </li>
            </template>
            </ul>
          </div>
        </fieldset>
        <fieldset>
          <div class="col-span-1 sm:col-span-2 relative">
            <input  @click="showExamFilter=false,showChapterFilter=false,showSubjectFilter=true" @click.away="showSubjectFilter=false" placeholder="Search for subject"
              
              class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
              maxlength="30" name="app_name" type="text" value="">
            <div class="mt-1 text-sm text-red-500"></div>
            <ul x-show="showSubjectFilter"
              class="absolute z-10 shadow-md rounded-lg ring-1 ring-black ring-opacity-5 bg-white w-full max-h-52 overflow-auto text-sm"
              tabindex="-1" role="listbox" aria-labelledby="listbox-label" aria-activedescendant="listbox-option-3"
              >
              <template hidden x-for="subject in subjects">
              <li @click='addToSelectedFilter(subject,"subject")'
                class="rounded cursor-pointer hover:bg-gray-100 text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9"
                id="listbox-option-0" role="option">
                <div class="flex items-center">
                  <span class="ml-3 block truncate" x-text="subject.name"></span>
                </div>
              </li>
            </template>
            </ul>
          </div>
        </fieldset>
        <fieldset>
          <div class="col-span-1 sm:col-span-2 relative">
            <input  @click="showExamFilter=false,showChapterFilter=true,showSubjectFilter=false" @click.away="showChapterFilter=false" placeholder="Search for chapter"
              
              class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
              maxlength="30" name="app_name" type="text" value="">
            <div class="mt-1 text-sm text-red-500"></div>
            <ul x-show="showChapterFilter"
              class="absolute z-10 shadow-md rounded-lg ring-1 ring-black ring-opacity-5 bg-white w-full max-h-52 overflow-auto text-sm"
              tabindex="-1" role="listbox" aria-labelledby="listbox-label" aria-activedescendant="listbox-option-3"
              >
              <template hidden x-for="chapter in chapters">
              <li @click='addToSelectedFilter(chapter,"chapter")'
                class="rounded cursor-pointer hover:bg-gray-100 text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9"
                id="listbox-option-0" role="option">
                <div class="flex items-center">
                  <span class="ml-3 block truncate" x-text="chapter.title"></span>
                </div>
              </li>
            </template>
            </ul>
          </div>
        </fieldset>
      </div>
    </div>
  </div>
  <div class="col-start-1 row-start-1 py-4">
    <div class="mx-auto flex max-w-7xl justify-end px-4 sm:px-6 lg:px-8">
      <div class="relative inline-block">
        <div class="flex">
          <button type="button" class="rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">Apply Filter</button>
        </div>
      </div>
    </div>
  </div>
</section>
