<script>
  function MultiSelect() {
    return {
      items: [],
      reportees: JSON.parse('{{ reportees |dump |safe }}'),

      selectedItems: [],
      showSuggestions: false,
      multiple: true,

      onItemSelect(selectedItem) {
        if (this.selectedItems.some((item) => item.id === selectedItem.id)) {
          this.selectedItems = this.selectedItems.filter(
            (item) => item.id !== selectedItem.id
          )
        } else {
          if (!this.multiple) {
            this.selectedItems.pop()
          }
          this.selectedItems.push(selectedItem)
        }
      },

      removeItem(itemToRemove) {
        this.selectedItems = this.selectedItems.filter(
          (item) => item.id !== itemToRemove.id
        )
      },
    }
  }
</script>
