<!-- search form -->
<form class="relative flex flex-1" action="#" method="GET">
    <label for="search-field" class="sr-only">Search</label>
    <svg class="pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400" viewBox="0 0 20 20"
        fill="currentColor" aria-hidden="true">
        <path fill-rule="evenodd"
            d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z"
            clip-rule="evenodd" />
    </svg>
    <input name="q" id="search-field"
        class="block h-full w-full border-0 py-0 pl-8 pr-2 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm"
        placeholder="Search..." type="search" name="search" value="{{ request.GET.q }}">

    <select id="status-filter" name="state" onchange="this.form.submit();"
    class="block border-0 pl-0 pr-8 py-0 text-center text-gray-400 bg-white focus:ring-0 sm:text-sm appearance-none">
        <option value="">Filter by status</option>
        <option value="0">Not started</option>
        <option value="1">Transcoding</option>
        <option value="2">Completed</option>
        <option value="3">Error</option>
        <option value="4">Uploading</option>
        <option value="5">Queued</option>
        <option value="6">Input Read Error</option>
        <option value="7">Uploaded</option>
        <option value="8">Deleting</option>
    </select>
</form>

<script>
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }
    const stateValue = getQueryParam('state');
    const selectElement = document.getElementById('status-filter');
    if (stateValue) {
        selectElement.value = stateValue;
    }
</script>