<div class="mx-auto max-w-5xl p-4">
  <div class="sm:my-4 my-3 flex items-end justify-between pt-3">
    <h2 class="text-xl md:text-2xl font-semibold"> Popular Courses  </h2>
    <a href="{{ '/landing_page/products_list' |url }}" class="text-emerald-500 hover:text-emerald-700"> View all <span aria-hidden="true">&rarr;</span> </a>
  </div> 
  <div class="mt-3">
    <div x-data="getPopularProductsData()" class="relative">
      <div class="py-3">
        <ul class="grid lg:grid-cols-4 sm:grid-cols-2 gap-4">
          {% for product in products %}
          <li x-show="showSlide({{ loop.index0 }})"
              x-on:touchstart="recordTouchStart($event)"
              x-on:touchmove="recordTouchMove($event)"
              x-on:touchend="navigateOnSwipe($event)"
              class="w-full">
            <a href="#">
              <div class="bg-white rounded-md overflow-hidden shadow-md">
                <div class="aspect-w-16 aspect-h-9">
                  <div class="bg-gray-200 absolute inset-0"></div>
                  <img src="{{ product.image|url }}" alt="" class="object-cover absolute inset-0 w-full h-full">
                  <div class="absolute inset-x-0 top-0 flex h-full items-end justify-end overflow-hidden p-4">
                    <div aria-hidden="true" class="absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-black opacity-20"></div>
                  </div>
                </div>
                <div class="p-4">
                  <h3 class="font-semibold line-clamp-2 text-gray-900 h-12">{{ product.name }}</h3>
                  <div class="flex space-x-2 items-center text-sm text-gray-500 mt-1">
                    <div>{{ product.chapters }} chapters</div>
                    <div>Â·</div>
                    <div>{{ product.contents }} contents</div>
                  </div>
                  <div class="flex items-center space-x-2 mt-2">
                    <div class="font-semibold">{{ product.price }}</div>
                    <div class="text-sm text-gray-500 line-through">{{ product.anchor_price }}</div>
                  </div>
                </div>
              </div>
            </a>              
          </li>
          {% endfor %}
        </ul>
        <button @click="showPreviousProduct()" class="absolute bg-white top-1/4 flex items-center justify-center p-2 -left-4 rounded-full shadow-md text-xl w-9 z-10" x-show="activeSlide > 0">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
          </svg>
        </button>
        <button @click="showNextProduct()" class="absolute bg-white top-1/4 flex items-center justify-center p-2 -right-4 rounded-full shadow-md text-xl w-9 z-10" x-show="activeSlide + visibleSlides < totalSlides">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>