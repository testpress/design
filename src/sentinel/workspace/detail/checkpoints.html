<!-- Card -->
<div
  class="flex flex-col bg-white border border-gray-200 shadow-xs rounded-xl overflow-hidden dark:bg-neutral-800 dark:border-neutral-700">
  <!-- Header -->
  <div
    class="py-3 px-5 flex flex-wrap justify-between items-center gap-2 border-b border-gray-200 dark:border-neutral-700">
    <div class="flex flex-wrap items-center gap-2">
      <h2 class="font-medium text-gray-800 dark:text-neutral-200">
        Checkpoints
      </h2>
    </div>

    <div class="flex flex-wrap items-center gap-2">
      <button type="button"
        class="py-1.5 sm:py-2 px-2.5 inline-flex items-center gap-x-1.5 text-sm sm:text-xs font-medium rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-2 focus:ring-blue-500"
        data-hs-overlay="#hs-pro-dasadpm" aria-expanded="false">
        <svg class="hidden sm:block shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
          viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round">
          <path d="M5 12h14"></path>
          <path d="M12 5v14"></path>
        </svg>
        Add checkpoint
      </button>
    </div>
  </div>

  <div
    class="overflow-x-auto [&::-webkit-scrollbar]:h-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500">
    <div class="min-w-full inline-block align-middle">
      <!-- Table -->
      <table class="min-w-full divide-y divide-gray-200 dark:divide-neutral-700">
        <thead>
          <tr>
            <th scope="col">
              <div class="px-5 py-2 text-start">
                <span class="font-medium text-xs whitespace-nowrap uppercase text-gray-800 dark:text-neutral-200">
                  Activity Name
                </span>
              </div>
            </th>

            <th scope="col">
              <div class="px-5 py-2 text-start">
                <span class="font-medium text-xs whitespace-nowrap uppercase text-gray-800 dark:text-neutral-200">
                  Recording Duration
                </span>
              </div>
            </th>

            <th scope="col" class="min-w-72">
              <div class="px-5 py-2 text-start">
                <span class="font-medium text-xs whitespace-nowrap uppercase text-gray-800 dark:text-neutral-200">
                  Tracking Policies
                </span>
              </div>
            </th>

            <th scope="col">
              <div class="px-5 py-2 text-start">
                <span class="font-medium text-xs whitespace-nowrap uppercase text-gray-800 dark:text-neutral-200">
                  Snap Shots
                </span>
              </div>
            </th>

            <th scope="col">
              <div class="px-5 py-2 text-start">
                <span class="font-medium text-xs whitespace-nowrap uppercase text-gray-800 dark:text-neutral-200">
                  Anomalies
                </span>
              </div>
            </th>
            <th scope="col" class="min-w-14">
                      </th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-200 dark:divide-neutral-700">
          {% for checkpoint in checkpoints %}
          <tr>
            <td class="size-px px-5 py-3 whitespace-nowrap text-center">
              <span class="flex items-center gap-x-2">
                <span class="text-sm text-gray-600 dark:text-neutral-400">
                  {{ checkpoint.activityName }}
                </span>
                {% if checkpoint.required %}
                <svg class="inline w-3 h-3 text-red-500 ml-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                  fill="currentColor">
                  <path
                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.974a1 1 0 00.95.69h4.18c.969 0 1.372 1.24.588 1.81l-3.388 2.463a1 1 0 00-.364 1.118l1.287 3.974c.3.921-.755 1.688-1.54 1.118L10 14.347l-3.95 2.727c-.785.57-1.84-.197-1.54-1.118l1.287-3.974a1 1 0 00-.364-1.118L2.045 9.401c-.784-.57-.38-1.81.588-1.81h4.18a1 1 0 00.95-.69l1.286-3.974z" />
                </svg>
                {% endif %}
              </span>
            </td>
            <td class="size-px whitespace-nowrap px-5 py-1">
              <span class="text-sm text-gray-600 dark:text-neutral-400">
                {{ checkpoint.recordingDuration }}
              </span>
            </td>
            <td class="size-px whitespace-nowrap px-4 py-3">
              {% for policy in checkpoint.trackingPolicy.slice(0, 1) %}
              <span
                class="mr-2 p-2 bg-stone-100 text-stone-800 text-xs rounded-md dark:bg-neutral-700 dark:text-neutral-200 truncate max-w-52">
                {{ policy }}
              </span>
              {% endfor %}
              {% if checkpoint.trackingPolicy.length > 1 %}
              <div class="relative inline-block text-left mt-1" x-data="{showMore:false}" @click.away="showMore=false"
                @keydown.window.escape="showMore=false">
                <span @click="showMore=!showMore"
                  class="cursor-pointer font-medium p-2 text-stone-800 text-xs rounded-md dark:text-neutral-200">
                  +{{ checkpoint.trackingPolicy.length - 1 }} more
                </span>
                <!-- Smart positioning: shows above if near bottom, below if near top -->
                <div x-show="showMore" x-anchor.bottom-start="$refs.trigger"
                  class="absolute z-[999] w-64 mt-1 origin-top-left divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none dark:bg-neutral-800 dark:divide-neutral-700 dark:ring-neutral-600"
                  :class="$el.getBoundingClientRect().bottom + 200 > window.innerHeight ? 'bottom-full mb-1 origin-bottom-left' : 'top-full mt-1 origin-top-left'"
                  role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"
                  x-transition:enter="transition ease-out duration-100"
                  x-transition:enter-start="transform opacity-0 scale-95"
                  x-transition:enter-end="transform opacity-100 scale-100"
                  x-transition:leave="transition ease-in duration-75"
                  x-transition:leave-start="transform opacity-100 scale-100"
                  x-transition:leave-end="transform opacity-0 scale-95">
                  <ul class="py-3 px-4 space-y-2 list-disc list-inside text-sm text-gray-800 dark:text-neutral-200">
                    {% for policy in checkpoint.trackingPolicy.slice(1) %}
                    <li>
                      {{ policy }}
                    </li>
                    {% endfor %}
                  </ul>
                </div>
                {% endif %}
            </td>
            <td class="size-px whitespace-nowrap px-5 py-1">
              <span class="text-sm text-gray-600 dark:text-neutral-400">
                {{ checkpoint.total_snap_shots }}
              </span>
            </td>
            <td class="size-px px-5 py-1">
              <span class="text-sm text-gray-600 dark:text-neutral-400">
                {{ checkpoint.total_anomalies }}
              </span>
            </td>
            <td class="size-px whitespace-nowrap py-3">
                        <a class="inline-flex items-center gap-x-0.5 text-[13px] text-blue-700 underline underline-offset-2 hover:decoration-2 focus:outline-hidden focus:decoration-2 disabled:opacity-50 disabled:pointer-events-none dark:text-blue-400" href="#" target="_parent">
                          Details
                          <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg>
                        </a>
                      </td>
          </tr>
          
          {% endfor %}
        </tbody>
      </table>
      <!-- End Table -->
    </div>
  </div>
  <!-- End Table Section -->

  <!-- Footer -->
  <div class="py-3 px-5 border-t border-gray-200 dark:border-neutral-800">
    <!-- Footer -->
    <div class="grid grid-cols-2 items-center gap-y-2 sm:gap-y-0 sm:gap-x-5">
      <p class="text-sm text-gray-800 dark:text-neutral-200">
        <span class="font-medium">20</span>
        <span class="text-gray-500 dark:text-neutral-500">results</span>
      </p>

      <!-- Pagination -->
      <nav class="flex justify-end items-center gap-x-1" aria-label="Pagination">
        <button type="button"
          class="min-h-9.5 min-w-9.5 py-2 px-2.5 inline-flex justify-center items-center gap-x-2 text-sm rounded-lg text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-gray-100 dark:text-white dark:hover:bg-white/10 dark:focus:bg-neutral-700"
          aria-label="Previous">
          <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6" />
          </svg>
          <span class="sr-only">Previous</span>
        </button>
        <div class="flex items-center gap-x-1">
          <span
            class="min-h-9.5 min-w-9.5 flex justify-center items-center bg-gray-100 text-gray-800 py-2 px-3 text-sm rounded-lg disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-700 dark:text-white"
            aria-current="page">1</span>
          <span
            class="min-h-9.5 flex justify-center items-center text-gray-500 py-2 px-1.5 text-sm dark:text-neutral-500">of</span>
          <span
            class="min-h-9.5 flex justify-center items-center text-gray-500 py-2 px-1.5 text-sm dark:text-neutral-500">3</span>
        </div>
        <button type="button"
          class="min-h-9.5 min-w-9.5 py-2 px-2.5 inline-flex justify-center items-center gap-x-2 text-sm rounded-lg text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-gray-100 dark:text-white dark:hover:bg-white/10 dark:focus:bg-neutral-700"
          aria-label="Next">
          <span class="sr-only">Next</span>
          <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m9 18 6-6-6-6" />
          </svg>
        </button>
      </nav>
      <!-- End Pagination -->
    </div>
    <!-- End Footer -->
  </div>
  <!-- End Footer -->
</div>
<!-- End Card -->