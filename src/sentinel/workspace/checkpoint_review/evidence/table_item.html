{% for log in anomaly_log %}
<tr>
  <td class="size-px whitespace-nowrap py-3 px-5">
    <span class="text-sm text-stone-600 dark:text-neutral-400">
        {{ log.timestamp }}
    </span>
  </td>

  <td class="size-px whitespace-nowrap py-3 px-5">
    <span class="text-sm text-stone-600 dark:text-neutral-400">
        {{ log.type }}
    </span>
  </td>
<td class="size-px whitespace-nowrap px-4 py-1">
  {% if log.severity == "High" %}
    <span class="py-1.5 ps-2.5 pe-2.5 inline-flex items-center gap-x-1.5 text-xs font-medium bg-red-100 text-red-800 rounded-full dark:bg-red-500/10 dark:text-red-500">
      {{ log.severity }}
    </span>
  {% elif log.severity == "Medium" %}
    <span class="py-1.5 ps-2.5 pe-2.5 inline-flex items-center gap-x-1.5 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full dark:bg-yellow-500/10 dark:text-yellow-500">
      {{ log.severity }}
    </span>
  {% elif log.severity == "Low" %}
    <span class="py-1.5 ps-2.5 pe-2.5 inline-flex items-center gap-x-1.5 text-xs font-medium bg-green-100 text-green-800 rounded-full dark:bg-green-500/10 dark:text-green-500">
      {{ log.severity }}
    </span>
  {% else %}
    <span class="py-1.5 ps-2.5 pe-2.5 inline-flex items-center gap-x-1.5 text-xs font-medium bg-gray-100 text-gray-800 rounded-full dark:bg-gray-500/10 dark:text-gray-500">
      {{ log.severity }}
    </span>
  {% endif %}
</td>

<td class="size-px whitespace-nowrap py-3">
  <a href="{{ log.clip_url }}" 
     class="inline-flex items-center gap-x-0.5 text-[13px] text-blue-500 font-medium underline underline-offset-2 hover:decoration-2 focus:outline-hidden focus:decoration-2 disabled:opacity-50 disabled:pointer-events-none dark:text-blue-400"
     onclick="openClipWindow('{{ log.clip_url }}'); return false;">
    Play Clip
  </a>
</td>
</tr>
{% endfor %}

<script>
function openClipWindow(url) {
  // Define window size
  const width = 800;
  const height = 450;

  // Calculate center position
  const left = (window.screen.width / 2) - (width / 2);
  const top = (window.screen.height / 2) - (height / 2);

  // Open popup window
  window.open(
    url,
    "ProctoringClip",
    `width=${width},height=${height},top=${top},left=${left},resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,status=no`
  );
}
</script>