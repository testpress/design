<!-- Chat Container -->
<div x-show="activeTab === 'chat'" role="tabpanel" class="w-full xl:h-full flex flex-col overflow-hidden">
  {% include "../includes/nav_tabs.html" %}
  <!-- Chat Messages -->
  <div class="flex-1 p-2 pb-8 sm:p-4 overflow-y-auto overflow-x-hidden">
    <div x-show="!emptyChat" class="space-y-2">
      {% for message in learnlens_chat_responses %}
      <div class="text-start rounded-xl pt-2 pb-1.5 px-2.5 w-fit bg-emerald-100 dark:bg-emerald-500/20 ml-auto">
        <div class="text-sm text-gray-800 dark:text-neutral-200">
          {{ message.query }}
        </div>
      </div>

      <div class="text-start rounded-xl pt-2 pb-1.5 px-2.5 w-fit">
        <div class="text-sm text-gray-800 dark:text-neutral-200">
          {{ message.response }}
          <span class="inline-flex gap-1 ml-1 align-middle">
            {% for citation in message.citations %}
            <svg class="shrink-0 size-3 inline-block ml-0.5 cursor-pointer text-emerald-600 dark:text-emerald-500"
              xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
              stroke="currentColor">
              <title>{{ citation.source }} - Page {{ citation.pageIndex }}</title>
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757 m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244" />
            </svg>
            {% endfor %}
          </span>
        </div>
      </div>
      <div class="mt-1 flex items-center gap-x-1">
        <div class="group relative inline-block">
          <button type="button"
            class="flex justify-center items-center gap-x-3 size-7 text-sm text-gray-600 hover:bg-gray-200 rounded-md dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
            <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
              <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
            </svg>
            <span class="sr-only">Copy text</span>
          </button>
        </div>
      </div>
      {% endfor %}
    </div>
    <!-- Empty Chat Message -->
    <div x-show="emptyChat" class="flex items-center justify-center h-full">
      <div class="text-center">
        <h3 class="text-lg font-medium text-gray-800 dark:text-neutral-200">Learn the PDF with AI Tutor</h3>
        <p class="mt-2 text-sm text-gray-600 dark:text-neutral-400">Ask questions and get instant, intelligent insights,
          cited and highlighted.</p>
      </div>
    </div>
  </div>
  <!-- Chat Input -->
  <div class="w-full z-10 p-3 dark:bg-neutral-900 p-3  border-gray-200 dark:border-neutral-700">
    <div class="relative border-gray-200 dark:border-neutral-700 border rounded-lg">
      <textarea
        class="bg-white border-0 rounded-t-lg block dark:bg-neutral-800 dark:focus:ring-neutral-600 dark:placeholder-neutral-500 dark:text-neutral-400 leading-4 resize-none focus:outline-hidden focus:border-transparent focus:ring-0 p-3 sm:p-4 sm:text-sm w-full"
        placeholder="Ask me anything..."></textarea>
      <div class="bg-white dark:bg-neutral-800 p-2 rounded-b-lg">
        <div class="flex flex-wrap justify-between items-center gap-2">
          <div class="flex items-center">
            <button type="button"
              class="inline-flex shrink-0 justify-center items-center size-8 rounded-lg text-gray-500 hover:bg-white dark:text-neutral-500 dark:hover:bg-neutral-700">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path
                  d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48" />
              </svg>
            </button>
          </div>
          <div class="flex items-center gap-x-1">
            <button type="button"
              class="inline-flex shrink-0 justify-center items-center size-8 rounded-lg text-gray-500 hover:bg-white dark:text-neutral-500 dark:hover:bg-neutral-700">
              <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" />
                <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                <line x1="12" x2="12" y1="19" y2="22" />
              </svg>
            </button>
            <button type="button"
              class="inline-flex shrink-0 justify-center items-center size-8 rounded-lg text-white bg-emerald-600 hover:bg-emerald-500">
              <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
                <path
                  d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855l-.452.18a.5.5 0 0 0-.082.887l.41.26 4.995 3.178 3.178 4.995.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Quiz Container -->
<div x-show="activeTab === 'quiz'" role="tabpanel" class="w-full xl:h-full flex flex-col overflow-hidden">
  {% include "../includes/nav_tabs.html" %}
  <div class="flex-1 p-2 pb-8 sm:p-4 overflow-y-auto overflow-x-hidden">
    <div class="flex items-center justify-center h-full">
      <div class="text-center">
        <h3 class="text-lg font-medium text-gray-800 dark:text-neutral-200">AI-Powered Quiz Coming Soon</h3>
        <p class="mt-2 text-sm text-gray-600 dark:text-neutral-400">We're building smart quizzes from your PDF content
          to help you test and reinforce your learning.</p>
      </div>
    </div>
  </div>
</div>
</div>