
<span class="isolate inline-flex rounded-md shadow-sm mt-2">
    <button @click="filter_by = 'today'" :class="{ 'bg-gray-50': filter_by === 'today' }" type="button" class="relative inline-flex items-center rounded-l-md  px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10 focus:bg-gray-50">Today</button>
    <button @click="filter_by = 'week'" :class="{ 'bg-gray-50': filter_by === 'week' }" type="button" class="relative -ml-px inline-flex items-center  px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10 focus:bg-gray-50">Week</button>
    <button @click="filter_by = 'month'" :class="{ 'bg-gray-50': filter_by === 'month' }" type="button" class="relative -ml-px inline-flex items-center px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10 focus:bg-gray-50">Month</button>
    <button @click="filter_by = 'year'" :class="{ 'bg-gray-50': filter_by === 'year' }" type="button" class="relative -ml-px inline-flex items-center rounded-r-md  px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10 focus:bg-gray-50">Year</button>
</span>

<p class="mt-4" x-text="'Total Emails sent ' + (filter_by === 'today' ? 'today' : filter_by === 'week' ? 'this week' : filter_by === 'month' ? 'this month' : 'this year') + ' : ' + total_emails_sent(filter_by)"></p>

<script>
    function total_emails_sent(filter_by) {
        let email_logs = JSON.parse('{{ email_logs |dump |safe }}')
        switch (filter_by) {
            case 'today':
                return email_logs.reduce((sum, log) => sum + log.total_emails_sent_today, 0);
            case 'week':
                return email_logs.reduce((sum, log) => sum + log.total_emails_sent_this_week, 0);
            case 'month':
                return email_logs.reduce((sum, log) => sum + log.total_emails_sent_this_month, 0);
            case 'year':
                return email_logs.reduce((sum, log) => sum + log.total_emails_sent_this_year, 0);
            default:
                return 0;
        }
    }
</script>
