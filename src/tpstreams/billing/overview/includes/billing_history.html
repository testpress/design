<div class="mt-8 mb-4 flex items-center justify-between">
    <h1 class="text-lg font-medium leading-6 text-gray-900">
      Billing History
    </h1>
    <a href="{{ '/tpstreams/billing/billing_history/'|url }}" class="text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300">
      View all
      <svg class="inline-block ml-1 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 7h10v10"/><path d="M7 17 17 7"/></svg>
    </a>
</div>
<!-- Table Section -->
<div class="overflow-x-auto mt-6 [&::-webkit-scrollbar]:h-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300">
    <div class="min-w-full inline-block align-middle">
      <!-- Table -->
      <table class="min-w-full divide-y divide-gray-200">
        {% include "../../billing_history/includes/table_header.html" %}
        <tbody class="divide-y divide-gray-200">
            {% for billing in billing_history %}
            {% if loop.index0 >= 1 and loop.index0 <= 3 %}
            <tr>
              <td class="size-px whitespace-nowrap pe-4 py-3">
                <span class="text-sm text-gray-600">
                  {{ billing.date }}
                </span>
              </td>
              <td class="size-px whitespace-nowrap px-4 py-3">
                <span class="text-sm text-gray-600">
                  {{ billing.description }}
                </span>
              </td>
              <td class="size-px whitespace-nowrap px-4 py-3">
                <span class="text-sm text-gray-600">
                  {{ billing.amount }}
                </span>
              </td>
              <td class="size-px whitespace-nowrap px-4 py-3">
                {% if billing.status == 'Paid' %}
                <span class="py-1.5 ps-1.5 pe-2.5 inline-flex items-center gap-x-1.5 text-xs font-medium bg-teal-100 text-teal-800 rounded-full dark:bg-teal-500/10 dark:text-teal-500">
                  <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Paid
                </span>
                {% elif billing.status == 'Failed' %}
                <span class="py-1.5 ps-1.5 pe-2.5 inline-flex items-center gap-x-1.5 text-xs font-medium bg-red-100 text-red-800 rounded-full dark:bg-red-500/10 dark:text-red-500">
                  <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>
                  Failed
                </span>
                {% elif billing.status == 'Pending' %}
                <span class="py-1.5 ps-1.5 pe-2.5 inline-flex items-center gap-x-1.5 text-xs font-medium bg-stone-100 text-stone-800 rounded-full dark:bg-neutral-500/20 dark:text-neutral-500">
                  <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                  Pending
                </span>
                {% else %}
                <span class="inline-flex items-center gap-x-1.5 py-1 px-2 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                  {{ billing.status }}
                </span>
                {% endif %}
              </td>
              <td class="size-px whitespace-nowrap px-4 py-3">
                <div class="flex gap-x-2">
                  {% if billing.viewUrl %}
                  <a href="{{ billing.viewUrl }}" target="_blank" rel="noopener noreferrer" class="py-2 px-2.5 inline-flex items-center gap-x-1.5 text-xs font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-gray-50">
                    View
                  </a>
                  {% endif %}
                  {% if billing.downloadUrl and not billing.isReceipt %}
                  <a href="{{ billing.downloadUrl }}" target="_blank" rel="noopener noreferrer" class="size-9 inline-flex justify-center items-center gap-x-2 rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-gray-50" title="Download PDF">
                    <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                  </a>
                  {% endif %}
                </div>
              </td>
            </tr>
            {% endif %}
            {% endfor %}
          </tbody>
      </table>
      <!-- End Table -->
    </div>
  </div>
  <!-- End Table Section -->