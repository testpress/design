<script>
function progressBarComponent(percentage) {
  return {
    percentage: percentage,
    
    get segments() {
      const zones = [
        { max: 25, color: 'bg-green-500' },
        { max: 50, color: 'bg-yellow-400' },
        { max: 75, color: 'bg-orange-500' },
        { max: 100, color: 'bg-red-600' }
      ];
      
      const clamped = Math.min(Math.max(this.percentage, 0), 100);
      const segments = [];
      let remaining = clamped;
      let previousThreshold = 0;
      
      for (let i = 0; i < zones.length && remaining > 0; i++) {
        const zoneMax = zones[i].max;
        const zoneSize = zoneMax - previousThreshold;
        const segmentWidth = Math.min(remaining, zoneSize);
        
        if (segmentWidth > 0) {
          segments.push({
            width: segmentWidth,
            color: zones[i].color
          });
          remaining -= segmentWidth;
        }
        
        previousThreshold = zoneMax;
      }
      
      return segments;
    }
  }
}
</script>

