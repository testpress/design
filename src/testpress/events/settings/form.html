<form action="#" method="POST" x-data="{ notificationPreference: 'all-critical-events' }">
  <div class="py-6 px-8">
    <fieldset>
      <legend class="text-base/6 font-semibold text-gray-900">What needs to be notified?</legend>
      <div class="mt-4 space-y-4">
        <div class="flex items-start">
          <div class="flex h-6 items-center">
            <input id="all-critical-issues" name="notification-preference" type="radio" value="all-critical-events" x-model="notificationPreference" class="size-4 border-gray-300 text-emerald-600 focus:ring-emerald-500" checked>
          </div>
          <div class="ml-3 text-sm/6 relative ">
            <label for="all-critical-issues" class="font-medium text-gray-900">
              All Critical Events
              <span class="inline-block align-middle relative group cursor-help">
                <svg class="shrink-0 size-4 text-gray-500 dark:text-neutral-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="M12 16v-4"></path>
                  <path d="M12 8h.01"></path>
                </svg>
                <div class="w-52 sm:w-96 p-4 left-full top-1/2 ml-2 transform sm:-translate-y-1/2 group-hover:opacity-100 group-hover:visible  opacity-0 invisible transition-opacity absolute  z-10 max-w-xs bg-white border border-gray-100 text-start rounded-xl shadow-md after:absolute after:top-0 after:-start-4 after:w-4 after:h-full" role="tooltip">
                  <p class="text-sm text-gray-700">
                    Critical events include <strong class="font-semibold text-gray-900">failed logins</strong>, <strong class="font-semibold text-gray-900">admin logins</strong>, <strong class="font-semibold text-gray-900">data exports</strong>, and <strong class="font-semibold text-gray-900">new super admins</strong>.
                    These actions require immediate attention to ensure system security.
                </div>
              </span>
            </label>
            <p class="text-gray-500">Stay informed on high-priority issues, like security breaches or failed logins.</p>
          </div>
        </div>
        <div>
          <div class="flex items-start">
            <div class="flex h-6 items-center">
              <input id="only-selected-events" name="notification-preference" type="radio" value="only-selected-events" x-model="notificationPreference" class="size-4 border-gray-300 text-emerald-600 focus:ring-emerald-500">
            </div>
            <div class="ml-3 text-sm/6">
              <label for="only-selected-events" class="font-medium text-gray-900">Only Selected Events</label>
              <p class="text-gray-500">Choose specific events that matter to you, such as course deletions or user sign-ups.</p>
            </div>
          </div>
        </div>
      </div>
    </fieldset>
    <div x-show="notificationPreference === 'only-selected-events'" class="px-4 py-6 sm:p-6">
      <div class="grid lg:grid-cols-2 gap-3 lg:gap-5">
        <!-- Checkbox -->
        {% for event_key, event_data in event_registry %}
          <label for="event-{{ event_key }}" class="py-3 px-4 flex text-sm bg-white text-gray-800 rounded-xl cursor-pointer rounded-xl ring-1 ring-gray-200 has-[:checked]:ring-2 has-[:checked]:ring-emerald-600 dark:bg-neutral-800 dark:text-neutral-200 dark:ring-neutral-700 dark:has-[:checked]:ring-emerald-500">
            <input type="checkbox" id="event-{{ event_key }}" class="bg-transparent border-gray-200 text-emerald-600 rounded-full focus:ring-white focus:ring-offset-0 dark:text-emerald-500 dark:border-neutral-700 dark:focus:ring-neutral-800">
            <span class="grow px-4">
              <span class="block font-medium">
                {{ event_data.name }}
              </span>
              <span class="block text-sm leading-6 text-gray-500 dark:text-neutral-500">
                {{ event_data.description }}
              </span>
            </span>
          </label>
        {% endfor %}
        <!-- End Checkbox -->
      </div>
    </div>
  </div>
  <div class="bg-gray-50 px-4 py-3 text-right sm:px-6">
    <button type="submit" class="inline-flex justify-center rounded-md bg-emerald-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600">Save</button>
  </div>
</form>