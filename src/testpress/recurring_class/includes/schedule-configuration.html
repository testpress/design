<!-- SECTION 2 - Schedule Configuration -->
<div class="bg-white shadow-sm border border-gray-200 rounded-lg">
  <div class="py-3 px-5 flex justify-between items-center gap-x-5 border-b border-gray-200">
    <h2 class="text-lg font-medium text-gray-900">Recurrence Schedule</h2>
  </div>
  <div class="p-5 space-y-6">
    <div>
      <div class="grid grid-cols-1 sm:grid-cols-6 sm:gap-6 gap-3">
        <div class="sm:col-span-2 sm:col-start-1">
          <label for="recurrence_type" class="block text-sm font-medium leading-6 text-gray-900">Recurrence</label>
          <div class="mt-2">
            <select id="recurrence_type" name="recurrence" x-model="recurrence"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:max-w-xs sm:text-sm sm:leading-6">
              <option value="1">Daily</option>
              <option value="2">Weekly</option>
              <option value="3">Monthly</option>
            </select>
          </div>
        </div>

        <div class="sm:col-span-2">
          <label for="repeat_interval" class="block text-sm font-medium leading-6 text-gray-900">Repeat every</label>
          <div class="mt-2 flex items-center gap-x-2">
            <select id="repeat_interval" name="repeat_interval" x-model="watermarkType"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:max-w-xs sm:text-sm sm:leading-6">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
            </select>
            <span x-text="recurrence === '1' ? 'day(s)' : recurrence === '2' ? 'week(s)' : 'month(s)'"
              class="text-sm text-gray-500 whitespace-nowrap">
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Weekly Schedule - Days of Week -->
    <div x-cloak x-show="recurrence=='2'">
      <label class="block text-sm font-medium leading-6 text-gray-900">Occurs on</label>
      <div class="flex flex-wrap gap-2 mt-2">
        <template x-for="(day, index) in [
          {id: 'day-1', value: '1', label: 'Mon'},
          {id: 'day-2', value: '2', label: 'Tue'},
          {id: 'day-3', value: '3', label: 'Wed'},
          {id: 'day-4', value: '4', label: 'Thu'},
          {id: 'day-5', value: '5', label: 'Fri'},
          {id: 'day-6', value: '6', label: 'Sat'},
          {id: 'day-0', value: '0', label: 'Sun'}
        ]" :key="day.id">
          <label :for="day.id"
            class="py-1 px-2.5 relative flex justify-center items-center text-center text-[13px] bg-white border border-gray-200 ring-1 ring-transparent text-gray-800 cursor-pointer rounded-xl hover:border-emerald-600 hover:ring-emerald-600 has-[:checked]:bg-emerald-100 has-[:checked]:border-emerald-200 has-[:checked]:ring-emerald-200 has-[:checked]:text-emerald-800 has-[:disabled]:pointer-events-none has-[:disabled]:text-gray-200">
            <input type="checkbox" :id="day.id" :value="day.value" class="hidden peer" name="days[]" />
            <span
              class="flex shrink-0 justify-center items-center size-0 bg-emerald-500 text-transparent rounded-full transition-all duration-200 peer-checked:size-4 peer-checked:me-1.5 peer-checked:text-white">
              <svg class="shrink-0 size-2.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M20 6 9 17l-5-5" />
              </svg>
            </span>
            <span class="block" x-text="day.label"></span>
          </label>
        </template>
      </div>
    </div>

    <!-- Monthly Schedule Options -->
    <div x-cloak x-show="recurrence=='3'" x-data="{monthlyOccursOn: 'day'}">
      <label class="block text-sm font-medium leading-6 text-gray-900">Occurs on</label>
      <div class="mt-2 space-y-3">
        <!-- Option 1: Day of the month -->
        <div class="flex items-center gap-x-3">
          <input id="occurs-on-day" name="occurs_on" type="radio" value="day" x-model="monthlyOccursOn" checked="true"
            class="relative size-4 appearance-none rounded-full text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
          <label for="occurs-on-day" class="block text-sm/6 font-medium text-gray-500">
            <div class="flex items-center gap-x-2">
              <span class="text-sm text-gray-500">Day</span>
              <select id="monthly_day" name="monthly_day"
                class="text-sm text-gray-500 block w-full rounded-md border-0 py-1 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:max-w-xs sm:text-sm sm:leading-6">
                <template x-for="i in Array.from({length: 31}, (_, i) => i + 1)" :key="i">
                  <option :value="i" x-text="i" :selected="i === 26"></option>
                </template>
              </select>
              <span class="text-sm text-gray-500 whitespace-nowrap">of the month</span>
            </div>
          </label>
        </div>

        <!-- Option 2: Week pattern (e.g., "Fourth Monday") -->
        <div class="flex items-center gap-x-3">
          <input id="occurs-on-week" name="occurs_on" type="radio" value="week" x-model="monthlyOccursOn"
            class="relative size-4 appearance-none rounded-full text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
          <label for="occurs-on-week" class="block text-sm/6 font-medium text-gray-500">
            <div class="flex items-center gap-x-2">
              <select id="monthly_week_occurrence" name="monthly_week_occurrence"
                class="text-sm text-gray-500 block w-full rounded-md border-0 py-1 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:max-w-xs sm:text-sm sm:leading-6">
                <option value="1">First</option>
                <option value="2">Second</option>
                <option value="3">Third</option>
                <option value="4" selected>Fourth</option>
                <option value="-1">Last</option>
              </select>
              <select id="monthly_week_day" name="monthly_week_day"
                class="text-sm text-gray-500 block w-full rounded-md border-0 py-1 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:max-w-xs sm:text-sm sm:leading-6">
                <option value="0">Sunday</option>
                <option value="1" selected>Monday</option>
                <option value="2">Tuesday</option>
                <option value="3">Wednesday</option>
                <option value="4">Thursday</option>
                <option value="5">Friday</option>
                <option value="6">Saturday</option>
              </select>
              <span class="text-sm text-gray-500 whitespace-nowrap">of the month</span>
            </div>
          </label>
        </div>
      </div>
    </div>

    <!-- End Date Options -->
    <div>
      <label class="block text-sm font-medium leading-6 text-gray-900">End Date</label>
      <div class="mt-2 space-y-3">
        <div class="flex items-center gap-x-3">
          <input id="end-no-end" name="end_condition" type="radio" value="no_end" x-model="endCondition"
            class="relative size-4 appearance-none rounded-full text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
          <label for="end-no-end" class="block text-sm/6 font-medium text-gray-500">No End Date</label>
        </div>
        <div class="flex items-center gap-x-3">
          <input id="end-by-date" name="end_condition" type="radio" value="end_by_date" x-model="endCondition"
            class="relative size-4 appearance-none rounded-full text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
          <label for="end-by-date" class="block text-sm/6 font-medium text-gray-500">
            <div class="flex items-center gap-x-2">
              <span class="text-sm text-gray-500">By</span>
              <div
                class="flex rounded-md w-28 shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-emerald-500 sm:max-w-md">
                <input type="text" name="end_by_date" id="end_date" x-ref="endByDateInput"
                  class="text-sm text-gray-500 block w-full border-0 bg-transparent p-1 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6" />
              </div>
            </div>
          </label>
        </div>
        <div class="flex items-center gap-x-3">
          <input id="end-after" name="end_condition" type="radio" value="end_after" x-model="endCondition"
            class="relative size-4 appearance-none rounded-full text-emerald-600 focus:ring-emerald-500 border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-emerald-600 checked:bg-emerald-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
          <label for="end-after" class="block text-sm/6 font-medium text-gray-500">
            <div class="flex items-center gap-x-2">
              <span class="text-sm text-gray-500">After</span>
              <select id="end_after_count" x-ref="endAfterInput" name="end_after_count"
                class="text-sm text-gray-500 block w-full rounded-md border-0 py-1 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:max-w-xs sm:text-sm sm:leading-6">
                {% for i in range(1, 60) %}
                <option value="{{i}}">{{i}}</option>
                {% endfor %}
              </select>
              <span class="text-sm text-gray-500">occurrences</span>
            </div>
          </label>
        </div>
      </div>
    </div>
  </div>
</div>