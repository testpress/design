<div data-hs-stepper-content-item='{"index": 4}' style="display: none;">
  <div class="flex items-start justify-between gap-3">
    <div>
      <h2 class="text-base/7 font-semibold text-gray-900">Review &amp; Publish</h2>
      <p class="mt-1 text-sm/6 text-gray-600">Check the structure before publishing. Totals update as you add items.</p>
    </div>

  </div>

  <div class="mt-6 space-y-4">
    <div class="bg-gray-50 rounded-xl p-4">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-semibold text-gray-900" x-text="report.title || 'Untitled report'"></p>
          <p class="text-xs text-gray-500" x-text="report.description || 'Add a description to give context to parents and students.'"></p>
        </div>
      </div>
    </div>

    <div class="space-y-3">
      <template x-for="section in sections" :key="section.id">
        <div class="rounded-xl overflow-hidden">
          <div class="px-4 py-3 bg-gray-50 flex items-center justify-between">
            <div>
              <p class="text-sm font-semibold text-gray-900" x-text="section.title || 'Untitled section'"></p>
              <p class="text-xs text-gray-500 capitalize" x-text="section.section_type"></p>
            </div>
            <div class="text-xs text-gray-500">
              <span x-text="section.groups.length + ' groups'"></span>
              <template x-if="section.show_total_score">
                <span class="ml-2 inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-1 text-emerald-700 ring-1 ring-inset ring-emerald-200">Show total</span>
              </template>
            </div>
          </div>
          <div class="divide-y divide-gray-100">
            <template x-for="group in section.groups" :key="group.id">
              <div class="px-4 py-3">
                <div class="flex items-start justify-between">
                  <div>
                    <p class="text-sm font-semibold text-gray-900" x-text="group.title || 'Untitled group'"></p>
                    <p class="text-xs text-gray-500 mt-1">
                      <span x-show="group.maximum_marks">Max: <span x-text="group.maximum_marks"></span></span>
                      <span x-show="group.minimum_marks" class="ml-2">Min: <span x-text="group.minimum_marks"></span></span>
                      <span class="ml-2" x-text="'Rounding: ' + group.rounding_precision"></span>
                    </p>
                  </div>
                  <div class="text-right text-xs text-gray-500">
                    <span x-text="(group.items?.length || 0) + ' items'"></span>
                    <div class="mt-1 flex items-center gap-2 justify-end">
                      <span x-show="group.show_average" class="inline-flex items-center px-2 py-1 rounded-full bg-blue-50 text-blue-700 ring-1 ring-blue-200">Show avg</span>
                      <span x-show="group.show_total" class="inline-flex items-center px-2 py-1 rounded-full bg-purple-50 text-purple-700 ring-1 ring-purple-200">Show total</span>
                    </div>
                  </div>
                </div>
                <div class="mt-3 grid sm:grid-cols-2 gap-2">
                  <template x-for="item in (group.items || [])" :key="item.id">
                    <div class="rounded-lg border border-gray-200 p-3 bg-white">
                      <div class="flex items-start gap-3">
                        <div class="size-8 rounded-lg bg-emerald-50 text-emerald-600 flex items-center justify-center text-xs font-semibold uppercase" x-text="item.item_type[0]"></div>
                        <div class="flex-1 min-w-0">
                          <p class="text-sm font-semibold text-gray-900 line-clamp-1" x-text="item.title"></p>
                          <p class="text-xs text-gray-500 capitalize">
                            <span x-text="item.item_type"></span> Â· <span x-text="item.content_type"></span>
                          </p>
                        </div>
                      </div>
                    </div>
                  </template>
                  <p class="text-xs text-gray-500 col-span-2" x-show="!(group.items?.length)">No items mapped.</p>
                </div>
              </div>
            </template>
          </div>
        </div>
      </template>
      <p class="text-sm text-gray-500" x-show="!sections.length">No sections added yet.</p>
    </div>
  </div>
</div>