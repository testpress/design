{% for user in ono_users %}
<tr>
  <td class="size-px whitespace-nowrap px-5 py-3">
    <div class="w-full flex items-center gap-x-3">
      {% if user.image_url %}
      <img class="shrink-0 size-[38px] rounded-full" src="{{ user.image_url }}" alt="Avatar">
      {% else %}
      <span x-data="{ initials: '{{ user.name }}'.split(' ').map(n => n[0]).join('').toUpperCase() }" x-text="initials"
        class="flex shrink-0 justify-center items-center size-[38px] bg-white border border-gray-200 text-gray-700 text-xs font-medium uppercase rounded-full dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300"></span>
      {% endif %}
      <div class="flex space-x-2 grow">
        <a class="text-sm truncate max-w-[12rem] font-medium text-gray-800 hover:text-emerald-600 decoration-2 hover:underline focus:outline-none focus:underline focus:text-emerald-600 dark:text-neutral-200 dark:hover:text-emerald-500 dark:focus:text-emerald-500"
          href="#" data-hs-overlay="#hs-user-detail-modal-{{ user.id }}">
          {{ user.name }}
        </a>
      </div>
    </div>
  </td>
  <td class="size-px whitespace-nowrap px-5 py-3">
    <span class="text-sm text-gray-600 dark:text-neutral-400">
      {% if user.aadhaar_number %}
      <span x-data="{ aadhaar: '{{ user.aadhaar_number }}' }" x-text="'XXXX-XXXX-' + aadhaar.slice(-4)"></span>
      {% elif user.work_permit_number %}
      {{ user.work_permit_number }}
      {% else %}
      N/A
      {% endif %}
    </span>
  </td>
  <td class="size-px whitespace-nowrap px-5 py-3">
    <span class="text-sm text-gray-600 dark:text-neutral-400">
      {{ user.phone }}
    </span>
  </td>
  <td class="size-px whitespace-nowrap px-5 py-3">
    <span class="text-sm text-gray-600 dark:text-neutral-400">
      {% if user.email %}{{ user.email }}{% else %}N/A{% endif %}
    </span>
  </td>
  <td class="size-px whitespace-nowrap px-5 py-3">
    {% if user.enrolled_cohorts.length > 0 %}
    <span class="hs-tooltip inline-block">
      <span class="text-emerald-600 dark:text-emerald-400 font-medium">{{ user.enrolled_cohorts.length }} cohort{% if
        user.enrolled_cohorts.length != 1 %}s{% endif %}</span>
      <span
        class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 inline-block absolute invisible z-20 py-1.5 px-2.5 bg-gray-900 text-xs text-white rounded-lg dark:bg-neutral-700"
        role="tooltip">
        {% for cohort in user.enrolled_cohorts %}
        {{ cohort.name }}{% if not loop.last %}<br>{% endif %}
        {% endfor %}
      </span>
    </span>
    {% else %}
    <span class="text-sm text-gray-500 dark:text-neutral-400">None</span>
    {% endif %}
  </td>
  <td class="size-px whitespace-nowrap px-5 py-1">
    <span class="text-sm text-gray-600 dark:text-neutral-400">
      {{ user.date_added }}
    </span>
  </td>
  <td class="size-px whitespace-nowrap px-4 py-1 text-end">
    <div class="hs-dropdown [--auto-close:inside] [--placement:bottom-right] relative inline-flex">
      <button id="hs-user-actions-{{ user.id }}" type="button"
        class="size-7 inline-flex justify-center items-center gap-x-2 rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-gray-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700"
        aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown">
        <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="1"></circle>
          <circle cx="12" cy="5" r="1"></circle>
          <circle cx="12" cy="19" r="1"></circle>
        </svg>
      </button>

      <div
        class="hs-dropdown-menu hs-dropdown-open:opacity-100 w-auto transition-[opacity,margin] duration opacity-0 hidden z-10 bg-white rounded-xl shadow-[0_10px_40px_10px_rgba(0,0,0,0.08)] dark:shadow-[0_10px_40px_10px_rgba(0,0,0,0.2)] dark:bg-neutral-900"
        role="menu" aria-orientation="vertical" aria-labelledby="hs-user-actions-{{ user.id }}">
        <div class="p-1">
          <button type="button"
            class="w-full flex items-center gap-x-3 py-2 px-3 rounded-lg text-sm text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-gray-100 dark:text-neutral-300 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800"
            data-hs-overlay="#hs-user-detail-modal-{{ user.id }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="shrink-0 size-3.5">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
            </svg>
            View
          </button>

          <button type="button"
            class="w-full flex gap-x-3 py-2 px-3 rounded-lg text-sm text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none dark:text-neutral-300 focus:outline-none focus:bg-gray-100 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800"
            data-hs-overlay="#hs-edit-user-modal-{{ user.id }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="shrink-0 size-3.5">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
            </svg>
            Edit
          </button>

          {% if user.enrolled_cohorts.length == 0 %}
          <button type="button"
            class="w-full flex items-center gap-x-3 py-2 px-3 rounded-lg text-sm text-red-600 hover:bg-red-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 dark:focus:bg-red-900/20"
            data-hs-overlay="#hs-delete-user-modal-{{ user.id }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="shrink-0 size-3.5">
              <polyline points="3 6 5 6 21 6" />
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
            </svg>
            Delete
          </button>
          {% else %}
          <button type="button"
            class="w-full flex items-center gap-x-3 py-2 px-3 rounded-lg text-sm text-gray-400 cursor-not-allowed disabled:opacity-50 disabled:pointer-events-none"
            disabled>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="shrink-0 size-3.5">
              <polyline points="3 6 5 6 21 6" />
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
            </svg>
            Delete (enrolled)
          </button>
          {% endif %}
        </div>
      </div>
    </div>
  </td>
</tr>
{% endfor %}