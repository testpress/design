---
view: Feedback
tags: testpress
title: Admin Feedback settings
date: 2025-10-17
---

{% extends "layouts/admin_base.html" %}

{% block body_class %}overflow-y-scroll min-h-screen bg-gray-100{% endblock body_class %}

{% block content %}
<div class="py-10 max-w-7xl mx-auto lg:px-8 px-4 space-y-5" x-data="sortableTable()" @keydown.escape.window="closeModal()">
	{% include "./includes/header.html" %}
  <div class="p-5 space-y-4 flex flex-col bg-white border border-gray-200 shadow-sm rounded-xl">
    <div class="text-lg md:text-xl font-semibold text-gray-800 flex items-center justify-between">
      Feedback Form

    <button @click="openAdd()" class="px-2 py-1 bg-emerald-600 hover:bg-emerald-700 text-white rounded text-sm">Add Question</button>
    </div>
    <div class='border-t border-gray-200'>
      {% include "./includes/questions_table.html" %}
      {% include "./includes/empty.html" %}
    </div>
  </div>
  {% include "./includes/edit_question_modal.html" %}
  {% include "./includes/add_question_modal.html" %}
</div>



  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <script>
    window.addEventListener('load', () => {
      const sortable = document.querySelector("#hs-basic-sortable");

      new Sortable(sortable, {
        animation: 150,
        ghostClass: 'bg-yellow-50',
        handle: '.cursor-grab'
      });
    });

    function sortableTable() {
      return {
        rows: [
          { id: 1, question: 'How the mentor of the course taught complex problems ?', isRequired: true, questionType: 'text' },
          { id: 2, question: 'Was the course content up to date?', isRequired: true, questionType: 'rating' },
          { id: 3, question: 'Did you find the assignments helpful?', isRequired: false, questionType: 'text' },
          { id: 4, question: 'Would you recommend this course to others?', isRequired: true, questionType: 'rating' },
        ],
        openRowId: null,
        openEditModal: false,
        editRow: {},

        openAddModal: false,
        newRow: {
          question: '',
          questionType: 'text',
          isRequired: false,
        },

        openEdit(row) {
          this.openRowId = row.id;
          this.editRow = { ...row };
          this.openEditModal = true;
        },

        closeModal() {
          this.openEditModal = false;
          this.openAddModal = false;
          this.openRowId = null;
          this.editRow = {};
          this.resetNewRow();
        },

        saveEdit() {
          const index = this.rows.findIndex(r => r.id === this.openRowId);
          if (index !== -1) {
            this.rows.splice(index, 1, { ...this.editRow });
          }
          this.closeModal();
        },

        openAdd() {
          this.resetNewRow();
          this.openAddModal = true;
        },

        resetNewRow() {
          this.newRow = {
            question: '',
            questionType: 'text',
            isRequired: false,
          };
        },

        saveNew() {
          if (!this.newRow.question.trim()) {
            return;
          }
          const newId = this.rows.length ? Math.max(...this.rows.map(r => r.id)) + 1 : 1;
          this.rows.push({ id: newId, ...this.newRow });
          this.closeModal();
        },
      }
    }
  </script>

{% endblock content %}


