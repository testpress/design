---
tags: testpress
iaa_view : Prepurchase Group Request
date: 2000-11-01
---

{% extends "layouts/admin_base.html" %}
{% block body_class %}overflow-y-scroll min-h-screen bg-gray-100{% endblock %}
{% block content %}
<div x-data="groupRequestReview()" class="py-10 max-w-7xl mx-auto lg:px-8 px-4 ">
  {% include "./header.html" %}
  <div class="p-5 mt-5 space-y-4 flex flex-col bg-white border border-gray-200 shadow-sm rounded-xl">
    {% include "./navigation_tabs.html" %}
    {% include "./filters.html" %}
    <div x-show="activeTab === 'pending'">
      {% include "./pending_review_content.html" %}
    </div>
  </div>

  {% include "./filter_sidebar.html" %}
</div>
{% endblock %}

{% block script %}
<script src="https://preline.co/assets/vendor/nouislider/dist/nouislider.min.js"></script>
<script src="https://preline.co/assets/vendor/clipboard/dist/clipboard.min.js"></script>
<script src="https://preline.co/assets/js/hs-copy-clipboard-helper.js"></script>
<script>
  function groupRequestReview() {
    return {
      groupRequests: [
        {
          id: 1,
          group: {
            name: "Terminal 2 Ground Staff",
            description: "Mandatory security awareness training for newly onboarded ground staff",
            total_users: 18
          },
          manager: {
            name: "Rajesh Kumar",
            organization: "ABC Airport Services Pvt Ltd",
            airport: "Chhatrapati Shivaji Maharaj International Airport, Mumbai",
            profile_url: "https://i.pravatar.cc/150?img=12",
            email: "rajesh.kumar@abcairport.com",
            phone: "+91 98765 43210"
          },
          product: {
            name: "AvSec Awareness Training"
          },
          submitted_on: "Jan 20, 2025",
          submitted_at: "2025-01-20T10:30:00"
        },
        {
          id: 2,
          group: {
            name: "Cargo Handling Team",
            description: "Security and safety compliance training for cargo operations team",
            total_users: 12
          },
          manager: {
            name: "Anita Sharma",
            organization: "Skyline Cargo Solutions",
            airport: "Indira Gandhi International Airport, Delhi",
            profile_url: "https://i.pravatar.cc/150?img=47",
            email: "anita.sharma@skylinecargo.com",
            phone: "+91 98765 43211"
          },
          product: {
            name: "Airport Security & Cargo Safety"
          },
          submitted_on: "Jan 18, 2025",
          submitted_at: "2025-01-18T14:20:00"
        },
        {
          id: 3,
          group: {
            name: "Fire & Rescue Unit",
            description: "Initial mandatory training for newly appointed fire and rescue personnel",
            total_users: 9
          },
          manager: {
            name: "Vikram Singh",
            organization: "AeroFire Safety Services",
            airport: "Kempegowda International Airport, Bengaluru",
            profile_url: "https://i.pravatar.cc/150?img=33",
            email: "vikram.singh@aerofire.com",
            phone: "+91 98765 43212"
          },
          product: {
            name: "Introduction to Airport Firefighting & Rescue Vehicles"
          },
          submitted_on: "Jan 16, 2025",
          submitted_at: "2025-01-16T09:15:00"
        },
        {
          id: 4,
          group: {
            name: "Terminal Operations Staff",
            description: "Annual mandatory compliance refresher for terminal operations staff",
            total_users: 25
          },
          manager: {
            name: "Meena Iyer",
            organization: "Gateway Airport Operations Ltd",
            airport: "Rajiv Gandhi International Airport, Hyderabad",
            profile_url: "https://i.pravatar.cc/150?img=45",
            email: "meena.iyer@gatewayops.com",
            phone: "+91 98765 43213"
          },
          product: {
            name: "Aviation Security Compliance Refresher"
          },
          submitted_on: "Jan 14, 2025",
          submitted_at: "2025-01-14T11:45:00"
        },
        {
          id: 5,
          group: {
            name: "Ground Handling Supervisors",
            description: "Mandatory safety and risk management training for supervisory staff",
            total_users: 7
          },
          manager: {
            name: "Suresh Patel",
            organization: "Prime Ground Handling Services",
            airport: "Sardar Vallabhbhai Patel International Airport, Ahmedabad",
            profile_url: "https://i.pravatar.cc/150?img=15",
            email: "suresh.patel@primeground.com",
            phone: "+91 98765 43214"
          },
          product: {
            name: "Airside Safety & Risk Management"
          },
          submitted_on: "Jan 12, 2025",
          submitted_at: "2025-01-12T16:30:00"
        }
      ],
      products: ['AvSec Awareness Training', 'Airport Security & Cargo Safety', 'Introduction to Airport Firefighting & Rescue Vehicles', 'Aviation Security Compliance Refresher', 'Airside Safety & Risk Management'],
      selectedProduct: null,
      selectedDateRange: 'all',
      customDateStart: null,
      customDateEnd: null,
      searchQuery: '',
      activeTab: 'pending',
      showFilterModal: false,

      get filteredPendingRequests() {
        let filtered = this.groupRequests;

        if (this.selectedProduct) {
          filtered = filtered.filter(r => r.product.name === this.selectedProduct);
        }

        if (this.selectedDateRange !== 'all') {
          const now = new Date();
          const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
          filtered = filtered.filter(r => {
            const submittedDate = new Date(r.submitted_at);
            if (this.selectedDateRange === 'today') {
              return submittedDate >= today;
            }
            if (this.selectedDateRange === 'last-7-days') {
              const sevenDaysAgo = new Date(today);
              sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
              return submittedDate >= sevenDaysAgo;
            }
            if (this.selectedDateRange === 'last-30-days') {
              const thirtyDaysAgo = new Date(today);
              thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
              return submittedDate >= thirtyDaysAgo;
            }
            if (this.selectedDateRange === 'custom' && this.customDateStart && this.customDateEnd) {
              return submittedDate >= new Date(this.customDateStart) && submittedDate <= new Date(this.customDateEnd);
            }
            return true;
          });
        }

        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filtered = filtered.filter(r =>
            r.group.name.toLowerCase().includes(query) ||
            r.manager.name.toLowerCase().includes(query) ||
            r.manager.organization.toLowerCase().includes(query) ||
            r.product.name.toLowerCase().includes(query) ||
            r.manager.email.toLowerCase().includes(query) ||
            (r.manager.phone && r.manager.phone.toLowerCase().includes(query))
          );
        }

        return filtered;
      },

      clearAllFilters() {
        this.selectedProduct = null;
        this.selectedDateRange = 'all';
        this.customDateStart = null;
        this.customDateEnd = null;
        this.searchQuery = '';
      },

      getActiveFiltersCount() {
        let count = 0;
        if (this.selectedProduct) count++;
        if (this.selectedDateRange !== 'all') count++;
        if (this.selectedDateRange === 'custom' && this.customDateStart && this.customDateEnd) count++;
        if (this.searchQuery) count++;
        return count;
      }
    };
  }
</script>
{% endblock %}