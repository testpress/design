<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Assignment List View</title>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/htmx.org@1.8.4" defer></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
  <div class="mx-auto max-w-7xl xl:flex xl:items-center xl:justify-between">
    <div class="flex-1 min-w-0">
        <h1 class="mt-2 text-2xl font-semibold leading-7 text-gray-900 sm:text-3xl sm:truncate">
            Assignments List
        </h1>
    </div>
    <div class="flex justify-between relative" x-data="assignmentData()" x-init="showSearchAssignmentDropdown = false" 
      @keydown.escape="showSearchAssignmentDropdown = false" @click.away="showSearchAssignmentDropdown = false">
      <div class="mt-5 flex lg:mt-0 py-2">
        <span class="sm:ml-3">
          <div>
            <!-- Hardcoded filter button -->
            <button :aria-expanded="showSearchAssignmentDropdown" type="button" @click="showSearchAssignmentDropdown = !showSearchAssignmentDropdown" class="group text-gray-700 font-medium flex items-center" aria-haspopup="true">
              <svg class="flex-none w-5 h-5 mr-2 text-gray-400 group-hover:text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z" clip-rule="evenodd"></path>
              </svg>
              Filter by Assignments
            </button>
          </div>
        </span>
      </div>
      <!-- Dropdown for Assignments -->
      <div x-cloak x-show="showSearchAssignmentDropdown" x-transition:leave="transition ease-in duration-100" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" 
        class="absolute left-5 z-10 w-64 top-14 sm:top-10 bg-white overflow-hidden shadow rounded-lg shadow-lg rounded-md ring-1 ring-black ring-opacity-5 opacity-100 transition ease-in duration-100">
        <div class="px-2 py-3">
          <input type="text" name="name" id="name" autocomplete="off" @input.debounce="filterAssignments($event.target.value)"
            class="rounded block w-full border-0 border-transparent focus:ring-0 bg-gray-100 text-sm" placeholder="Search Assignments"> 
          <ul class="max-h-56 overflow-auto text-sm my-3" tabindex="-1" role="listbox" aria-labelledby="listbox-label"
            aria-activedescendant="listbox-option-0">
            <!-- Loop through filtered assignments -->
            <template x-for="assignment in filteredAssignments" :key="assignment.id">
              <li
                class="rounded cursor-pointer hover:bg-gray-100 text-gray-900 cursor-default select-none relative py-2 px-3"
                id="listbox-option-0" role="option" @click="selectAssignment(assignment)">
                <div class="flex items-center">
                  <span class="block truncate" x-text="assignment.title"></span>
                </div>
              </li>
            </template>
            <!-- Show if no assignments are found -->
            <template x-if="filteredAssignments.length === 0">
              <li class="rounded text-gray-500 cursor-default select-none relative py-2 pl-3 pr-3" role="option">
                <div class="flex items-center justify-center">
                  <span class="block truncate">No Assignment Found</span>
                </div>
              </li>
            </template>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Sample JSON data for assignments
    const sampleAssignments = [
      { id: 1, title: "Assignment 1: Introduction to Programming" },
      { id: 2, title: "Assignment 2: Data Structures and Algorithms" },
      { id: 3, title: "Assignment 3: Web Development Basics" },
      { id: 4, title: "Assignment 4: Database Design" },
      { id: 5, title: "Assignment 5: Advanced JavaScript" },
    ];

    // Alpine.js data and logic
    document.addEventListener('alpine:init', () => {
      Alpine.data('assignmentData', () => ({
        showSearchAssignmentDropdown: false,
        assignments: sampleAssignments,
        filteredAssignments: sampleAssignments,
        selectedAssignment: null,

        // Filter assignments based on search input
        filterAssignments(searchQuery) {
          this.filteredAssignments = this.assignments.filter(assignment =>
            assignment.title.toLowerCase().includes(searchQuery.toLowerCase())
          );
        },

        // Handle assignment selection
        selectAssignment(assignment) {
          this.selectedAssignment = assignment;
          this.showSearchAssignmentDropdown = false;
          alert(`Selected Assignment: ${assignment.title}`);
        }
      }));
    });
  </script>
</body>
</html>