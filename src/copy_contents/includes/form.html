<div class="mt-5 flex flex-col bg-white border border-stone-200 rounded-xl shadow-2xs dark:bg-neutral-800 dark:border-neutral-700">
  <!-- Header -->
  <div class="py-3 pl-5 flex justify-between items-center gap-x-5 border-b border-stone-200 dark:border-neutral-700">
      <h2 class="inline-block font-semibold text-stone-800 dark:text-neutral-200">
        Copy To Destinations
      </h2>
        <div class="w-60">
          <select id="destination-select" class="w-full">
            <option value="">Apply Saved Destinations</option>
            <option value="set1">Destination Set 1</option>
            <option value="set2">Destination Set 2</option>
            <option value="set3">Destination Set 3</option>
            <option value="set4">Destination Set 4</option>
            <option value="set5">Destination Set 5</option>
            <option value="set6">Destination Set 6</option>
          </select>
        </div>
  </div>
  <!-- End Header -->

  <!-- Body -->
  <div class="py-3 px-5 space-y-2">
    <!-- Heading -->
    <div class="hidden md:grid grid-cols-12 gap-x-5">
      <div class="col-span-5">
        <span class="text-xs uppercase text-stone-600 dark:text-neutral-500">Courses</span>
      </div>

      <div class="col-span-5">
        <span class="text-xs uppercase text-stone-600 dark:text-neutral-500">Chapters</span>
      </div>

      <div class="col-span-2">
        <span class="sr-only">Actions</span>
      </div>
    </div>
    <!-- End Heading -->

    <!-- Wrapper -->
    <div id="hs-wrapper-for-copy">
      <!-- Example Card -->
      <div class="pt-5 mt-5 border-t border-stone-200 first:pt-0 first:mt-0 first:border-t-0 md:pt-0 md:border-t-0 dark:border-neutral-700">
        <div class="grid grid-cols-2 md:grid-cols-12 gap-3 sm:gap-5 items-center">
          <div class="col-span-5">
            <label class="md:hidden mb-1.5 block text-xs uppercase text-stone-500">
              Courses
            </label>
            <select class="course-select w-full">
              <option></option>
              <option value="course1">Course 1</option>
              <option value="course2">Course 2</option>
              <option value="course3">Course 3</option>
              <option value="course4">Course 4</option>
              <option value="course5">Course 5</option>
              <option value="course6">Course 6</option>
            </select>
          </div>

          <div class="col-span-5">
            <label class="md:hidden mb-1.5 block text-xs uppercase text-stone-500">
              Chapters
            </label>
            <select class="chapter-select w-full">
              <option></option>
              <option value="course1">Chapter 1</option>
              <option value="course2">Chapter 2</option>
              <option value="course3">Chapter 3</option>
              <option value="course4">Chapter 4</option>
              <option value="course5">Chapter 5</option>
              <option value="course6">Chapter 6</option>
            </select>
          </div>

          <div class="col-span-2 md:text-start">
            <button type="button" class="py-1 px-3 md:px-1 inline-flex justify-center items-center gap-x-1.5 font-medium text-sm rounded-full bg-stone-100 border border-transparent text-stone-600 hover:bg-stone-200 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-stone-200 dark:bg-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-600 dark:focus:bg-neutral-600" data-hs-copy-markup-delete-item>
              <svg class="hidden md:block shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
              </svg>
              <span class="md:hidden">Delete</span>
            </button>
          </div>
        </div>
      </div>
      <!-- End Example Card -->
    </div>
    <!-- End Wrapper -->

    <!-- Hidden Template -->
    <div id="hs-content-for-copy" class="hidden">
      <div class="pt-5 mt-5 border-t border-stone-200 first:pt-0 first:mt-0 first:border-t-0 md:pt-0 md:border-t-0 dark:border-neutral-700">
        <div class="grid grid-cols-2 md:grid-cols-12 gap-3 sm:gap-5 items-center">
          <div class="col-span-5">
            <label class="md:hidden mb-1.5 block text-xs uppercase text-stone-500">
              Courses
            </label>
            <select class="course-select w-full">
              <option></option>
              <option value="course1">Course 1</option>
              <option value="course2">Course 2</option>
              <option value="course3">Course 3</option>
            </select>
          </div>

          <div class="col-span-5">
            <label class="md:hidden mb-1.5 block text-xs uppercase text-stone-500">
              Chapters
            </label>
            <select class="chapter-select w-full">
              <option></option>
              <option value="course1">Chapter 1</option>
              <option value="course2">Chapter 2</option>
              <option value="course3">Chapter 3</option>
            </select>
          </div>

          <div class="col-span-2 md:text-start">
            <button type="button" class="py-1 px-3 md:px-1 inline-flex justify-center items-center gap-x-1.5 font-medium text-sm rounded-full bg-stone-100 border border-transparent text-stone-600 hover:bg-stone-200 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-stone-200 dark:bg-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-600 dark:focus:bg-neutral-600" data-hs-copy-markup-delete-item>
              <svg class="hidden md:block shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
              </svg>
              <span class="md:hidden">Delete</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Hidden Template -->
  </div>
  <!-- End Body -->

  <!-- Footer -->
  <div class="py-3 px-5 flex justify-between items-center gap-x-5">
    <p>
      <button id="copy-markup" type="button" class="py-1.5 px-2 inline-flex items-center gap-x-1 text-xs font-medium rounded-full border border-dashed border-stone-200 bg-white text-stone-800 hover:bg-stone-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-stone-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
        <svg class="shrink-0 size-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 12h14"></path>
          <path d="M12 5v14"></path>
        </svg>
        Add Destination
      </button>
    </p>
  </div>
  <div class="px-5 py-3 flex gap-3">
    <div class="flex h-6 shrink-0 items-center">
      <div class="group grid size-4 grid-cols-1">
        <input id="save-destination" type="checkbox" name="candidates" aria-describedby="candidates-description" class="col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-indigo-600 checked:bg-indigo-600 indeterminate:border-indigo-600 indeterminate:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto">
          <svg viewBox="0 0 14 14" fill="none" class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25">
            <path d="M3 8L6 11L11 3.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-0 group-has-checked:opacity-100"></path>
            <path d="M3 7H11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-0 group-has-indeterminate:opacity-100"></path>
          </svg>
      </div>
    </div>
    <div class="text-sm/6">
      <label for="destination-set" class="font-medium text-gray-900">Save as destination set</label>
        <p class="text-gray-500">save your selected destinations as a Destination Set for future use.</p>
    </div>
  </div>
  <div id="destinationNameSection" class="px-5 pt-2 pb-5 grid grid-cols-6 gap-x-3 gap-y-2 hidden">
    <div class="col-span-1">
      <label for="hs-pro-dauffnm" class="mt-1.5 inline-block text-sm text-gray-500 dark:text-neutral-500">
        Destination Set Name
      </label>
    </div>

    <div class="col-span-3">
      <input
        id="hs-pro-dauffnm"
        type="text"
        class="py-1.5 sm:py-2 px-3 block w-full border-gray-200 rounded-lg sm:text-sm placeholder:text-gray-400 focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-transparent dark:border-neutral-700 dark:text-neutral-300 dark:placeholder:text-white/60 dark:focus:ring-neutral-600"
        placeholder="Enter Destination Set Name"
      />
      <p class="px-2 text-sm/6 text-gray-500">Provide a name for the Destination Set to save destiantions for later use.</p>
    </div>
  </div>
  <div class="pt-2 pb-4 pl-4 pr-6 flex justify-end gap-x-2">
    <div class="flex-1 flex justify-end items-center gap-2">
      <button type="button" class="py-2 px-3 text-nowrap inline-flex justify-center items-center text-start whitespace-nowrap bg-white border border-gray-200 text-gray-800 text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-gray-50 focus:outline-hidden focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
        Cancel
      </button>
      <button type="button" class="py-2 px-3 text-nowrap inline-flex justify-center items-center gap-x-2 text-start whitespace-nowrap bg-blue-600 border border-blue-600 text-white text-sm font-medium rounded-lg shadow-2xs align-middle hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:ring-1 focus:ring-blue-300 dark:focus:ring-blue-500">
        Copy
      </button>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const addBtn = document.getElementById('copy-markup');
  const wrapper = document.getElementById('hs-wrapper-for-copy');
  const template = document.getElementById('hs-content-for-copy').firstElementChild;

  addBtn.addEventListener('click', () => {
    const clone = template.cloneNode(true);

    initCourseChapterSelects(clone);
    
    // Add delete functionality for cloned item
    const deleteBtn = clone.querySelector('[data-hs-copy-markup-delete-item]');
    if (deleteBtn) {
      deleteBtn.addEventListener('click', () => {
        clone.remove();
      });
    }

    wrapper.appendChild(clone);
  });

  // Add delete functionality for existing items
  wrapper.querySelectorAll('[data-hs-copy-markup-delete-item]').forEach(btn => {
    btn.addEventListener('click', (e) => {
      btn.closest('div.pt-5').remove();
    });
  });
});

  $(document).ready(function () {
    $('#destination-select').select2({
      placeholder: 'Apply Saved Destinations',
      allowClear: true,
      width: '90%',
      minimumResultsForSearch: 0
    });
  });

  const checkbox = document.getElementById("save-destination");
  const destinationSection = document.getElementById("destinationNameSection");

  checkbox.addEventListener("change", function () {
    if (this.checked) {
      destinationSection.classList.remove("hidden");
    } else {
      destinationSection.classList.add("hidden");
    }
  });

  function initCourseChapterSelects(context = document) {
    $(context).find('.course-select').select2({
      placeholder: 'Select Course',
      allowClear: true,
      width: '100%'
    });

    $(context).find('.chapter-select').select2({
      placeholder: 'Select Chapter',
      allowClear: true,
      width: '100%'
    });
  }

  $(document).ready(function () {
    initCourseChapterSelects(document.getElementById('hs-wrapper-for-copy'));
  });
</script>

<style>
  /* Select box */
.select2-container--default .select2-selection--single {
  height: 40px;
  border-radius: 0.5rem;
  border: 1px solid #e5e7eb;
  background-color: white;
  padding: 0.375rem 0.75rem;
  font-size: 0.875rem;
}

/* Text alignment */
.select2-selection__rendered {
  line-height: 24px;
  color: #1f2937;
}

/* Arrow */
.select2-selection__arrow {
  height: 38px;
  right: 0.5rem !important;
  top: 8px !important;
}

/* Dropdown */
.select2-dropdown {
  border-radius: 0.75rem;
  border: 1px solid #e5e7eb;
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}

/* Options */
.select2-results__option {
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
}

/* Hover */
.select2-results__option--highlighted {
  background-color: #f3f4f6;
  color: #111827;
}
</style>

