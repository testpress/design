{% extends "layouts/base.html" %}

{% block body %}

<body class="h-full {% block body_class %} {% endblock %}">
  <div class="grid grid-cols-2 gap-4 max-w-7xl mx-auto">
    <div class="sm:px-6 lg:px-8 mt-8">
      <div class="border-b border-gray-200 pb-2">
        <h3 class="text-base font-semibold leading-6 text-gray-900">Testpress</h3>
      </div>
      <ul class="list-disc mt-4 pl-5" x-data="{ isOpen: false }">
        {%- for item in collections.testpress -%}
        {% if not item.data.view %}
        <li><a target="_blank" href="{{ item.url|url }}" class="text-indigo-600 hover:text-indigo-900">{{ item.data.title }}</a></li>
        {% endif %}
       {%- endfor -%}
        {% for view, items in collections.testpress | groupBy("data.view") %}
          <li>
            {% if items[0].data.view %}
            <button type="button" @click="isOpen = !isOpen" class="text-indigo-600 cursor-pointer">{{ view | capitalize }}</button>
            <ul x-show="isOpen" class="my-2 pl-5 list-disc">
              {% for item in items %}
                <li >
                  <a target="_blank" href="{{ item.url | url }}" class="text-indigo-600 hover:text-indigo-900">
                  {{ item.data.title }}
                  </a>
                </li>
              {% endfor %}
            </ul>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
    <div class="sm:px-6 lg:px-8 mt-8">
      <div class="border-b border-gray-200 pb-2">
        <h3 class="text-base font-semibold leading-6 text-gray-900">TPStreams</h3>
      </div>
      <ul class="list-disc mt-4 pl-5">
      {%- for item in collections.tpstreams -%}
        <li><a target="_blank" href="{{ item.url|url }}" class="text-indigo-600 hover:text-indigo-900">{{ item.data.title }}</a></li>
      {%- endfor -%}
      </ul>
    </div>
    <div class="sm:px-6 lg:px-8 mt-8">
      <div class="border-b border-gray-200 pb-2">
        <h3 class="text-base font-semibold leading-6 text-gray-900">Simba</h3>
      </div>
      <ul class="list-disc mt-4 pl-5" x-data="{ isOpen: false }">
        {% for view, items in collections.simba | groupBy("data.view") %}
          <li>
            {% if items.length > 1 %}
            <button type="button" @click="isOpen = !isOpen" class="text-indigo-600 cursor-pointer">{{ view | capitalize }}</button>
            <ul x-show="isOpen" class="my-2 pl-5 list-disc">
              {% for item in items %}
                <li >
                  <a target="_blank" href="{{ item.url | url }}" class="text-indigo-600 hover:text-indigo-900">
                  {{ item.data.role }}
                  </a>
                </li>
              {% endfor %}
            </ul>
            {% else %}
            <a target="_blank" href="{{ items[0].url|url }}" class="text-indigo-600 hover:text-indigo-900">{{ view | capitalize }}</a>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</body>
{% endblock %}

