<script>
  function meetingsListData() {
    return {
      "showMeetingDetailModal": false,
      "showReserveLicenseModal": false,
      "showDeleteModal": false,
      "selectedMeeting": {},
      "hasDeleteError":false,
      "canDeleteMeeting":false,
      "deleteConfirmValue":null,
      "scheduled_meetings": JSON.parse('{{ upcoming_classes |dump |safe }}'),

      selectMeeting(id) {
        this.selectedMeeting = this.scheduled_meetings.find(meeting => meeting.id == id);
      },

      selectMeetingToDelete(id) {
        this.selectMeeting(id);
        this.selectedMeetingToDelete = {"name": this.selectedMeeting.name, "id": this.selectedMeeting.id};
        this.deleteConfirmValue = null;
        this.hasDeleteError = false;
        this.canDeleteMeeting = false;
        this.showDeleteModal = true;
      },

      getMeetingId(conference_id) {
        return conference_id ? conference_id : 'Not Generated';
      },

      generateMeetingID(chapter_content_id) {
        this.selectMeeting(chapter_content_id);
        return this.showReserveLicenseModal = true;
      },

      validateDeleteConfirmation() {
        if (!this.deleteConfirmValue) {
          this.hasDeleteError = false;
          return;
        }

        if (this.deleteConfirmValue == "delete") {
          this.hasDeleteError = false;
          this.canDeleteMeeting = true;
        }
        else {
          this.hasDeleteError = true;
          this.canDeleteMeeting = false;
        }
      },

      deleteMeeting() {
        if (this.canDeleteMeeting) this.showDeleteModal = false;
      },
    }
  }
</script>
