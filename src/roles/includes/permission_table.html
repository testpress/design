<div class="xl:col-span-2 xl:pr-8 xl:border-r xl:border-gray-200 pt-6">
  <div class="sm:flex sm:items-center">
    <div class="sm:flex-auto">
      <h1 class="text-base font-semibold leading-6 text-gray-900">Manage Role Permissions</h1>
      <p class="mt-2 text-sm text-gray-700">The following permissions will be automatically granted to the users who are assigned this role.</p>
    </div>
  </div>

  <div class="mt-8 flow-root">
    <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
      <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
        <table class="min-w-full">
          <thead class="bg-white">
            <tr>
              <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-3">Resource Name</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Can View</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Can Create</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Can Edit</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Can Delete</th>
            </tr>
          </thead>
          {% for app in apps %}
            <tbody class="bg-white" {% if loop.first %}x-data="{'isGroupExpanded': true}"{% else %}x-data="{'isGroupExpanded': false}"{% endif %}>
              <tr class="border-t border-gray-200">
                <th colspan="6" scope="colgroup" class="bg-gray-50 py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-3">
                  <button 
                    @click="isGroupExpanded = !isGroupExpanded"
                    type="button" class="hover:bg-gray-50 flex items-center w-full text-left" aria-controls="sub-menu-1" aria-expanded="false">
                    <svg class="mr-1 h-5 w-5 shrink-0" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" :class="{'rotate-90 text-gray-500': isGroupExpanded, 'text-gray-400': !isGroupExpanded}">
                      <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                    </svg>
                    {{ app.name }}
                  </button>
                </th>
              </tr>

              {% for model in app.models %}
                <tr x-cloak x-show="isGroupExpanded" class="border-t border-gray-300">
                  <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-9">{{ model.name }}</td>
                  {% for permission in model.permissions %}
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">{% set permissionName = permission %} {% include "./toggle.html" %}</td>
                  {% endfor %}
                </tr>
              {% endfor %}
            </tbody>
          {% endfor %}
        </table>
      </div>
    </div>
  </div>
</div>
