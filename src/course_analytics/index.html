---
slug: course_analytics
tags: testpress
title: Course Analytics
date: 2024-02-11
---
{% extends "layouts/admin_base.html" %} {% block body_class %}overflow-y-scroll min-h-screen bg-gray-100{% endblock %}
{% block extra_head %}
<script type="text/javascript">
  function app() {
    return {
      showDeleteModal: false,
      showAssignStaffModal: false,
      showMultiSelectOptions: false,
      showSuggestions: false,
      selectedStaffs: [],
      toggleSelection(staff_name) {
        if (this.selectedStaffs.includes(staff_name)) {
          this.selectedStaffs = this.selectedStaffs.filter(
            (p) => p !== staff_name
          );
        } else {
          this.selectedStaffs.push(staff_name);
        }
      },
    };
  }
</script>
{% endblock extra_head %}
{% block content %}
<script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
<div x-data="app()" class="py-8 mx-auto max-w-7xl xl:px-8 lg:grid lg:grid-cols-12 lg:gap-x-5">
  <div class="px-2 py-6 sm:px-6 lg:py-0 lg:px-0 lg:col-span-3">
    {% include "./sidebar.html" %}
  </div>
  <div class="px-4 lg:px-0 lg:col-span-9">
    <div class="overflow-hidden bg-white divide-y divide-gray-200 rounded-lg shadow">
      <div class="px-4 py-5 sm:px-6">
        <h3 class="text-base font-semibold leading-6 text-gray-900">Job Postings</h3>
        <div id="main" style="width: 100%;min-height:400px;"></div>
        <!-- Buttons for switching views -->
        <button onclick="setView('week')">Week</button>
        <button onclick="setView('month')">Month</button>
        <button onclick="setView('year')">Year</button>
        <!-- Content goes here -->
        <!-- We use less vertical padding on card headers on desktop than on body sections -->
      </div>
      <div class="px-4 py-5 sm:p-6">
        <!-- Content goes here -->
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  // Initialize the chart instance
  var myChart = echarts.init(document.getElementById('main'), null, {
    textStyle: {
      fontFamily: 'Inter', // Set the global font to Inter
    }
  });
  // Sample data (you'll need to replace this with actual data)
  var testData = {
    week: [120, 132, 101, 134, 90, 230, 210],
    month: new Array(30).fill(0).map(() => Math.floor(Math.random() * 200)),
    year: new Array(12).fill(0).map(() => Math.floor(Math.random() * 1000))
  };
  var videoData = {
    week: [150, 232, 201, 154, 190, 330, 410],
    month: new Array(30).fill(0).map(() => Math.floor(Math.random() * 300)),
    year: new Array(12).fill(0).map(() => Math.floor(Math.random() * 1200))
  };
  // Function to set view and update chart
  function setView(view) {
    var xAxisData = [];
    var format = '';
    var chartType = 'line';
    switch (view) {
      case 'week':
        xAxisData = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
        format = 'day';
        break;
      case 'month':
        xAxisData = [...Array(30).keys()].map(day => day + 1);
        format = 'date';
        chartType = 'bar'
        break;
      case 'year':
        xAxisData = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        format = 'month';
        break;
    }
    var option = {
      tooltip: {
        trigger: 'axis',
        formatter: function (params) {
          var title = params[0].axisValueLabel; // Assuming axis trigger, gets the common axis value
          var content = `<div style="color: #0f172a; font-weight: 600; font-family: 'Inter'; background-color: #f8fafc">` + title + '</div><br/>';
          params.forEach(function (item) {
            // Add each series item to the tooltip. Customize as needed.
            content += `<div">${item.marker} ${item.seriesName}: ${item.value}</div><br>`;
          });
          return content;
        },
        textStyle: {
          fontFamily: 'Inter', // This applies to the whole tooltip content if not using HTML
        },
        axisPointer: {
          type: 'line', // Shows a line pointer in the axis to indicate hover position
          textStyle: {
            fontFamily: 'Inter', // Explicitly setting font for tooltip
          },
          label: {
            show: true,
            backgroundColor: '#fff', // Customization for the label background color
            color: '#555',
            shadowBlur: 10, // Shadow blur effect
            shadowOffsetX: 0,
            shadowOffsetY: 0,
            shadowColor: 'rgba(0, 0, 0, 0.3)' // Shadow color
          }
        }
      },
      legend: {
        data: ['Tests', 'Videos'],
        textStyle: {
          fontFamily: 'Inter', // Apply Inter font to legend
        },
      },
      xAxis: {
        type: 'category',
        boundaryGap: false,
        data: xAxisData,
        axisLine: {
          lineStyle: {
            color: '#F3F4F6', // Set the desired color (red in this example)
            width: 2, // You can also adjust the line width (optional)
          }
        },
        axisLabel: {
          color: '#666',
          fontFamily: 'Inter'
        }
      },
      yAxis: {
        type: 'value',
        splitLine: { // This property controls the styling of the split lines (grid lines)
          show: true, // Ensure grid lines are shown
          lineStyle: {
            color: 'rgba(200, 200, 200, 0.1)', // Lighten the color and reduce opacity
            // Alternatively, use a lighter color or increase transparency as needed
            type: 'solid' // Optional: Change to 'solid' for solid lines
          }
        },
        axisLabel: {
          fontFamily: 'Inter', // Apply Inter font to yAxis labels, as previously mentioned
        }
      },
      series: [
        {
          name: 'Tests',
          data: testData[view],
          type: chartType,
          smooth: true,
          color: '#3b82f6',
          symbol: 'circle', // Ensure the symbol shape is set to circle
          symbolSize: 10, // Adjust the size of the symbol as needed
          itemStyle: {
            borderColor: '#fff', // White outer circle
            borderWidth: 2, // Thickness of the outer circle, adjust as needed
            color: '#3b82f6', // Color for the inner circle
          },
          emphasis: {
            focus: 'none',
            scale: 1.3,// Larger symbol size on hover
            itemStyle: {
              borderColor: '#fff',
              borderWidth: 2,
              color: '#3b82f6',
            }
          },
          lineStyle: {
            width: 3
          },
          areaStyle: {
            color: new echarts.graphic.LinearGradient(
              0, 0, 0, 1,
              [
                { offset: 0, color: 'rgb(59, 130, 246, 0.5)' },
                { offset: 1, color: 'rgb(59, 130, 246, 0)' },
              ]
            )
          },
        },
        {
          name: 'Videos',
          data: videoData[view],
          type: chartType,
          smooth: true,
          color: '#fdba74',
          symbol: 'circle', // Ensure the symbol shape is set to circle
          symbolSize: 10, // Adjust the size of the symbol as needed
          itemStyle: {
            borderColor: '#fff', // White outer circle
            borderWidth: 2, // Thickness of the outer circle, adjust as needed
            color: '#fdba74', // Color for the inner circle
          },
          emphasis: {
            focus: 'none',
            scale: 1.3,// Larger symbol size on hover
            itemStyle: {
              borderColor: '#fff',
              borderWidth: 2,
              color: '#fdba74',
            }
          },
          lineStyle: {
            width: 3
          },
          areaStyle: {
            color: new echarts.graphic.LinearGradient(
              0, 0, 0, 1,
              [
                { offset: 0, color: 'rgb(229, 221, 200, 0.5)' },
                { offset: 1, color: 'rgb(229, 221, 200, 0)' },
              ]
            )
          },
        }
      ]
    };

    if (chartType == 'bar') {
      option['series'][0]['stack'] = 'total';
      option['series'][1]['stack'] = 'total';
    }
    myChart.setOption(option);
  }
  // Initialize chart with the current week view
  setView('week');
  window.addEventListener('resize', function () {
    if (myChart !== null && myChart !== undefined) {
      myChart.resize();
    }
  });

</script>
{% endblock %}