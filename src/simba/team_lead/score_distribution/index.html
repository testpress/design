---
tags: simba
role: "Team Lead"
view: "Score Distribution"
date: 2024-08-20
parent_page: Overview
current_page: Score Distribution
tailwindv4: true
batch_limit: 4
---

{% extends "src/simba/base.html" %} {% block title %} Score Distribution | Simba {% endblock title %}
{% block extra_head %}
<link rel="stylesheet" href="https://preline.co/assets/vendor/apexcharts/dist/apexcharts.css">
<style type="text/css">
  .apexcharts-tooltip.apexcharts-theme-light {
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }

  .vc {
    z-index: 100;
  }
</style>
{% endblock extra_head %}
{% block content %}
<div class="max-w-[85rem] px-4 sm:px-6 lg:px-8 mx-auto">
  {% include 'src/simba/partials/breadcrumb.html' %}
  <div class="py-2 sm:pb-0 sm:pt-5 space-y-5">
    {% include './includes/header.html' %}
    {% include './includes/filter_pills.html' %}
    {% include './includes/stats.html' %}
    {% include './includes/score_distribution_chart.html' %}
    {% include './includes/score_table.html' %}
  </div>
</div>
{% include './includes/filter_offcanvas.html' %}
{% endblock content %}

{% block extra_scripts %}
<script src="https://preline.co/assets/vendor/vanilla-calendar-pro/index.js"></script>
<script src="https://preline.co/assets/vendor/@floating-ui/core/dist/floating-ui.core.umd.min.js"></script>
<script src="https://preline.co/assets/vendor/@floating-ui/dom/dist/floating-ui.dom.umd.min.js"></script>
<script src="https://preline.co/assets/vendor/preline/dist/index.js?v=3.0.1"></script>
<script src="https://preline.co/assets/vendor/lodash/lodash.min.js"></script>
<script src="https://preline.co/assets/vendor/apexcharts/dist/apexcharts.min.js"></script>
<script src="https://preline.co/assets/vendor/preline/dist/helper-apexcharts.js"></script>
<script>
  window.addEventListener('load', () => {
    const SCORE_DISTRIBUTION_CHART = {
      selector: '#score-distribution-chart',
      height: { desktop: 300, mobile: 200 },
      mobileBreakpoint: 568,
      series: {
        name: 'Students',
        data: [1, 2, 3, 4, 6, 5, 4, 3, 1, 1]
      },
      categories: ['0-10', '11-20', '21-30', '31-40', '41-50', '51-60', '61-70', '71-80', '81-90', '91-100'],
      axisTitles: {
        x: 'Score (%)',
        y: 'Students'
      },
      axis: {
        yLabelMinWidth: 0,
        yLabelMaxWidth: 140,
        mobileOffsetX: -2
      },
      typography: {
        fontFamily: 'Inter, ui-sans-serif',
        fontWeight: 400,
        titleFontSize: '13px',
        xLabelFontSize: '13px',
        yLabelFontSize: '12px',
        mobileLabelFontSize: '11px'
      },
      theme: {
        light: { primary: '#16a34a', axisText: '#a8a29e', gridBorder: '#e5e5e5' },
        dark: { primary: '#22c55e', axisText: '#a3a3a3', gridBorder: '#44403c' }
      },
      fillGradient: {
        shadeIntensity: 0.1,
        opacityFrom: 0.5,
        opacityTo: 0,
        stops: [50, 100, 100, 100]
      }
    };

    const formatK = (value) => value >= 1000 ? `${value / 1000}k` : value;
    const formatCurrencyK = (value) => `$${formatK(value)}`;

    function getAxisTextColor(mode) {
      return mode === 'dark'
        ? SCORE_DISTRIBUTION_CHART.theme.dark.axisText
        : SCORE_DISTRIBUTION_CHART.theme.light.axisText;
    }

    function buildTextStyle(mode, fontSize) {
      return {
        colors: getAxisTextColor(mode),
        fontSize,
        fontFamily: SCORE_DISTRIBUTION_CHART.typography.fontFamily,
        fontWeight: SCORE_DISTRIBUTION_CHART.typography.fontWeight
      };
    }

    function buildTooltipConfig(mode, title) {
      return {
        title,
        mode,
        valuePrefix: '',
        hasCategory: false,
        hasTextLabel: true,
        wrapperExtClasses: 'min-w-32.5',
        labelDivider: ':',
        labelExtClasses: 'ms-2'
      };
    }

    function buildChartOptions(mode) {
      return {
        chart: {
          height: SCORE_DISTRIBUTION_CHART.height.desktop,
          type: 'area',
          toolbar: { show: false },
          zoom: { enabled: false }
        },
        series: [{
          name: SCORE_DISTRIBUTION_CHART.series.name,
          data: SCORE_DISTRIBUTION_CHART.series.data
        }],
        legend: { show: false },
        dataLabels: { enabled: false },
        stroke: { curve: 'smooth', width: 2 },
        fill: {
          type: 'gradient',
          gradient: {
            type: 'vertical',
            shadeIntensity: 1,
            opacityFrom: 0.2,
            opacityTo: 0.8
          }
        },
        xaxis: {
          title: {
            text: SCORE_DISTRIBUTION_CHART.axisTitles.x,
            style: buildTextStyle(mode, SCORE_DISTRIBUTION_CHART.typography.titleFontSize)
          },
          type: 'category',
          tickPlacement: 'on',
          categories: SCORE_DISTRIBUTION_CHART.categories,
          axisBorder: { show: false },
          axisTicks: { show: false },
          crosshairs: {
            stroke: { dashArray: 0 },
            dropShadow: { show: false }
          },
          tooltip: { enabled: false },
          labels: {
            style: buildTextStyle(mode, SCORE_DISTRIBUTION_CHART.typography.xLabelFontSize)
          }
        },
        yaxis: {
          title: {
            text: SCORE_DISTRIBUTION_CHART.axisTitles.y,
            style: buildTextStyle(mode, SCORE_DISTRIBUTION_CHART.typography.titleFontSize)
          },
          labels: {
            align: 'left',
            minWidth: SCORE_DISTRIBUTION_CHART.axis.yLabelMinWidth,
            maxWidth: SCORE_DISTRIBUTION_CHART.axis.yLabelMaxWidth,
            style: buildTextStyle(mode, SCORE_DISTRIBUTION_CHART.typography.yLabelFontSize),
            formatter: formatK
          }
        },
        tooltip: {
          y: { formatter: formatCurrencyK },
          custom: function (props) {
            const { categories } = props.ctx.opts.xaxis;
            const { dataPointIndex } = props;
            const title = categories[dataPointIndex];
            return buildTooltip(props, buildTooltipConfig(mode, `${title}`));
          }
        },
        responsive: [{
          breakpoint: SCORE_DISTRIBUTION_CHART.mobileBreakpoint,
          options: {
            chart: { height: SCORE_DISTRIBUTION_CHART.height.mobile },
            labels: {
              style: buildTextStyle(mode, SCORE_DISTRIBUTION_CHART.typography.mobileLabelFontSize),
              offsetX: SCORE_DISTRIBUTION_CHART.axis.mobileOffsetX
            },
            yaxis: {
              labels: {
                align: 'left',
                minWidth: SCORE_DISTRIBUTION_CHART.axis.yLabelMinWidth,
                maxWidth: SCORE_DISTRIBUTION_CHART.axis.yLabelMaxWidth,
                style: buildTextStyle(mode, SCORE_DISTRIBUTION_CHART.typography.mobileLabelFontSize),
                formatter: formatK
              }
            }
          }
        }]
      };
    }

    function buildThemeOverrides(mode) {
      const theme = mode === 'dark'
        ? SCORE_DISTRIBUTION_CHART.theme.dark
        : SCORE_DISTRIBUTION_CHART.theme.light;

      return {
        colors: [theme.primary],
        fill: { gradient: SCORE_DISTRIBUTION_CHART.fillGradient },
        grid: {
          strokeDashArray: 2,
          borderColor: theme.gridBorder
        },
        xaxis: {
          labels: { style: { colors: theme.axisText } }
        },
        yaxis: {
          labels: { style: { colors: theme.axisText } }
        }
      };
    }

    buildChart(
      SCORE_DISTRIBUTION_CHART.selector,
      buildChartOptions,
      buildThemeOverrides('light'),
      buildThemeOverrides('dark')
    );
  });
</script>

{% endblock extra_scripts %}