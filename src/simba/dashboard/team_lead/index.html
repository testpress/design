---
role: "Team Lead"
view: "Dashboard"
permalink: simba/{{ role | lower | slugify }}/dashboard/
tags: simba
date: 2024-08-20
user:
first_name: James
category: staff
franchisemember: true
tailwindv4: true
---

{% extends "../base_dashboard.html" %}
{% block extra_head %}
<link rel="stylesheet" href="https://preline.co/assets/vendor/apexcharts/dist/apexcharts.css">
<style type="text/css">
  .apexcharts-tooltip.apexcharts-theme-light {
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }
</style>
{% endblock extra_head %}
{% block content %}
<div class="max-w-[85rem] px-4 sm:px-6 lg:px-8 mx-auto">
  {% include 'src/simba/partials/breadcrumb.html' %}
  <div class="py-2 sm:pb-0 sm:pt-5 space-y-5">
    {% include './includes/header.html' %}
    {% include './includes/stats.html' %}
    <!-- Grid -->
    <div class="grid grid-cols-1 xl:grid-cols-6 gap-5">
      <div class="xl:col-span-4">
        {% include './includes/score_distribution_chart.html' %}
      </div>
      <!-- End Col -->

      <div class="xl:col-span-2">
        {% include './includes/attendance_health_chart.html' %}
      </div>
      <!-- End Col -->

      <div class="xl:col-span-6">
        {% include './includes/performance_overview.html' %}
      </div>
    </div>
    <!-- End Grid -->

  </div>
</div>
{% endblock content %}


{% block extra_scripts %}
<script src="https://preline.co/assets/vendor/vanilla-calendar-pro/index.js"></script>
<script src="https://preline.co/assets/vendor/@floating-ui/core/dist/floating-ui.core.umd.min.js"></script>
<script src="https://preline.co/assets/vendor/@floating-ui/dom/dist/floating-ui.dom.umd.min.js"></script>
<script src="https://preline.co/assets/vendor/preline/dist/index.js?v=3.0.1"></script>
<script src="https://preline.co/assets/vendor/lodash/lodash.min.js"></script>
<script src="https://preline.co/assets/vendor/apexcharts/dist/apexcharts.min.js"></script>
<script src="https://preline.co/assets/vendor/preline/dist/helper-apexcharts.js"></script>
<script>
  window.addEventListener('load', () => {
    // Apex Total Sales Chart
    (function () {
      buildChart('#score-distribution-chart', (mode) => ({
        chart: {
          height: 300,
          type: 'area',
          toolbar: {
            show: false
          },
          zoom: {
            enabled: false
          }
        },
        series: [
          {
            name: 'Students',
            data: [1, 2, 3, 4, 6, 5, 4, 3, 1, 1]
          }
        ],
        legend: {
          show: false
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          curve: 'smooth',
          width: 2
        },
        fill: {
          type: 'gradient',
          gradient: {
            type: 'vertical',
            shadeIntensity: 1,
            opacityFrom: 0.2,
            opacityTo: 0.8
          }
        },
        xaxis: {
          title: {
            text: 'Score (%)',
            style: {
              colors: 'oklch(.444 .011 73.639)',
              fontSize: '13px',
              fontFamily: 'Inter, ui-sans-serif',
              fontWeight: 400
            }
          },
          type: 'category',
          tickPlacement: 'on',
          categories: [
            '0-20',
            '21-40',
            '21-30',
            '31-40',
            '41-50',
            '51-60',
            '61-70',
            '71-80',
            '81-90',
            '91-100'
          ],
          axisBorder: {
            show: false
          },
          axisTicks: {
            show: false
          },
          crosshairs: {
            stroke: {
              dashArray: 0
            },
            dropShadow: {
              show: false
            }
          },
          tooltip: {
            enabled: false
          },
          labels: {
            style: {
              colors: '#a8a29e',
              fontSize: '13px',
              fontFamily: 'Inter, ui-sans-serif',
              fontWeight: 400
            },
          }
        },
        yaxis: {
          title: {
            text: 'Students',
            style: {
              colors: 'oklch(.444 .011 73.639)',
              fontSize: '13px',
              fontFamily: 'Inter, ui-sans-serif',
              fontWeight: 400
            }
          },
          labels: {
            align: 'left',
            minWidth: 0,
            maxWidth: 140,
            style: {
              colors: '#a8a29e',
              fontSize: '11px',
              fontFamily: 'Inter, ui-sans-serif',
              fontWeight: 400
            },
            formatter: (value) => value >= 1000 ? `${value / 1000}k` : value
          }
        },
        tooltip: {
          y: {
            formatter: (value) => `$${value >= 1000 ? `${value / 1000}k` : value}`
          },
          custom: function (props) {
            const { categories } = props.ctx.opts.xaxis;
            const { dataPointIndex } = props;
            const title = categories[dataPointIndex];
            const newTitle = `${title}`;

            return buildTooltip(props, {
              title: newTitle,
              mode,
              valuePrefix: '',
              hasCategory: false,
              hasTextLabel: true,
              wrapperExtClasses: 'min-w-32.5',
              labelDivider: ':',
              labelExtClasses: 'ms-2'
            });
          }
        },
        responsive: [{
          breakpoint: 568,
          options: {
            chart: {
              height: 200
            },
            labels: {
              style: {
                colors: '#a8a29e',
                fontSize: '11px',
                fontFamily: 'Inter, ui-sans-serif',
                fontWeight: 400
              },
              offsetX: -2,
              formatter: (title) => title.slice(0, 3)
            },
            yaxis: {
              labels: {
                align: 'left',
                minWidth: 0,
                maxWidth: 140,
                style: {
                  colors: '#a8a29e',
                  fontSize: '11px',
                  fontFamily: 'Inter, ui-sans-serif',
                  fontWeight: 400
                },
                formatter: (value) => value >= 1000 ? `${value / 1000}k` : value
              }
            }
          },
        }]
      }), {
        colors: ['#16a34a'],
        fill: {
          gradient: {
            shadeIntensity: .1,
            opacityFrom: .5,
            opacityTo: 0,
            stops: [50, 100, 100, 100]
          }
        },
        grid: {
          strokeDashArray: 2,
          borderColor: '#e5e5e5'
        },
        xaxis: {
          labels: {
            style: {
              colors: '#a8a29e',
            }
          }
        },
        yaxis: {
          labels: {
            style: {
              colors: '#a8a29e'
            }
          }
        }
      }, {
        colors: ['#22c55e'],
        fill: {
          gradient: {
            shadeIntensity: .1,
            opacityFrom: .5,
            opacityTo: 0,
            stops: [50, 100, 100, 100]
          }
        },
        grid: {
          strokeDashArray: 2,
          borderColor: '#44403c'
        },
        xaxis: {
          labels: {
            style: {
              colors: '#a3a3a3',
            }
          }
        },
        yaxis: {
          labels: {
            style: {
              colors: '#a3a3a3'
            }
          }
        }
      });
    })();
  });
</script>

<script>
  // Apex Donut Chart
  (function () {
    buildChart(
      "#hs-pro-crbch",
      (mode) => ({
        chart: {
          height: 350,
          type: "donut",
        },
        plotOptions: {
          pie: {
            startAngle: -90,
            endAngle: 90,
            donut: {
              size: "80%",
            },
            dataLabels: {
              show: false,
            }
          }
        },
        series: [44, 56],
        labels: ["Attended", "Not Attended"],
        legend: {
          show: false,
        },
        stroke: {
          lineCap: 'round'
        },
        dataLabels: {
          enabled: false,
        },
        states: {
          hover: {
            filter: {
              type: "none",
            },
          },
        },
        grid: {
          padding: {
            top: 20,
            bottom: -140
          }
        },
        tooltip: {
          enabled: true,
          custom: function (props) {
            return buildTooltipForDonut(
              props,
              mode === "dark"
                ? ["#fff", "#fff", "oklch(43.2% 0.232 292.759)", "oklch(92.2% 0 0)"]
                : ["#fff", "#fff", "#fff", "oklch(27.8% 0.033 256.848)"]
            );
          },
        },
      }),
      {
        colors: [
          '#16a34a',
          '#dadada'
        ],
        stroke: {
          colors: ["rgb(255, 255, 255)"],
        },
        plotOptions: {
          radialBar: {
            track: {
              background: "oklch(96.7% 0.003 264.542)",
            },
          },
        },
      },
      {
        colors: [
          '#22c55e',
          '#676767'

        ],
        stroke: {
          colors: ["oklch(26.9% 0 0)"],
        },
        plotOptions: {
          radialBar: {
            track: {
              background: "oklch(37.1% 0 0)",
            },
          },
        },
      }
    );
  })();
</script>


<script>
  window.addEventListener('load', () => requestAnimationFrame(() => {
    const datepickerInstance = HSDatepicker.getInstance('#hs-pro-vcead', true);
    const element = datepickerInstance.element;
    const vanillaCalendar = element.vanillaCalendar;
    const todayBtn = document.querySelector('#hs-pro-vcead-today');
    const prevBtn = document.querySelector('#hs-pro-vcead-prev');
    const nextBtn = document.querySelector('#hs-pro-vcead-next');
    const getCurrentDate = () => {
      const currentState = element.getCurrentState();

      if (currentState.selectedDates && currentState.selectedDates.length > 0) {
        const dateStr = currentState.selectedDates[0];

        if (dateStr === 'today') {
          return new Date();
        }

        const date = new Date(dateStr);

        if (!isNaN(date.getTime())) {
          return date;
        }
      }

      return new Date();
    };
    const formatDate = (date) => {
      if (!date || isNaN(date.getTime())) {
        return new Date().toISOString().split('T')[0];
      }

      return date.toISOString().split('T')[0];
    };
    const updateDate = (selectedDates) => {
      vanillaCalendar.set({ selectedDates: selectedDates });

      const inputElement = document.querySelector('#hs-pro-vcead');

      if (inputElement && selectedDates.length > 0) {
        const dateStr = selectedDates[0];

        if (dateStr === 'today') {
          const today = new Date();

          inputElement.value = 'Today, ' + today.getDate() + ' ' +
            today.toLocaleDateString('en-US', { month: 'long' }) + ' ' + today.getFullYear();
        } else {
          const date = new Date(dateStr);
          const dayName = date.toLocaleDateString('en-US', { weekday: 'long' });
          const day = date.getDate();
          const month = date.toLocaleDateString('en-US', { month: 'long' });
          const year = date.getFullYear();
          inputElement.value = `${dayName}, ${day} ${month} ${year}`;
        }
      }

      const changeEvent = new CustomEvent('change', {
        detail: {
          selectedDates: selectedDates,
          selectedTime: vanillaCalendar.context.selectedTime,
          rest: vanillaCalendar.context
        }
      });

      inputElement.dispatchEvent(changeEvent);
    };

    todayBtn.addEventListener('click', () => {
      updateDate(['today']);
    });

    prevBtn.addEventListener('click', () => {
      const currentDate = getCurrentDate();

      currentDate.setDate(currentDate.getDate() - 1);

      const prevDate = formatDate(currentDate);

      updateDate([prevDate]);
    });

    nextBtn.addEventListener('click', () => {
      const currentDate = getCurrentDate();

      currentDate.setDate(currentDate.getDate() + 1);

      const nextDate = formatDate(currentDate);

      updateDate([nextDate]);
    });
  }));
</script>
{% include './includes/script.html' %}
{% endblock extra_scripts %}